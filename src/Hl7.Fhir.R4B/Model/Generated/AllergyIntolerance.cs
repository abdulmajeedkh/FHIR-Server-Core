// <auto-generated/>
// Contents of: hl7.fhir.r4b.expansions@4.3.0, hl7.fhir.r4b.core@4.3.0

using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using Hl7.Fhir.Introspection;
using Hl7.Fhir.Serialization;
using Hl7.Fhir.Specification;
using Hl7.Fhir.Utility;
using Hl7.Fhir.Validation;
using System.Diagnostics.CodeAnalysis;
using SystemPrimitive = Hl7.Fhir.ElementModel.Types;

#nullable enable

/*
  Copyright (c) 2011+, HL7, Inc.
  All rights reserved.
  
  Redistribution and use in source and binary forms, with or without modification, 
  are permitted provided that the following conditions are met:
  
   * Redistributions of source code must retain the above copyright notice, this 
     list of conditions and the following disclaimer.
   * Redistributions in binary form must reproduce the above copyright notice, 
     this list of conditions and the following disclaimer in the documentation 
     and/or other materials provided with the distribution.
   * Neither the name of HL7 nor the names of its contributors may be used to 
     endorse or promote products derived from this software without specific 
     prior written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND 
  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED 
  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT 
  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR 
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
  POSSIBILITY OF SUCH DAMAGE.
  
*/

namespace Hl7.Fhir.Model
{
  /// <summary>
  /// Allergy or Intolerance (generally: Risk of adverse reaction to a substance)
  /// </summary>
  /// <remarks>
  /// Risk of harmful or undesirable, physiological response which is unique to an individual and associated with exposure to a substance.
  /// Substances include, but are not limited to: a therapeutic substance administered correctly at an appropriate dosage for the individual; food; material derived from plants or animals; or venom from insect stings.
  /// </remarks>
  [Serializable]
  [DataContract]
  [FhirType("AllergyIntolerance","http://hl7.org/fhir/StructureDefinition/AllergyIntolerance")]
  public partial class AllergyIntolerance : Hl7.Fhir.Model.DomainResource, IIdentifiable<List<Identifier>>
  {
    /// <summary>
    /// FHIR Type Name
    /// </summary>
    public override string TypeName => "AllergyIntolerance";

    /// <summary>
    /// Preferred value set for AllergyIntolerance Clinical Status.
    /// (url: http://hl7.org/fhir/ValueSet/allergyintolerance-clinical)
    /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical)
    /// </summary>
    [FhirEnumeration("AllergyIntoleranceClinicalStatusCodes", "http://hl7.org/fhir/ValueSet/allergyintolerance-clinical", "http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical")]
    public enum AllergyIntoleranceClinicalStatusCodes
    {
      /// <summary>
      /// The subject is currently experiencing, or is at risk of, a reaction to the identified substance.
      /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical)
      /// </summary>
      [EnumLiteral("active"), Description("Active")]
      Active,
      /// <summary>
      /// The subject is no longer at risk of a reaction to the identified substance.
      /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical)
      /// </summary>
      [EnumLiteral("inactive"), Description("Inactive")]
      Inactive,
      /// <summary>
      /// A reaction to the identified substance has been clinically reassessed by testing or re-exposure and is considered no longer to be present. Re-exposure could be accidental, unplanned, or outside of any clinical setting.
      /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical)
      /// </summary>
      [EnumLiteral("resolved"), Description("Resolved")]
      Resolved,
    }

    /// <summary>
    /// Preferred value set for AllergyIntolerance Verification Status.
    /// (url: http://hl7.org/fhir/ValueSet/allergyintolerance-verification)
    /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-verification)
    /// </summary>
    [FhirEnumeration("AllergyIntoleranceVerificationStatusCodes", "http://hl7.org/fhir/ValueSet/allergyintolerance-verification", "http://terminology.hl7.org/CodeSystem/allergyintolerance-verification")]
    public enum AllergyIntoleranceVerificationStatusCodes
    {
      /// <summary>
      /// A low level of certainty about the propensity for a reaction to the identified substance.
      /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-verification)
      /// </summary>
      [EnumLiteral("unconfirmed"), Description("Unconfirmed")]
      Unconfirmed,
      /// <summary>
      /// A high level of certainty about the propensity for a reaction to the identified substance, which may include clinical evidence by testing or rechallenge.
      /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-verification)
      /// </summary>
      [EnumLiteral("confirmed"), Description("Confirmed")]
      Confirmed,
      /// <summary>
      /// A propensity for a reaction to the identified substance has been disputed or disproven with a sufficient level of clinical certainty to justify invalidating the assertion. This might or might not include testing or rechallenge.
      /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-verification)
      /// </summary>
      [EnumLiteral("refuted"), Description("Refuted")]
      Refuted,
      /// <summary>
      /// The statement was entered in error and is not valid.
      /// (system: http://terminology.hl7.org/CodeSystem/allergyintolerance-verification)
      /// </summary>
      [EnumLiteral("entered-in-error"), Description("Entered in Error")]
      EnteredInError,
    }

    /// <summary>
    /// Identification of the underlying physiological mechanism for a Reaction Risk.
    /// (url: http://hl7.org/fhir/ValueSet/allergy-intolerance-type)
    /// (system: http://hl7.org/fhir/allergy-intolerance-type)
    /// </summary>
    [FhirEnumeration("AllergyIntoleranceType", "http://hl7.org/fhir/ValueSet/allergy-intolerance-type", "http://hl7.org/fhir/allergy-intolerance-type")]
    public enum AllergyIntoleranceType
    {
      /// <summary>
      /// A propensity for hypersensitive reaction(s) to a substance.  These reactions are most typically type I hypersensitivity, plus other \"allergy-like\" reactions, including pseudoallergy.
      /// (system: http://hl7.org/fhir/allergy-intolerance-type)
      /// </summary>
      [EnumLiteral("allergy"), Description("Allergy")]
      Allergy,
      /// <summary>
      /// A propensity for adverse reactions to a substance that is not judged to be allergic or \"allergy-like\".  These reactions are typically (but not necessarily) non-immune.  They are to some degree idiosyncratic and/or patient-specific (i.e. are not a reaction that is expected to occur with most or all patients given similar circumstances).
      /// (system: http://hl7.org/fhir/allergy-intolerance-type)
      /// </summary>
      [EnumLiteral("intolerance"), Description("Intolerance")]
      Intolerance,
    }

    /// <summary>
    /// Category of an identified substance associated with allergies or intolerances.
    /// (url: http://hl7.org/fhir/ValueSet/allergy-intolerance-category)
    /// (system: http://hl7.org/fhir/allergy-intolerance-category)
    /// </summary>
    [FhirEnumeration("AllergyIntoleranceCategory", "http://hl7.org/fhir/ValueSet/allergy-intolerance-category", "http://hl7.org/fhir/allergy-intolerance-category")]
    public enum AllergyIntoleranceCategory
    {
      /// <summary>
      /// Any substance consumed to provide nutritional support for the body.
      /// (system: http://hl7.org/fhir/allergy-intolerance-category)
      /// </summary>
      [EnumLiteral("food"), Description("Food")]
      Food,
      /// <summary>
      /// Substances administered to achieve a physiological effect.
      /// (system: http://hl7.org/fhir/allergy-intolerance-category)
      /// </summary>
      [EnumLiteral("medication"), Description("Medication")]
      Medication,
      /// <summary>
      /// Any substances that are encountered in the environment, including any substance not already classified as food, medication, or biologic.
      /// (system: http://hl7.org/fhir/allergy-intolerance-category)
      /// </summary>
      [EnumLiteral("environment"), Description("Environment")]
      Environment,
      /// <summary>
      /// A preparation that is synthesized from living organisms or their products, especially a human or animal protein, such as a hormone or antitoxin, that is used as a diagnostic, preventive, or therapeutic agent. Examples of biologic medications include: vaccines; allergenic extracts, which are used for both diagnosis and treatment (for example, allergy shots); gene therapies; cellular therapies.  There are other biologic products, such as tissues, which are not typically associated with allergies.
      /// (system: http://hl7.org/fhir/allergy-intolerance-category)
      /// </summary>
      [EnumLiteral("biologic"), Description("Biologic")]
      Biologic,
    }

    /// <summary>
    /// Estimate of the potential clinical harm, or seriousness, of a reaction to an identified substance.
    /// (url: http://hl7.org/fhir/ValueSet/allergy-intolerance-criticality)
    /// (system: http://hl7.org/fhir/allergy-intolerance-criticality)
    /// </summary>
    [FhirEnumeration("AllergyIntoleranceCriticality", "http://hl7.org/fhir/ValueSet/allergy-intolerance-criticality", "http://hl7.org/fhir/allergy-intolerance-criticality")]
    public enum AllergyIntoleranceCriticality
    {
      /// <summary>
      /// Worst case result of a future exposure is not assessed to be life-threatening or having high potential for organ system failure.
      /// (system: http://hl7.org/fhir/allergy-intolerance-criticality)
      /// </summary>
      [EnumLiteral("low"), Description("Low Risk")]
      Low,
      /// <summary>
      /// Worst case result of a future exposure is assessed to be life-threatening or having high potential for organ system failure.
      /// (system: http://hl7.org/fhir/allergy-intolerance-criticality)
      /// </summary>
      [EnumLiteral("high"), Description("High Risk")]
      High,
      /// <summary>
      /// Unable to assess the worst case result of a future exposure.
      /// (system: http://hl7.org/fhir/allergy-intolerance-criticality)
      /// </summary>
      [EnumLiteral("unable-to-assess"), Description("Unable to Assess Risk")]
      UnableToAssess,
    }

    /// <summary>
    /// Clinical assessment of the severity of a reaction event as a whole, potentially considering multiple different manifestations.
    /// (url: http://hl7.org/fhir/ValueSet/reaction-event-severity)
    /// (system: http://hl7.org/fhir/reaction-event-severity)
    /// </summary>
    [FhirEnumeration("AllergyIntoleranceSeverity", "http://hl7.org/fhir/ValueSet/reaction-event-severity", "http://hl7.org/fhir/reaction-event-severity")]
    public enum AllergyIntoleranceSeverity
    {
      /// <summary>
      /// Causes mild physiological effects.
      /// (system: http://hl7.org/fhir/reaction-event-severity)
      /// </summary>
      [EnumLiteral("mild"), Description("Mild")]
      Mild,
      /// <summary>
      /// Causes moderate physiological effects.
      /// (system: http://hl7.org/fhir/reaction-event-severity)
      /// </summary>
      [EnumLiteral("moderate"), Description("Moderate")]
      Moderate,
      /// <summary>
      /// Causes severe physiological effects.
      /// (system: http://hl7.org/fhir/reaction-event-severity)
      /// </summary>
      [EnumLiteral("severe"), Description("Severe")]
      Severe,
    }

    /// <summary>
    /// Adverse Reaction Events linked to exposure to substance
    /// </summary>
    /// <remarks>
    /// Details about each adverse reaction event linked to exposure to the identified substance.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AllergyIntolerance.reaction", IsBackboneType=true)]
    public partial class ReactionComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AllergyIntolerance.reaction";

      /// <summary>
      /// Specific substance or pharmaceutical product considered to be responsible for event.
      /// </summary>
      [FhirElement("substance", Order=40)]
      [Binding("SubstanceCode")]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept? Substance
      {
        get
        {
          if(_Substance.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["substance"]);
          return _Substance;
        }

        set
        {
          if (_Substance.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("substance");
          _Substance = value;
          OnPropertyChanged("Substance");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Substance;

      /// <summary>
      /// Clinical symptoms/signs associated with the Event.
      /// </summary>
      [FhirElement("manifestation", Order=50)]
      [Binding("Manifestation")]
      [Cardinality(Min=1,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Manifestation
      {
        get
        {
          if(_Manifestation.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["manifestation"]);
          return _Manifestation ??= [];
        }

        set
        {
          if (_Manifestation.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("manifestation");
          _Manifestation = value;
          OnPropertyChanged("Manifestation");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Manifestation;

      /// <summary>
      /// Description of the event as a whole.
      /// </summary>
      [FhirElement("description", Order=60)]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? DescriptionElement
      {
        get
        {
          if(_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["description"]);
          return _DescriptionElement;
        }

        set
        {
          if (_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("description");
          _DescriptionElement = value;
          OnPropertyChanged("DescriptionElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _DescriptionElement;

      /// <summary>
      /// Description of the event as a whole
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Description
      {
        get => DescriptionElement?.Value;
        set
        {
          DescriptionElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("Description");
        }
      }

      /// <summary>
      /// Date(/time) when manifestations showed.
      /// </summary>
      [FhirElement("onset", Order=70)]
      [DataMember]
      public Hl7.Fhir.Model.FhirDateTime? OnsetElement
      {
        get
        {
          if(_OnsetElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirDateTime), Overflow["onset"]);
          return _OnsetElement;
        }

        set
        {
          if (_OnsetElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
            Overflow.Remove("onset");
          _OnsetElement = value;
          OnPropertyChanged("OnsetElement");
        }

      }

      private Hl7.Fhir.Model.FhirDateTime? _OnsetElement;

      /// <summary>
      /// Date(/time) when manifestations showed
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Onset
      {
        get => OnsetElement?.Value;
        set
        {
          OnsetElement = value is null ? null! : new Hl7.Fhir.Model.FhirDateTime(value);
          OnPropertyChanged("Onset");
        }
      }

      /// <summary>
      /// mild | moderate | severe (of event as a whole).
      /// </summary>
      [FhirElement("severity", Order=80)]
      [Binding("AllergyIntoleranceSeverity")]
      [DataMember]
      public Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>? SeverityElement
      {
        get
        {
          if(_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>>())
            throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>), Overflow["severity"]);
          return _SeverityElement;
        }

        set
        {
          if (_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>>())
            Overflow.Remove("severity");
          _SeverityElement = value;
          OnPropertyChanged("SeverityElement");
        }

      }

      private Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>? _SeverityElement;

      /// <summary>
      /// mild | moderate | severe (of event as a whole)
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity? Severity
      {
        get => SeverityElement?.Value;
        set
        {
          SeverityElement = value is null ? null! : new Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>(value);
          OnPropertyChanged("Severity");
        }
      }

      /// <summary>
      /// How the subject was exposed to the substance.
      /// </summary>
      [FhirElement("exposureRoute", Order=90)]
      [Binding("RouteOfAdministration")]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept? ExposureRoute
      {
        get
        {
          if(_ExposureRoute.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["exposureRoute"]);
          return _ExposureRoute;
        }

        set
        {
          if (_ExposureRoute.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("exposureRoute");
          _ExposureRoute = value;
          OnPropertyChanged("ExposureRoute");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _ExposureRoute;

      /// <summary>
      /// Text about event not captured in other fields.
      /// </summary>
      [FhirElement("note", Order=100)]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Annotation> Note
      {
        get
        {
          if(_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Annotation>), Overflow["note"]);
          return _Note ??= [];
        }

        set
        {
          if (_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>())
            Overflow.Remove("note");
          _Note = value;
          OnPropertyChanged("Note");
        }

      }

      private List<Hl7.Fhir.Model.Annotation>? _Note;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not ReactionComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Substance is not null) dest.Substance = (Hl7.Fhir.Model.CodeableConcept)_Substance.DeepCopyInternal();
        if(_Manifestation is not null) dest.Manifestation = new List<Hl7.Fhir.Model.CodeableConcept>(_Manifestation.DeepCopyInternal());
        if(_DescriptionElement is not null) dest.DescriptionElement = (Hl7.Fhir.Model.FhirString)_DescriptionElement.DeepCopyInternal();
        if(_OnsetElement is not null) dest.OnsetElement = (Hl7.Fhir.Model.FhirDateTime)_OnsetElement.DeepCopyInternal();
        if(_SeverityElement is not null) dest.SeverityElement = (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>)_SeverityElement.DeepCopyInternal();
        if(_ExposureRoute is not null) dest.ExposureRoute = (Hl7.Fhir.Model.CodeableConcept)_ExposureRoute.DeepCopyInternal();
        if(_Note is not null) dest.Note = new List<Hl7.Fhir.Model.Annotation>(_Note.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new ReactionComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not ReactionComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Substance, otherT._Substance)) return false;
        if(!comparer.ListEquals(_Manifestation, otherT._Manifestation)) return false;
        if(!comparer.Equals(_DescriptionElement, otherT._DescriptionElement)) return false;
        if(!comparer.Equals(_OnsetElement, otherT._OnsetElement)) return false;
        if(!comparer.Equals(_SeverityElement, otherT._SeverityElement)) return false;
        if(!comparer.Equals(_ExposureRoute, otherT._ExposureRoute)) return false;
        if(!comparer.ListEquals(_Note, otherT._Note)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "substance":
            if (_Substance.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["substance"];
              return true;
            }
            value = _Substance;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "manifestation":
            if (_Manifestation.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["manifestation"];
              return true;
            }
            value = _Manifestation;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          case "description":
            if (_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["description"];
              return true;
            }
            value = _DescriptionElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "onset":
            if (_OnsetElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
            {
              value = Overflow["onset"];
              return true;
            }
            value = _OnsetElement;
            return (value as Hl7.Fhir.Model.FhirDateTime) is not null;
          case "severity":
            if (_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>>())
            {
              value = Overflow["severity"];
              return true;
            }
            value = _SeverityElement;
            return (value as Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>) is not null;
          case "exposureRoute":
            if (_ExposureRoute.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["exposureRoute"];
              return true;
            }
            value = _ExposureRoute;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "note":
            if (_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>())
            {
              value = Overflow["note"];
              return true;
            }
            value = _Note;
            return (value as List<Hl7.Fhir.Model.Annotation>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "substance":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Substance = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["substance"] = value;
            }
            else Substance = (Hl7.Fhir.Model.CodeableConcept?)value;
            return this;
          case "manifestation":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Manifestation = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["manifestation"] = value;
            }
            else Manifestation = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          case "description":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              DescriptionElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["description"] = value;
            }
            else DescriptionElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "onset":
            if (value is not (Hl7.Fhir.Model.FhirDateTime or null))
            {
              OnsetElement = OverflowNull<Hl7.Fhir.Model.FhirDateTime>.INSTANCE;
              Overflow["onset"] = value;
            }
            else OnsetElement = (Hl7.Fhir.Model.FhirDateTime?)value;
            return this;
          case "severity":
            if (value is not (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity> or null))
            {
              SeverityElement = OverflowNull<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>>.INSTANCE;
              Overflow["severity"] = value;
            }
            else SeverityElement = (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>?)value;
            return this;
          case "exposureRoute":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              ExposureRoute = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["exposureRoute"] = value;
            }
            else ExposureRoute = (Hl7.Fhir.Model.CodeableConcept?)value;
            return this;
          case "note":
            if (value is not (List<Hl7.Fhir.Model.Annotation> or null))
            {
              Note = OverflowNull<List<Hl7.Fhir.Model.Annotation>>.INSTANCE;
              Overflow["note"] = value;
            }
            else Note = (List<Hl7.Fhir.Model.Annotation>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Substance is not null && !_Substance.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("substance",_Substance);
        if (_Manifestation?.Any() is true && !_Manifestation.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("manifestation",_Manifestation);
        if (_DescriptionElement is not null && !_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("description",_DescriptionElement);
        if (_OnsetElement is not null && !_OnsetElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>()) yield return new KeyValuePair<string,object>("onset",_OnsetElement);
        if (_SeverityElement is not null && !_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceSeverity>>()) yield return new KeyValuePair<string,object>("severity",_SeverityElement);
        if (_ExposureRoute is not null && !_ExposureRoute.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("exposureRoute",_ExposureRoute);
        if (_Note?.Any() is true && !_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>()) yield return new KeyValuePair<string,object>("note",_Note);
      }

    }

    /// <summary>
    /// External ids for this item.
    /// </summary>
    [FhirElement("identifier", InSummary=true, Order=90, FiveWs="FiveWs.identifier")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Identifier> Identifier
    {
      get
      {
        if(_Identifier.InOverflow<List<Hl7.Fhir.Model.Identifier>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Identifier>), Overflow["identifier"]);
        return _Identifier ??= [];
      }

      set
      {
        if (_Identifier.InOverflow<List<Hl7.Fhir.Model.Identifier>>())
          Overflow.Remove("identifier");
        _Identifier = value;
        OnPropertyChanged("Identifier");
      }

    }

    private List<Hl7.Fhir.Model.Identifier>? _Identifier;

    /// <summary>
    /// active | inactive | resolved.
    /// </summary>
    [FhirElement("clinicalStatus", InSummary=true, IsModifier=true, Order=100, FiveWs="FiveWs.status")]
    [Binding("AllergyIntoleranceClinicalStatus")]
    [DataMember]
    public Hl7.Fhir.Model.CodeableConcept? ClinicalStatus
    {
      get
      {
        if(_ClinicalStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["clinicalStatus"]);
        return _ClinicalStatus;
      }

      set
      {
        if (_ClinicalStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          Overflow.Remove("clinicalStatus");
        _ClinicalStatus = value;
        OnPropertyChanged("ClinicalStatus");
      }

    }

    private Hl7.Fhir.Model.CodeableConcept? _ClinicalStatus;

    /// <summary>
    /// unconfirmed | confirmed | refuted | entered-in-error.
    /// </summary>
    [FhirElement("verificationStatus", InSummary=true, IsModifier=true, Order=110, FiveWs="FiveWs.status")]
    [Binding("AllergyIntoleranceVerificationStatus")]
    [DataMember]
    public Hl7.Fhir.Model.CodeableConcept? VerificationStatus
    {
      get
      {
        if(_VerificationStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["verificationStatus"]);
        return _VerificationStatus;
      }

      set
      {
        if (_VerificationStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          Overflow.Remove("verificationStatus");
        _VerificationStatus = value;
        OnPropertyChanged("VerificationStatus");
      }

    }

    private Hl7.Fhir.Model.CodeableConcept? _VerificationStatus;

    /// <summary>
    /// allergy | intolerance - Underlying mechanism (if known).
    /// </summary>
    [FhirElement("type", InSummary=true, Order=120, FiveWs="FiveWs.class")]
    [Binding("AllergyIntoleranceType")]
    [DataMember]
    public Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>? TypeElement
    {
      get
      {
        if(_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>), Overflow["type"]);
        return _TypeElement;
      }

      set
      {
        if (_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>>())
          Overflow.Remove("type");
        _TypeElement = value;
        OnPropertyChanged("TypeElement");
      }

    }

    private Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>? _TypeElement;

    /// <summary>
    /// allergy | intolerance - Underlying mechanism (if known)
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType? Type
    {
      get => TypeElement?.Value;
      set
      {
        TypeElement = value is null ? null! : new Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>(value);
        OnPropertyChanged("Type");
      }
    }

    /// <summary>
    /// food | medication | environment | biologic.
    /// </summary>
    [FhirElement("category", InSummary=true, Order=130, FiveWs="FiveWs.class")]
    [Binding("AllergyIntoleranceCategory")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>> CategoryElement
    {
      get
      {
        if(_CategoryElement.InOverflow<List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>>())
          throw CodedValidationException.FromTypes(typeof(List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>), Overflow["category"]);
        return _CategoryElement ??= [];
      }

      set
      {
        if (_CategoryElement.InOverflow<List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>>())
          Overflow.Remove("category");
        _CategoryElement = value;
        OnPropertyChanged("CategoryElement");
      }

    }

    private List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>? _CategoryElement;

    /// <summary>
    /// food | medication | environment | biologic
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public IEnumerable<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory?> Category
    {
      get => _CategoryElement?.Select(elem => elem.Value) ?? [];
      set
      {
        if (value == null)
          CategoryElement = null!;
        else
          CategoryElement = new List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>(value.Select(elem=>new Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>(elem)));
        OnPropertyChanged("Category");
      }
    }

    /// <summary>
    /// low | high | unable-to-assess.
    /// </summary>
    [FhirElement("criticality", InSummary=true, Order=140, FiveWs="FiveWs.grade")]
    [Binding("AllergyIntoleranceCriticality")]
    [DataMember]
    public Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>? CriticalityElement
    {
      get
      {
        if(_CriticalityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>), Overflow["criticality"]);
        return _CriticalityElement;
      }

      set
      {
        if (_CriticalityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>>())
          Overflow.Remove("criticality");
        _CriticalityElement = value;
        OnPropertyChanged("CriticalityElement");
      }

    }

    private Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>? _CriticalityElement;

    /// <summary>
    /// low | high | unable-to-assess
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality? Criticality
    {
      get => CriticalityElement?.Value;
      set
      {
        CriticalityElement = value is null ? null! : new Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>(value);
        OnPropertyChanged("Criticality");
      }
    }

    /// <summary>
    /// Code that identifies the allergy or intolerance.
    /// </summary>
    [FhirElement("code", InSummary=true, Order=150, FiveWs="FiveWs.what[x]")]
    [Binding("AllergyIntoleranceCode")]
    [DataMember]
    public Hl7.Fhir.Model.CodeableConcept? Code
    {
      get
      {
        if(_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["code"]);
        return _Code;
      }

      set
      {
        if (_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          Overflow.Remove("code");
        _Code = value;
        OnPropertyChanged("Code");
      }

    }

    private Hl7.Fhir.Model.CodeableConcept? _Code;

    /// <summary>
    /// Who the sensitivity is for.
    /// </summary>
    [FhirElement("patient", InSummary=true, Order=160, FiveWs="FiveWs.subject")]
    [CLSCompliant(false)]
    [References("Patient")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.ResourceReference Patient
    {
      get
      {
        if(_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["patient"]);
        return _Patient!;
      }

      set
      {
        if (_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          Overflow.Remove("patient");
        _Patient = value;
        OnPropertyChanged("Patient");
      }

    }

    private Hl7.Fhir.Model.ResourceReference? _Patient;

    /// <summary>
    /// Encounter when the allergy or intolerance was asserted.
    /// </summary>
    [FhirElement("encounter", Order=170, FiveWs="FiveWs.context")]
    [CLSCompliant(false)]
    [References("Encounter")]
    [DataMember]
    public Hl7.Fhir.Model.ResourceReference? Encounter
    {
      get
      {
        if(_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["encounter"]);
        return _Encounter;
      }

      set
      {
        if (_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          Overflow.Remove("encounter");
        _Encounter = value;
        OnPropertyChanged("Encounter");
      }

    }

    private Hl7.Fhir.Model.ResourceReference? _Encounter;

    /// <summary>
    /// When allergy or intolerance was identified.
    /// </summary>
    [FhirElement("onset", Order=180, Choice=ChoiceType.DatatypeChoice, FiveWs="FiveWs.init")]
    [CLSCompliant(false)]
    [AllowedTypes(typeof(Hl7.Fhir.Model.FhirDateTime),typeof(Hl7.Fhir.Model.Age),typeof(Hl7.Fhir.Model.Period),typeof(Hl7.Fhir.Model.Range),typeof(Hl7.Fhir.Model.FhirString))]
    [DataMember]
    public Hl7.Fhir.Model.DataType? Onset
    {
      get
      {
        if(_Onset.InOverflow<DynamicDataType>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["onset"]);
        return _Onset;
      }

      set
      {
        if (_Onset.InOverflow<DynamicDataType>())
          Overflow.Remove("onset");
        _Onset = value;
        OnPropertyChanged("Onset");
      }

    }

    private Hl7.Fhir.Model.DataType? _Onset;

    /// <summary>
    /// Date first version of the resource instance was recorded.
    /// </summary>
    [FhirElement("recordedDate", Order=190, FiveWs="FiveWs.recorded")]
    [DataMember]
    public Hl7.Fhir.Model.FhirDateTime? RecordedDateElement
    {
      get
      {
        if(_RecordedDateElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirDateTime), Overflow["recordedDate"]);
        return _RecordedDateElement;
      }

      set
      {
        if (_RecordedDateElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          Overflow.Remove("recordedDate");
        _RecordedDateElement = value;
        OnPropertyChanged("RecordedDateElement");
      }

    }

    private Hl7.Fhir.Model.FhirDateTime? _RecordedDateElement;

    /// <summary>
    /// Date first version of the resource instance was recorded
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public string? RecordedDate
    {
      get => RecordedDateElement?.Value;
      set
      {
        RecordedDateElement = value is null ? null! : new Hl7.Fhir.Model.FhirDateTime(value);
        OnPropertyChanged("RecordedDate");
      }
    }

    /// <summary>
    /// Who recorded the sensitivity.
    /// </summary>
    [FhirElement("recorder", Order=200, FiveWs="FiveWs.author")]
    [CLSCompliant(false)]
    [References("Practitioner","PractitionerRole","Patient","RelatedPerson")]
    [DataMember]
    public Hl7.Fhir.Model.ResourceReference? Recorder
    {
      get
      {
        if(_Recorder.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["recorder"]);
        return _Recorder;
      }

      set
      {
        if (_Recorder.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          Overflow.Remove("recorder");
        _Recorder = value;
        OnPropertyChanged("Recorder");
      }

    }

    private Hl7.Fhir.Model.ResourceReference? _Recorder;

    /// <summary>
    /// Source of the information about the allergy.
    /// </summary>
    [FhirElement("asserter", InSummary=true, Order=210, FiveWs="FiveWs.source")]
    [CLSCompliant(false)]
    [References("Patient","RelatedPerson","Practitioner","PractitionerRole")]
    [DataMember]
    public Hl7.Fhir.Model.ResourceReference? Asserter
    {
      get
      {
        if(_Asserter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["asserter"]);
        return _Asserter;
      }

      set
      {
        if (_Asserter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          Overflow.Remove("asserter");
        _Asserter = value;
        OnPropertyChanged("Asserter");
      }

    }

    private Hl7.Fhir.Model.ResourceReference? _Asserter;

    /// <summary>
    /// Date(/time) of last known occurrence of a reaction.
    /// </summary>
    [FhirElement("lastOccurrence", Order=220)]
    [DataMember]
    public Hl7.Fhir.Model.FhirDateTime? LastOccurrenceElement
    {
      get
      {
        if(_LastOccurrenceElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirDateTime), Overflow["lastOccurrence"]);
        return _LastOccurrenceElement;
      }

      set
      {
        if (_LastOccurrenceElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          Overflow.Remove("lastOccurrence");
        _LastOccurrenceElement = value;
        OnPropertyChanged("LastOccurrenceElement");
      }

    }

    private Hl7.Fhir.Model.FhirDateTime? _LastOccurrenceElement;

    /// <summary>
    /// Date(/time) of last known occurrence of a reaction
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public string? LastOccurrence
    {
      get => LastOccurrenceElement?.Value;
      set
      {
        LastOccurrenceElement = value is null ? null! : new Hl7.Fhir.Model.FhirDateTime(value);
        OnPropertyChanged("LastOccurrence");
      }
    }

    /// <summary>
    /// Additional text not captured in other fields.
    /// </summary>
    [FhirElement("note", Order=230)]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Annotation> Note
    {
      get
      {
        if(_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Annotation>), Overflow["note"]);
        return _Note ??= [];
      }

      set
      {
        if (_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>())
          Overflow.Remove("note");
        _Note = value;
        OnPropertyChanged("Note");
      }

    }

    private List<Hl7.Fhir.Model.Annotation>? _Note;

    /// <summary>
    /// Adverse Reaction Events linked to exposure to substance.
    /// </summary>
    [FhirElement("reaction", Order=240)]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent> Reaction
    {
      get
      {
        if(_Reaction.InOverflow<List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>), Overflow["reaction"]);
        return _Reaction ??= [];
      }

      set
      {
        if (_Reaction.InOverflow<List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>>())
          Overflow.Remove("reaction");
        _Reaction = value;
        OnPropertyChanged("Reaction");
      }

    }

    private List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>? _Reaction;

    List<Identifier> IIdentifiable<List<Identifier>>.Identifier { get => Identifier; set => Identifier = value!; }

    protected internal override void CopyToInternal(Base other)
    {
      if(other is not AllergyIntolerance dest)
        throw new ArgumentException("Can only copy to an object of the same type", "other");

      base.CopyToInternal(dest);
      if(_Identifier is not null) dest.Identifier = new List<Hl7.Fhir.Model.Identifier>(_Identifier.DeepCopyInternal());
      if(_ClinicalStatus is not null) dest.ClinicalStatus = (Hl7.Fhir.Model.CodeableConcept)_ClinicalStatus.DeepCopyInternal();
      if(_VerificationStatus is not null) dest.VerificationStatus = (Hl7.Fhir.Model.CodeableConcept)_VerificationStatus.DeepCopyInternal();
      if(_TypeElement is not null) dest.TypeElement = (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>)_TypeElement.DeepCopyInternal();
      if(_CategoryElement is not null) dest.CategoryElement = new List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>(_CategoryElement.DeepCopyInternal());
      if(_CriticalityElement is not null) dest.CriticalityElement = (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>)_CriticalityElement.DeepCopyInternal();
      if(_Code is not null) dest.Code = (Hl7.Fhir.Model.CodeableConcept)_Code.DeepCopyInternal();
      if(_Patient is not null) dest.Patient = (Hl7.Fhir.Model.ResourceReference)_Patient.DeepCopyInternal();
      if(_Encounter is not null) dest.Encounter = (Hl7.Fhir.Model.ResourceReference)_Encounter.DeepCopyInternal();
      if(_Onset is not null) dest.Onset = (Hl7.Fhir.Model.DataType)_Onset.DeepCopyInternal();
      if(_RecordedDateElement is not null) dest.RecordedDateElement = (Hl7.Fhir.Model.FhirDateTime)_RecordedDateElement.DeepCopyInternal();
      if(_Recorder is not null) dest.Recorder = (Hl7.Fhir.Model.ResourceReference)_Recorder.DeepCopyInternal();
      if(_Asserter is not null) dest.Asserter = (Hl7.Fhir.Model.ResourceReference)_Asserter.DeepCopyInternal();
      if(_LastOccurrenceElement is not null) dest.LastOccurrenceElement = (Hl7.Fhir.Model.FhirDateTime)_LastOccurrenceElement.DeepCopyInternal();
      if(_Note is not null) dest.Note = new List<Hl7.Fhir.Model.Annotation>(_Note.DeepCopyInternal());
      if(_Reaction is not null) dest.Reaction = new List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>(_Reaction.DeepCopyInternal());
    }

    protected internal override Base DeepCopyInternal()
    {
      var instance = new AllergyIntolerance();
      CopyToInternal(instance);
      return instance;
    }

    public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
    {
      if(other is not AllergyIntolerance otherT) return false;

      if(!base.CompareChildren(otherT, comparer)) return false;
      #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
      if(!comparer.ListEquals(_Identifier, otherT._Identifier)) return false;
      if(!comparer.Equals(_ClinicalStatus, otherT._ClinicalStatus)) return false;
      if(!comparer.Equals(_VerificationStatus, otherT._VerificationStatus)) return false;
      if(!comparer.Equals(_TypeElement, otherT._TypeElement)) return false;
      if(!comparer.ListEquals(_CategoryElement, otherT._CategoryElement)) return false;
      if(!comparer.Equals(_CriticalityElement, otherT._CriticalityElement)) return false;
      if(!comparer.Equals(_Code, otherT._Code)) return false;
      if(!comparer.Equals(_Patient, otherT._Patient)) return false;
      if(!comparer.Equals(_Encounter, otherT._Encounter)) return false;
      if(!comparer.Equals(_Onset, otherT._Onset)) return false;
      if(!comparer.Equals(_RecordedDateElement, otherT._RecordedDateElement)) return false;
      if(!comparer.Equals(_Recorder, otherT._Recorder)) return false;
      if(!comparer.Equals(_Asserter, otherT._Asserter)) return false;
      if(!comparer.Equals(_LastOccurrenceElement, otherT._LastOccurrenceElement)) return false;
      if(!comparer.ListEquals(_Note, otherT._Note)) return false;
      if(!comparer.ListEquals(_Reaction, otherT._Reaction)) return false;
      #pragma warning restore CS8604 // Possible null reference argument.

      return true;
    }

    public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
    {
      switch (key)
      {
        case "identifier":
          if (_Identifier.InOverflow<List<Hl7.Fhir.Model.Identifier>>())
          {
            value = Overflow["identifier"];
            return true;
          }
          value = _Identifier;
          return (value as List<Hl7.Fhir.Model.Identifier>)?.Any() is true;
        case "clinicalStatus":
          if (_ClinicalStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          {
            value = Overflow["clinicalStatus"];
            return true;
          }
          value = _ClinicalStatus;
          return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
        case "verificationStatus":
          if (_VerificationStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          {
            value = Overflow["verificationStatus"];
            return true;
          }
          value = _VerificationStatus;
          return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
        case "type":
          if (_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>>())
          {
            value = Overflow["type"];
            return true;
          }
          value = _TypeElement;
          return (value as Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>) is not null;
        case "category":
          if (_CategoryElement.InOverflow<List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>>())
          {
            value = Overflow["category"];
            return true;
          }
          value = _CategoryElement;
          return (value as List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>)?.Any() is true;
        case "criticality":
          if (_CriticalityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>>())
          {
            value = Overflow["criticality"];
            return true;
          }
          value = _CriticalityElement;
          return (value as Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>) is not null;
        case "code":
          if (_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          {
            value = Overflow["code"];
            return true;
          }
          value = _Code;
          return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
        case "patient":
          if (_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          {
            value = Overflow["patient"];
            return true;
          }
          value = _Patient;
          return (value as Hl7.Fhir.Model.ResourceReference) is not null;
        case "encounter":
          if (_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          {
            value = Overflow["encounter"];
            return true;
          }
          value = _Encounter;
          return (value as Hl7.Fhir.Model.ResourceReference) is not null;
        case "onset":
          if (_Onset.InOverflow<DynamicDataType>())
          {
            value = Overflow["onset"];
            return true;
          }
          value = _Onset;
          return (value as Hl7.Fhir.Model.DataType) is not null;
        case "recordedDate":
          if (_RecordedDateElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          {
            value = Overflow["recordedDate"];
            return true;
          }
          value = _RecordedDateElement;
          return (value as Hl7.Fhir.Model.FhirDateTime) is not null;
        case "recorder":
          if (_Recorder.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          {
            value = Overflow["recorder"];
            return true;
          }
          value = _Recorder;
          return (value as Hl7.Fhir.Model.ResourceReference) is not null;
        case "asserter":
          if (_Asserter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          {
            value = Overflow["asserter"];
            return true;
          }
          value = _Asserter;
          return (value as Hl7.Fhir.Model.ResourceReference) is not null;
        case "lastOccurrence":
          if (_LastOccurrenceElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          {
            value = Overflow["lastOccurrence"];
            return true;
          }
          value = _LastOccurrenceElement;
          return (value as Hl7.Fhir.Model.FhirDateTime) is not null;
        case "note":
          if (_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>())
          {
            value = Overflow["note"];
            return true;
          }
          value = _Note;
          return (value as List<Hl7.Fhir.Model.Annotation>)?.Any() is true;
        case "reaction":
          if (_Reaction.InOverflow<List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>>())
          {
            value = Overflow["reaction"];
            return true;
          }
          value = _Reaction;
          return (value as List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>)?.Any() is true;
        default:
          return base.TryGetValue(key, out value);
      }

    }

    public override Base SetValue(string key, object? value)
    {
      if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
      switch (key)
      {
        case "identifier":
          if (value is not (List<Hl7.Fhir.Model.Identifier> or null))
          {
            Identifier = OverflowNull<List<Hl7.Fhir.Model.Identifier>>.INSTANCE;
            Overflow["identifier"] = value;
          }
          else Identifier = (List<Hl7.Fhir.Model.Identifier>?)value!;
          return this;
        case "clinicalStatus":
          if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
          {
            ClinicalStatus = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
            Overflow["clinicalStatus"] = value;
          }
          else ClinicalStatus = (Hl7.Fhir.Model.CodeableConcept?)value;
          return this;
        case "verificationStatus":
          if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
          {
            VerificationStatus = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
            Overflow["verificationStatus"] = value;
          }
          else VerificationStatus = (Hl7.Fhir.Model.CodeableConcept?)value;
          return this;
        case "type":
          if (value is not (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType> or null))
          {
            TypeElement = OverflowNull<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>>.INSTANCE;
            Overflow["type"] = value;
          }
          else TypeElement = (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>?)value;
          return this;
        case "category":
          if (value is not (List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>> or null))
          {
            CategoryElement = OverflowNull<List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>>.INSTANCE;
            Overflow["category"] = value;
          }
          else CategoryElement = (List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>?)value!;
          return this;
        case "criticality":
          if (value is not (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality> or null))
          {
            CriticalityElement = OverflowNull<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>>.INSTANCE;
            Overflow["criticality"] = value;
          }
          else CriticalityElement = (Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>?)value;
          return this;
        case "code":
          if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
          {
            Code = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
            Overflow["code"] = value;
          }
          else Code = (Hl7.Fhir.Model.CodeableConcept?)value;
          return this;
        case "patient":
          if (value is not (Hl7.Fhir.Model.ResourceReference or null))
          {
            Patient = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
            Overflow["patient"] = value;
          }
          else Patient = (Hl7.Fhir.Model.ResourceReference?)value!;
          return this;
        case "encounter":
          if (value is not (Hl7.Fhir.Model.ResourceReference or null))
          {
            Encounter = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
            Overflow["encounter"] = value;
          }
          else Encounter = (Hl7.Fhir.Model.ResourceReference?)value;
          return this;
        case "onset":
          if (value is not (Hl7.Fhir.Model.DataType or null))
          {
            Onset = OverflowNull<DynamicDataType>.INSTANCE;
            Overflow["onset"] = value;
          }
          else Onset = (Hl7.Fhir.Model.DataType?)value;
          return this;
        case "recordedDate":
          if (value is not (Hl7.Fhir.Model.FhirDateTime or null))
          {
            RecordedDateElement = OverflowNull<Hl7.Fhir.Model.FhirDateTime>.INSTANCE;
            Overflow["recordedDate"] = value;
          }
          else RecordedDateElement = (Hl7.Fhir.Model.FhirDateTime?)value;
          return this;
        case "recorder":
          if (value is not (Hl7.Fhir.Model.ResourceReference or null))
          {
            Recorder = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
            Overflow["recorder"] = value;
          }
          else Recorder = (Hl7.Fhir.Model.ResourceReference?)value;
          return this;
        case "asserter":
          if (value is not (Hl7.Fhir.Model.ResourceReference or null))
          {
            Asserter = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
            Overflow["asserter"] = value;
          }
          else Asserter = (Hl7.Fhir.Model.ResourceReference?)value;
          return this;
        case "lastOccurrence":
          if (value is not (Hl7.Fhir.Model.FhirDateTime or null))
          {
            LastOccurrenceElement = OverflowNull<Hl7.Fhir.Model.FhirDateTime>.INSTANCE;
            Overflow["lastOccurrence"] = value;
          }
          else LastOccurrenceElement = (Hl7.Fhir.Model.FhirDateTime?)value;
          return this;
        case "note":
          if (value is not (List<Hl7.Fhir.Model.Annotation> or null))
          {
            Note = OverflowNull<List<Hl7.Fhir.Model.Annotation>>.INSTANCE;
            Overflow["note"] = value;
          }
          else Note = (List<Hl7.Fhir.Model.Annotation>?)value!;
          return this;
        case "reaction":
          if (value is not (List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent> or null))
          {
            Reaction = OverflowNull<List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>>.INSTANCE;
            Overflow["reaction"] = value;
          }
          else Reaction = (List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>?)value!;
          return this;
        default:
          return base.SetValue(key, value);
      }

    }

    public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
    {
      foreach (var kvp in base.EnumerateElements()) yield return kvp;
      if (_Identifier?.Any() is true && !_Identifier.InOverflow<List<Hl7.Fhir.Model.Identifier>>()) yield return new KeyValuePair<string,object>("identifier",_Identifier);
      if (_ClinicalStatus is not null && !_ClinicalStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("clinicalStatus",_ClinicalStatus);
      if (_VerificationStatus is not null && !_VerificationStatus.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("verificationStatus",_VerificationStatus);
      if (_TypeElement is not null && !_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceType>>()) yield return new KeyValuePair<string,object>("type",_TypeElement);
      if (_CategoryElement?.Any() is true && !_CategoryElement.InOverflow<List<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCategory>>>()) yield return new KeyValuePair<string,object>("category",_CategoryElement);
      if (_CriticalityElement is not null && !_CriticalityElement.InOverflow<Code<Hl7.Fhir.Model.AllergyIntolerance.AllergyIntoleranceCriticality>>()) yield return new KeyValuePair<string,object>("criticality",_CriticalityElement);
      if (_Code is not null && !_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("code",_Code);
      if (_Patient is not null && !_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("patient",_Patient);
      if (_Encounter is not null && !_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("encounter",_Encounter);
      if (_Onset is not null && !_Onset.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("onset",_Onset);
      if (_RecordedDateElement is not null && !_RecordedDateElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>()) yield return new KeyValuePair<string,object>("recordedDate",_RecordedDateElement);
      if (_Recorder is not null && !_Recorder.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("recorder",_Recorder);
      if (_Asserter is not null && !_Asserter.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("asserter",_Asserter);
      if (_LastOccurrenceElement is not null && !_LastOccurrenceElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>()) yield return new KeyValuePair<string,object>("lastOccurrence",_LastOccurrenceElement);
      if (_Note?.Any() is true && !_Note.InOverflow<List<Hl7.Fhir.Model.Annotation>>()) yield return new KeyValuePair<string,object>("note",_Note);
      if (_Reaction?.Any() is true && !_Reaction.InOverflow<List<Hl7.Fhir.Model.AllergyIntolerance.ReactionComponent>>()) yield return new KeyValuePair<string,object>("reaction",_Reaction);
    }

  }

}

// end of file
