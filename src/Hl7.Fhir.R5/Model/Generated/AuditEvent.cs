// <auto-generated/>
// Contents of: hl7.fhir.r5.expansions@5.0.0, hl7.fhir.r5.core@5.0.0

using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using Hl7.Fhir.Introspection;
using Hl7.Fhir.Serialization;
using Hl7.Fhir.Specification;
using Hl7.Fhir.Utility;
using Hl7.Fhir.Validation;
using System.Diagnostics.CodeAnalysis;
using SystemPrimitive = Hl7.Fhir.ElementModel.Types;

#nullable enable

/*
  Copyright (c) 2011+, HL7, Inc.
  All rights reserved.
  
  Redistribution and use in source and binary forms, with or without modification, 
  are permitted provided that the following conditions are met:
  
   * Redistributions of source code must retain the above copyright notice, this 
     list of conditions and the following disclaimer.
   * Redistributions in binary form must reproduce the above copyright notice, 
     this list of conditions and the following disclaimer in the documentation 
     and/or other materials provided with the distribution.
   * Neither the name of HL7 nor the names of its contributors may be used to 
     endorse or promote products derived from this software without specific 
     prior written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND 
  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED 
  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT 
  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR 
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
  POSSIBILITY OF SUCH DAMAGE.
  
*/

namespace Hl7.Fhir.Model
{
  /// <summary>
  /// Record of an event
  /// </summary>
  /// <remarks>
  /// A record of an event relevant for purposes such as operations, privacy, security, maintenance, and performance analysis.
  /// Based on IHE-ATNA.
  /// </remarks>
  [Serializable]
  [DataContract]
  [FhirType("AuditEvent","http://hl7.org/fhir/StructureDefinition/AuditEvent")]
  public partial class AuditEvent : Hl7.Fhir.Model.DomainResource
  {
    /// <summary>
    /// FHIR Type Name
    /// </summary>
    public override string TypeName => "AuditEvent";

    /// <summary>
    /// Indicator for type of action performed during the event that generated the event.
    /// (url: http://hl7.org/fhir/ValueSet/audit-event-action)
    /// (system: http://hl7.org/fhir/audit-event-action)
    /// </summary>
    [FhirEnumeration("AuditEventAction", "http://hl7.org/fhir/ValueSet/audit-event-action", "http://hl7.org/fhir/audit-event-action")]
    public enum AuditEventAction
    {
      /// <summary>
      /// Create a new database object, such as placing an order.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("C"), Description("Create")]
      C,
      /// <summary>
      /// Read data, such as to print or display to a doctor.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("R"), Description("Read")]
      R,
      /// <summary>
      /// Update data, such as revise patient information.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("U"), Description("Update")]
      U,
      /// <summary>
      /// Delete items, such as a doctor master file record.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("D"), Description("Delete")]
      D,
      /// <summary>
      /// Perform a system or application function such as log-on, program execution or use of an object's method, or perform a query/search operation.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("E"), Description("Execute")]
      E,
    }

    /// <summary>
    /// The severity of the audit entry.
    /// (url: http://hl7.org/fhir/ValueSet/audit-event-severity)
    /// (system: http://hl7.org/fhir/audit-event-severity)
    /// </summary>
    [FhirEnumeration("AuditEventSeverity", "http://hl7.org/fhir/ValueSet/audit-event-severity", "http://hl7.org/fhir/audit-event-severity")]
    public enum AuditEventSeverity
    {
      /// <summary>
      /// System is unusable. e.g., This level should only be reported by infrastructure and should not be used by applications.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("emergency"), Description("Emergency")]
      Emergency,
      /// <summary>
      /// Notification should be sent to trigger action be taken. e.g., Loss of the primary network connection needing attention.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("alert"), Description("Alert")]
      Alert,
      /// <summary>
      /// Critical conditions. e.g., A failure in the system's primary application that will reset automatically.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("critical"), Description("Critical")]
      Critical,
      /// <summary>
      /// Error conditions. e.g., An application has exceeded its file storage limit and attempts to write are failing.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("error"), Description("Error")]
      Error,
      /// <summary>
      /// Warning conditions. May indicate that an error will occur if action is not taken. e.g., A non-root file system has only 2GB remaining.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("warning"), Description("Warning")]
      Warning,
      /// <summary>
      /// Notice messages. Normal but significant condition. Events that are unusual, but not error conditions.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("notice"), Description("Notice")]
      Notice,
      /// <summary>
      /// Normal operational messages that require no action. e.g., An application has started, paused, or ended successfully.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("informational"), Description("Informational")]
      Informational,
      /// <summary>
      /// Debug-level messages. Information useful to developers for debugging the application.
      /// (system: http://hl7.org/fhir/audit-event-severity)
      /// </summary>
      [EnumLiteral("debug"), Description("Debug")]
      Debug,
    }

    /// <summary>
    /// Whether the event succeeded or failed
    /// </summary>
    /// <remarks>
    /// Indicates whether the event succeeded or failed. A free text descripiton can be given in outcome.text.
    /// In some cases a "success" may be partial, for example, an incomplete or interrupted transfer of a radiological study. For the purpose of establishing accountability, these distinctions are not relevant.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.outcome", IsBackboneType=true)]
    public partial class OutcomeComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.outcome";

      /// <summary>
      /// Whether the event succeeded or failed.
      /// </summary>
      [FhirElement("code", InSummary=true, Order=40, FiveWs="FiveWs.what[x]")]
      [Binding("AuditEventOutcome")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.Coding Code
      {
        get
        {
          if(_Code.InOverflow<Hl7.Fhir.Model.Coding>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Coding), Overflow["code"]);
          return _Code!;
        }

        set
        {
          if (_Code.InOverflow<Hl7.Fhir.Model.Coding>())
            Overflow.Remove("code");
          _Code = value;
          OnPropertyChanged("Code");
        }

      }

      private Hl7.Fhir.Model.Coding? _Code;

      /// <summary>
      /// Additional outcome detail.
      /// </summary>
      [FhirElement("detail", InSummary=true, Order=50, FiveWs="FiveWs.what[x]")]
      [Binding("AuditEventOutcomeDetail")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Detail
      {
        get
        {
          if(_Detail.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["detail"]);
          return _Detail ??= [];
        }

        set
        {
          if (_Detail.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("detail");
          _Detail = value;
          OnPropertyChanged("Detail");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Detail;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not OutcomeComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Code is not null) dest.Code = (Hl7.Fhir.Model.Coding)_Code.DeepCopyInternal();
        if(_Detail is not null) dest.Detail = new List<Hl7.Fhir.Model.CodeableConcept>(_Detail.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new OutcomeComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not OutcomeComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Code, otherT._Code)) return false;
        if(!comparer.ListEquals(_Detail, otherT._Detail)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "code":
            if (_Code.InOverflow<Hl7.Fhir.Model.Coding>())
            {
              value = Overflow["code"];
              return true;
            }
            value = _Code;
            return (value as Hl7.Fhir.Model.Coding) is not null;
          case "detail":
            if (_Detail.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["detail"];
              return true;
            }
            value = _Detail;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "code":
            if (value is not (Hl7.Fhir.Model.Coding or null))
            {
              Code = OverflowNull<Hl7.Fhir.Model.Coding>.INSTANCE;
              Overflow["code"] = value;
            }
            else Code = (Hl7.Fhir.Model.Coding?)value!;
            return this;
          case "detail":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Detail = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["detail"] = value;
            }
            else Detail = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Code is not null && !_Code.InOverflow<Hl7.Fhir.Model.Coding>()) yield return new KeyValuePair<string,object>("code",_Code);
        if (_Detail?.Any() is true && !_Detail.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("detail",_Detail);
      }

    }

    /// <summary>
    /// Actor involved in the event
    /// </summary>
    /// <remarks>
    /// An actor taking an active role in the event or activity that is logged.
    /// Several agents may be associated (i.e. have some responsibility for an activity) with an event or activity.
    /// For example, an activity may be initiated by one user for other users or involve more than one user. However, only one user may be the initiator/requestor for the activity. 
    /// When a network are used in an event being recorded, there should be distinct agent elements for the known actors using the network. The agent with a network detail would be the responsible agent for use of that network.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.agent", IsBackboneType=true)]
    public partial class AgentComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.agent";

      /// <summary>
      /// How agent participated.
      /// </summary>
      [FhirElement("type", Order=40, FiveWs="FiveWs.who")]
      [Binding("AuditAgentType")]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept? Type
      {
        get
        {
          if(_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["type"]);
          return _Type;
        }

        set
        {
          if (_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("type");
          _Type = value;
          OnPropertyChanged("Type");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Type;

      /// <summary>
      /// Agent role in the event.
      /// </summary>
      [FhirElement("role", Order=50, FiveWs="FiveWs.who")]
      [Binding("AuditAgentRole")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Role
      {
        get
        {
          if(_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["role"]);
          return _Role ??= [];
        }

        set
        {
          if (_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("role");
          _Role = value;
          OnPropertyChanged("Role");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Role;

      /// <summary>
      /// Identifier of who.
      /// </summary>
      [FhirElement("who", InSummary=true, Order=60, FiveWs="FiveWs.who")]
      [CLSCompliant(false)]
      [References("Practitioner","PractitionerRole","Organization","CareTeam","Patient","Device","RelatedPerson")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference Who
      {
        get
        {
          if(_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["who"]);
          return _Who!;
        }

        set
        {
          if (_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("who");
          _Who = value;
          OnPropertyChanged("Who");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Who;

      /// <summary>
      /// Whether user is initiator.
      /// </summary>
      [FhirElement("requestor", InSummary=true, Order=70, FiveWs="FiveWs.who")]
      [DataMember]
      public Hl7.Fhir.Model.FhirBoolean? RequestorElement
      {
        get
        {
          if(_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirBoolean), Overflow["requestor"]);
          return _RequestorElement;
        }

        set
        {
          if (_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
            Overflow.Remove("requestor");
          _RequestorElement = value;
          OnPropertyChanged("RequestorElement");
        }

      }

      private Hl7.Fhir.Model.FhirBoolean? _RequestorElement;

      /// <summary>
      /// Whether user is initiator
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public bool? Requestor
      {
        get => RequestorElement?.Value;
        set
        {
          RequestorElement = value is null ? null! : new Hl7.Fhir.Model.FhirBoolean(value);
          OnPropertyChanged("Requestor");
        }
      }

      /// <summary>
      /// The agent location when the event occurred.
      /// </summary>
      [FhirElement("location", Order=80, FiveWs="FiveWs.where[x]")]
      [CLSCompliant(false)]
      [References("Location")]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference? Location
      {
        get
        {
          if(_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["location"]);
          return _Location;
        }

        set
        {
          if (_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("location");
          _Location = value;
          OnPropertyChanged("Location");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Location;

      /// <summary>
      /// Policy that authorized the agent participation in the event.
      /// </summary>
      [FhirElement("policy", Order=90, FiveWs="FiveWs.why[x]")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.FhirUri> PolicyElement
      {
        get
        {
          if(_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.FhirUri>), Overflow["policy"]);
          return _PolicyElement ??= [];
        }

        set
        {
          if (_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>())
            Overflow.Remove("policy");
          _PolicyElement = value;
          OnPropertyChanged("PolicyElement");
        }

      }

      private List<Hl7.Fhir.Model.FhirUri>? _PolicyElement;

      /// <summary>
      /// Policy that authorized the agent participation in the event
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public IEnumerable<string?> Policy
      {
        get => _PolicyElement?.Select(elem => elem.Value) ?? [];
        set
        {
          if (value == null)
            PolicyElement = null!;
          else
            PolicyElement = new List<Hl7.Fhir.Model.FhirUri>(value.Select(elem=>new Hl7.Fhir.Model.FhirUri(elem)));
          OnPropertyChanged("Policy");
        }
      }

      /// <summary>
      /// This agent network location for the activity.
      /// </summary>
      [FhirElement("network", Order=100, Choice=ChoiceType.DatatypeChoice, FiveWs="FiveWs.where[x]")]
      [CLSCompliant(false)]
      [References("Endpoint")]
      [AllowedTypes(typeof(Hl7.Fhir.Model.ResourceReference),typeof(Hl7.Fhir.Model.FhirUri),typeof(Hl7.Fhir.Model.FhirString))]
      [DataMember]
      public Hl7.Fhir.Model.DataType? Network
      {
        get
        {
          if(_Network.InOverflow<DynamicDataType>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["network"]);
          return _Network;
        }

        set
        {
          if (_Network.InOverflow<DynamicDataType>())
            Overflow.Remove("network");
          _Network = value;
          OnPropertyChanged("Network");
        }

      }

      private Hl7.Fhir.Model.DataType? _Network;

      /// <summary>
      /// Allowable authorization for this agent.
      /// </summary>
      [FhirElement("authorization", Order=110, FiveWs="FiveWs.why[x]")]
      [Binding("AuditPurposeOfUse")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Authorization
      {
        get
        {
          if(_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["authorization"]);
          return _Authorization ??= [];
        }

        set
        {
          if (_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("authorization");
          _Authorization = value;
          OnPropertyChanged("Authorization");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Authorization;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not AgentComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Type is not null) dest.Type = (Hl7.Fhir.Model.CodeableConcept)_Type.DeepCopyInternal();
        if(_Role is not null) dest.Role = new List<Hl7.Fhir.Model.CodeableConcept>(_Role.DeepCopyInternal());
        if(_Who is not null) dest.Who = (Hl7.Fhir.Model.ResourceReference)_Who.DeepCopyInternal();
        if(_RequestorElement is not null) dest.RequestorElement = (Hl7.Fhir.Model.FhirBoolean)_RequestorElement.DeepCopyInternal();
        if(_Location is not null) dest.Location = (Hl7.Fhir.Model.ResourceReference)_Location.DeepCopyInternal();
        if(_PolicyElement is not null) dest.PolicyElement = new List<Hl7.Fhir.Model.FhirUri>(_PolicyElement.DeepCopyInternal());
        if(_Network is not null) dest.Network = (Hl7.Fhir.Model.DataType)_Network.DeepCopyInternal();
        if(_Authorization is not null) dest.Authorization = new List<Hl7.Fhir.Model.CodeableConcept>(_Authorization.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new AgentComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not AgentComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Type, otherT._Type)) return false;
        if(!comparer.ListEquals(_Role, otherT._Role)) return false;
        if(!comparer.Equals(_Who, otherT._Who)) return false;
        if(!comparer.Equals(_RequestorElement, otherT._RequestorElement)) return false;
        if(!comparer.Equals(_Location, otherT._Location)) return false;
        if(!comparer.ListEquals(_PolicyElement, otherT._PolicyElement)) return false;
        if(!comparer.Equals(_Network, otherT._Network)) return false;
        if(!comparer.ListEquals(_Authorization, otherT._Authorization)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "type":
            if (_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _Type;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "role":
            if (_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["role"];
              return true;
            }
            value = _Role;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          case "who":
            if (_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["who"];
              return true;
            }
            value = _Who;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "requestor":
            if (_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
            {
              value = Overflow["requestor"];
              return true;
            }
            value = _RequestorElement;
            return (value as Hl7.Fhir.Model.FhirBoolean) is not null;
          case "location":
            if (_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["location"];
              return true;
            }
            value = _Location;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "policy":
            if (_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>())
            {
              value = Overflow["policy"];
              return true;
            }
            value = _PolicyElement;
            return (value as List<Hl7.Fhir.Model.FhirUri>)?.Any() is true;
          case "network":
            if (_Network.InOverflow<DynamicDataType>())
            {
              value = Overflow["network"];
              return true;
            }
            value = _Network;
            return (value as Hl7.Fhir.Model.DataType) is not null;
          case "authorization":
            if (_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["authorization"];
              return true;
            }
            value = _Authorization;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "type":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Type = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["type"] = value;
            }
            else Type = (Hl7.Fhir.Model.CodeableConcept?)value;
            return this;
          case "role":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Role = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["role"] = value;
            }
            else Role = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          case "who":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Who = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["who"] = value;
            }
            else Who = (Hl7.Fhir.Model.ResourceReference?)value!;
            return this;
          case "requestor":
            if (value is not (Hl7.Fhir.Model.FhirBoolean or null))
            {
              RequestorElement = OverflowNull<Hl7.Fhir.Model.FhirBoolean>.INSTANCE;
              Overflow["requestor"] = value;
            }
            else RequestorElement = (Hl7.Fhir.Model.FhirBoolean?)value;
            return this;
          case "location":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Location = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["location"] = value;
            }
            else Location = (Hl7.Fhir.Model.ResourceReference?)value;
            return this;
          case "policy":
            if (value is not (List<Hl7.Fhir.Model.FhirUri> or null))
            {
              PolicyElement = OverflowNull<List<Hl7.Fhir.Model.FhirUri>>.INSTANCE;
              Overflow["policy"] = value;
            }
            else PolicyElement = (List<Hl7.Fhir.Model.FhirUri>?)value!;
            return this;
          case "network":
            if (value is not (Hl7.Fhir.Model.DataType or null))
            {
              Network = OverflowNull<DynamicDataType>.INSTANCE;
              Overflow["network"] = value;
            }
            else Network = (Hl7.Fhir.Model.DataType?)value;
            return this;
          case "authorization":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Authorization = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["authorization"] = value;
            }
            else Authorization = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Type is not null && !_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("type",_Type);
        if (_Role?.Any() is true && !_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("role",_Role);
        if (_Who is not null && !_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("who",_Who);
        if (_RequestorElement is not null && !_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>()) yield return new KeyValuePair<string,object>("requestor",_RequestorElement);
        if (_Location is not null && !_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("location",_Location);
        if (_PolicyElement?.Any() is true && !_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>()) yield return new KeyValuePair<string,object>("policy",_PolicyElement);
        if (_Network is not null && !_Network.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("network",_Network);
        if (_Authorization?.Any() is true && !_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("authorization",_Authorization);
      }

    }

    /// <summary>
    /// Audit Event Reporter
    /// </summary>
    /// <remarks>
    /// The actor that is reporting the event.
    /// Events are reported by the actor that detected them. This may be one of the participating actors, but may also be different. The actor may be a human such as a medical-records clerk disclosing data manually, that clerk would be the source for the record of disclosure.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.source", IsBackboneType=true)]
    public partial class SourceComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.source";

      /// <summary>
      /// Logical source location within the enterprise.
      /// </summary>
      [FhirElement("site", Order=40, FiveWs="FiveWs.witness")]
      [CLSCompliant(false)]
      [References("Location")]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference? Site
      {
        get
        {
          if(_Site.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["site"]);
          return _Site;
        }

        set
        {
          if (_Site.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("site");
          _Site = value;
          OnPropertyChanged("Site");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Site;

      /// <summary>
      /// The identity of source detecting the event.
      /// </summary>
      [FhirElement("observer", InSummary=true, Order=50, FiveWs="FiveWs.witness")]
      [CLSCompliant(false)]
      [References("Practitioner","PractitionerRole","Organization","CareTeam","Patient","Device","RelatedPerson")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference Observer
      {
        get
        {
          if(_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["observer"]);
          return _Observer!;
        }

        set
        {
          if (_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("observer");
          _Observer = value;
          OnPropertyChanged("Observer");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Observer;

      /// <summary>
      /// The type of source where event originated.
      /// </summary>
      [FhirElement("type", Order=60, FiveWs="FiveWs.witness")]
      [Binding("AuditEventSourceType")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Type
      {
        get
        {
          if(_Type.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["type"]);
          return _Type ??= [];
        }

        set
        {
          if (_Type.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("type");
          _Type = value;
          OnPropertyChanged("Type");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Type;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not SourceComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Site is not null) dest.Site = (Hl7.Fhir.Model.ResourceReference)_Site.DeepCopyInternal();
        if(_Observer is not null) dest.Observer = (Hl7.Fhir.Model.ResourceReference)_Observer.DeepCopyInternal();
        if(_Type is not null) dest.Type = new List<Hl7.Fhir.Model.CodeableConcept>(_Type.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new SourceComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not SourceComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Site, otherT._Site)) return false;
        if(!comparer.Equals(_Observer, otherT._Observer)) return false;
        if(!comparer.ListEquals(_Type, otherT._Type)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "site":
            if (_Site.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["site"];
              return true;
            }
            value = _Site;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "observer":
            if (_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["observer"];
              return true;
            }
            value = _Observer;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "type":
            if (_Type.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _Type;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "site":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Site = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["site"] = value;
            }
            else Site = (Hl7.Fhir.Model.ResourceReference?)value;
            return this;
          case "observer":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Observer = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["observer"] = value;
            }
            else Observer = (Hl7.Fhir.Model.ResourceReference?)value!;
            return this;
          case "type":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Type = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["type"] = value;
            }
            else Type = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Site is not null && !_Site.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("site",_Site);
        if (_Observer is not null && !_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("observer",_Observer);
        if (_Type?.Any() is true && !_Type.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("type",_Type);
      }

    }

    /// <summary>
    /// Data or objects used
    /// </summary>
    /// <remarks>
    /// Specific instances of data or objects that have been accessed.
    /// Required unless the values for event identification, agent identification, and audit source identification are sufficient to document the entire auditable event. Because events may have more than one entity, this group can be a repeating set of values.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.entity", IsBackboneType=true)]
    public partial class EntityComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.entity";

      /// <summary>
      /// Specific instance of resource.
      /// </summary>
      [FhirElement("what", InSummary=true, Order=40, FiveWs="FiveWs.what[x]")]
      [CLSCompliant(false)]
      [References("Resource")]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference? What
      {
        get
        {
          if(_What.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["what"]);
          return _What;
        }

        set
        {
          if (_What.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("what");
          _What = value;
          OnPropertyChanged("What");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _What;

      /// <summary>
      /// What role the entity played.
      /// </summary>
      [FhirElement("role", Order=50, FiveWs="FiveWs.context")]
      [Binding("AuditEventEntityRole")]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept? Role
      {
        get
        {
          if(_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["role"]);
          return _Role;
        }

        set
        {
          if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("role");
          _Role = value;
          OnPropertyChanged("Role");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Role;

      /// <summary>
      /// Security labels on the entity.
      /// </summary>
      [FhirElement("securityLabel", Order=60, FiveWs="FiveWs.context")]
      [Binding("SecurityLabels")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> SecurityLabel
      {
        get
        {
          if(_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["securityLabel"]);
          return _SecurityLabel ??= [];
        }

        set
        {
          if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("securityLabel");
          _SecurityLabel = value;
          OnPropertyChanged("SecurityLabel");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _SecurityLabel;

      /// <summary>
      /// Query parameters.
      /// </summary>
      [FhirElement("query", InSummary=true, Order=70, FiveWs="FiveWs.context")]
      [DataMember]
      public Hl7.Fhir.Model.Base64Binary? QueryElement
      {
        get
        {
          if(_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Base64Binary), Overflow["query"]);
          return _QueryElement;
        }

        set
        {
          if (_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>())
            Overflow.Remove("query");
          _QueryElement = value;
          OnPropertyChanged("QueryElement");
        }

      }

      private Hl7.Fhir.Model.Base64Binary? _QueryElement;

      /// <summary>
      /// Query parameters
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public byte[]? Query
      {
        get => QueryElement?.Value;
        set
        {
          QueryElement = value is null ? null! : new Hl7.Fhir.Model.Base64Binary(value);
          OnPropertyChanged("Query");
        }
      }

      /// <summary>
      /// Additional Information about the entity.
      /// </summary>
      [FhirElement("detail", Order=80, FiveWs="FiveWs.context")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.AuditEvent.DetailComponent> Detail
      {
        get
        {
          if(_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AuditEvent.DetailComponent>), Overflow["detail"]);
          return _Detail ??= [];
        }

        set
        {
          if (_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>())
            Overflow.Remove("detail");
          _Detail = value;
          OnPropertyChanged("Detail");
        }

      }

      private List<Hl7.Fhir.Model.AuditEvent.DetailComponent>? _Detail;

      /// <summary>
      /// Entity is attributed to this agent.
      /// </summary>
      [FhirElement("agent", Order=90)]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.AuditEvent.AgentComponent> Agent
      {
        get
        {
          if(_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AuditEvent.AgentComponent>), Overflow["agent"]);
          return _Agent ??= [];
        }

        set
        {
          if (_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
            Overflow.Remove("agent");
          _Agent = value;
          OnPropertyChanged("Agent");
        }

      }

      private List<Hl7.Fhir.Model.AuditEvent.AgentComponent>? _Agent;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not EntityComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_What is not null) dest.What = (Hl7.Fhir.Model.ResourceReference)_What.DeepCopyInternal();
        if(_Role is not null) dest.Role = (Hl7.Fhir.Model.CodeableConcept)_Role.DeepCopyInternal();
        if(_SecurityLabel is not null) dest.SecurityLabel = new List<Hl7.Fhir.Model.CodeableConcept>(_SecurityLabel.DeepCopyInternal());
        if(_QueryElement is not null) dest.QueryElement = (Hl7.Fhir.Model.Base64Binary)_QueryElement.DeepCopyInternal();
        if(_Detail is not null) dest.Detail = new List<Hl7.Fhir.Model.AuditEvent.DetailComponent>(_Detail.DeepCopyInternal());
        if(_Agent is not null) dest.Agent = new List<Hl7.Fhir.Model.AuditEvent.AgentComponent>(_Agent.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new EntityComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not EntityComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_What, otherT._What)) return false;
        if(!comparer.Equals(_Role, otherT._Role)) return false;
        if(!comparer.ListEquals(_SecurityLabel, otherT._SecurityLabel)) return false;
        if(!comparer.Equals(_QueryElement, otherT._QueryElement)) return false;
        if(!comparer.ListEquals(_Detail, otherT._Detail)) return false;
        if(!comparer.ListEquals(_Agent, otherT._Agent)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "what":
            if (_What.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["what"];
              return true;
            }
            value = _What;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "role":
            if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["role"];
              return true;
            }
            value = _Role;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "securityLabel":
            if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["securityLabel"];
              return true;
            }
            value = _SecurityLabel;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          case "query":
            if (_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>())
            {
              value = Overflow["query"];
              return true;
            }
            value = _QueryElement;
            return (value as Hl7.Fhir.Model.Base64Binary) is not null;
          case "detail":
            if (_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>())
            {
              value = Overflow["detail"];
              return true;
            }
            value = _Detail;
            return (value as List<Hl7.Fhir.Model.AuditEvent.DetailComponent>)?.Any() is true;
          case "agent":
            if (_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
            {
              value = Overflow["agent"];
              return true;
            }
            value = _Agent;
            return (value as List<Hl7.Fhir.Model.AuditEvent.AgentComponent>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "what":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              What = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["what"] = value;
            }
            else What = (Hl7.Fhir.Model.ResourceReference?)value;
            return this;
          case "role":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Role = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["role"] = value;
            }
            else Role = (Hl7.Fhir.Model.CodeableConcept?)value;
            return this;
          case "securityLabel":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              SecurityLabel = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["securityLabel"] = value;
            }
            else SecurityLabel = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          case "query":
            if (value is not (Hl7.Fhir.Model.Base64Binary or null))
            {
              QueryElement = OverflowNull<Hl7.Fhir.Model.Base64Binary>.INSTANCE;
              Overflow["query"] = value;
            }
            else QueryElement = (Hl7.Fhir.Model.Base64Binary?)value;
            return this;
          case "detail":
            if (value is not (List<Hl7.Fhir.Model.AuditEvent.DetailComponent> or null))
            {
              Detail = OverflowNull<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>.INSTANCE;
              Overflow["detail"] = value;
            }
            else Detail = (List<Hl7.Fhir.Model.AuditEvent.DetailComponent>?)value!;
            return this;
          case "agent":
            if (value is not (List<Hl7.Fhir.Model.AuditEvent.AgentComponent> or null))
            {
              Agent = OverflowNull<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>.INSTANCE;
              Overflow["agent"] = value;
            }
            else Agent = (List<Hl7.Fhir.Model.AuditEvent.AgentComponent>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_What is not null && !_What.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("what",_What);
        if (_Role is not null && !_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("role",_Role);
        if (_SecurityLabel?.Any() is true && !_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("securityLabel",_SecurityLabel);
        if (_QueryElement is not null && !_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>()) yield return new KeyValuePair<string,object>("query",_QueryElement);
        if (_Detail?.Any() is true && !_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>()) yield return new KeyValuePair<string,object>("detail",_Detail);
        if (_Agent?.Any() is true && !_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>()) yield return new KeyValuePair<string,object>("agent",_Agent);
      }

    }

    /// <summary>
    /// Additional Information about the entity
    /// </summary>
    /// <remarks>
    /// Tagged value pairs for conveying additional information about the entity.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.entity.detail", IsBackboneType=true)]
    public partial class DetailComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.entity.detail";

      /// <summary>
      /// Name of the property.
      /// </summary>
      [FhirElement("type", Order=40, FiveWs="FiveWs.context")]
      [Binding("AuditEventDetailType")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept Type
      {
        get
        {
          if(_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["type"]);
          return _Type!;
        }

        set
        {
          if (_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("type");
          _Type = value;
          OnPropertyChanged("Type");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Type;

      /// <summary>
      /// Property value.
      /// </summary>
      [FhirElement("value", Order=50, Choice=ChoiceType.DatatypeChoice, FiveWs="FiveWs.context")]
      [CLSCompliant(false)]
      [AllowedTypes(typeof(Hl7.Fhir.Model.Quantity),typeof(Hl7.Fhir.Model.CodeableConcept),typeof(Hl7.Fhir.Model.FhirString),typeof(Hl7.Fhir.Model.FhirBoolean),typeof(Hl7.Fhir.Model.Integer),typeof(Hl7.Fhir.Model.Range),typeof(Hl7.Fhir.Model.Ratio),typeof(Hl7.Fhir.Model.Time),typeof(Hl7.Fhir.Model.FhirDateTime),typeof(Hl7.Fhir.Model.Period),typeof(Hl7.Fhir.Model.Base64Binary))]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.DataType Value
      {
        get
        {
          if(_Value.InOverflow<DynamicDataType>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["value"]);
          return _Value!;
        }

        set
        {
          if (_Value.InOverflow<DynamicDataType>())
            Overflow.Remove("value");
          _Value = value;
          OnPropertyChanged("Value");
        }

      }

      private Hl7.Fhir.Model.DataType? _Value;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not DetailComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Type is not null) dest.Type = (Hl7.Fhir.Model.CodeableConcept)_Type.DeepCopyInternal();
        if(_Value is not null) dest.Value = (Hl7.Fhir.Model.DataType)_Value.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new DetailComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not DetailComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Type, otherT._Type)) return false;
        if(!comparer.Equals(_Value, otherT._Value)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "type":
            if (_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _Type;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "value":
            if (_Value.InOverflow<DynamicDataType>())
            {
              value = Overflow["value"];
              return true;
            }
            value = _Value;
            return (value as Hl7.Fhir.Model.DataType) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "type":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Type = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["type"] = value;
            }
            else Type = (Hl7.Fhir.Model.CodeableConcept?)value!;
            return this;
          case "value":
            if (value is not (Hl7.Fhir.Model.DataType or null))
            {
              Value = OverflowNull<DynamicDataType>.INSTANCE;
              Overflow["value"] = value;
            }
            else Value = (Hl7.Fhir.Model.DataType?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Type is not null && !_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("type",_Type);
        if (_Value is not null && !_Value.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("value",_Value);
      }

    }

    /// <summary>
    /// Type/identifier of event.
    /// </summary>
    [FhirElement("category", InSummary=true, Order=90, FiveWs="FiveWs.what[x]")]
    [Binding("AuditEventType")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.CodeableConcept> Category
    {
      get
      {
        if(_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["category"]);
        return _Category ??= [];
      }

      set
      {
        if (_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          Overflow.Remove("category");
        _Category = value;
        OnPropertyChanged("Category");
      }

    }

    private List<Hl7.Fhir.Model.CodeableConcept>? _Category;

    /// <summary>
    /// Specific type of event.
    /// </summary>
    [FhirElement("code", InSummary=true, Order=100, FiveWs="FiveWs.what[x]")]
    [Binding("AuditEventSubType")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.CodeableConcept Code
    {
      get
      {
        if(_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["code"]);
        return _Code!;
      }

      set
      {
        if (_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          Overflow.Remove("code");
        _Code = value;
        OnPropertyChanged("Code");
      }

    }

    private Hl7.Fhir.Model.CodeableConcept? _Code;

    /// <summary>
    /// Type of action performed during the event.
    /// </summary>
    [FhirElement("action", InSummary=true, Order=110, FiveWs="FiveWs.what[x]")]
    [Binding("AuditEventAction")]
    [DataMember]
    public Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>? ActionElement
    {
      get
      {
        if(_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>), Overflow["action"]);
        return _ActionElement;
      }

      set
      {
        if (_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>())
          Overflow.Remove("action");
        _ActionElement = value;
        OnPropertyChanged("ActionElement");
      }

    }

    private Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>? _ActionElement;

    /// <summary>
    /// Type of action performed during the event
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.AuditEvent.AuditEventAction? Action
    {
      get => ActionElement?.Value;
      set
      {
        ActionElement = value is null ? null! : new Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>(value);
        OnPropertyChanged("Action");
      }
    }

    /// <summary>
    /// emergency | alert | critical | error | warning | notice | informational | debug.
    /// </summary>
    [FhirElement("severity", InSummary=true, Order=120)]
    [Binding("AuditEventSeverity")]
    [DataMember]
    public Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>? SeverityElement
    {
      get
      {
        if(_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>), Overflow["severity"]);
        return _SeverityElement;
      }

      set
      {
        if (_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>>())
          Overflow.Remove("severity");
        _SeverityElement = value;
        OnPropertyChanged("SeverityElement");
      }

    }

    private Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>? _SeverityElement;

    /// <summary>
    /// emergency | alert | critical | error | warning | notice | informational | debug
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.AuditEvent.AuditEventSeverity? Severity
    {
      get => SeverityElement?.Value;
      set
      {
        SeverityElement = value is null ? null! : new Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>(value);
        OnPropertyChanged("Severity");
      }
    }

    /// <summary>
    /// When the activity occurred.
    /// </summary>
    [FhirElement("occurred", Order=130, Choice=ChoiceType.DatatypeChoice, FiveWs="FiveWs.done[x]")]
    [CLSCompliant(false)]
    [AllowedTypes(typeof(Hl7.Fhir.Model.Period),typeof(Hl7.Fhir.Model.FhirDateTime))]
    [DataMember]
    public Hl7.Fhir.Model.DataType? Occurred
    {
      get
      {
        if(_Occurred.InOverflow<DynamicDataType>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["occurred"]);
        return _Occurred;
      }

      set
      {
        if (_Occurred.InOverflow<DynamicDataType>())
          Overflow.Remove("occurred");
        _Occurred = value;
        OnPropertyChanged("Occurred");
      }

    }

    private Hl7.Fhir.Model.DataType? _Occurred;

    /// <summary>
    /// Time when the event was recorded.
    /// </summary>
    [FhirElement("recorded", InSummary=true, Order=140, FiveWs="FiveWs.recorded")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.Instant RecordedElement
    {
      get
      {
        if(_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Instant), Overflow["recorded"]);
        return _RecordedElement!;
      }

      set
      {
        if (_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>())
          Overflow.Remove("recorded");
        _RecordedElement = value;
        OnPropertyChanged("RecordedElement");
      }

    }

    private Hl7.Fhir.Model.Instant? _RecordedElement;

    /// <summary>
    /// Time when the event was recorded
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public DateTimeOffset? Recorded
    {
      get => RecordedElement?.Value;
      set
      {
        RecordedElement = value is null ? null! : new Hl7.Fhir.Model.Instant(value);
        OnPropertyChanged("Recorded");
      }
    }

    /// <summary>
    /// Whether the event succeeded or failed.
    /// </summary>
    [FhirElement("outcome", InSummary=true, Order=150, FiveWs="FiveWs.what[x]")]
    [DataMember]
    public Hl7.Fhir.Model.AuditEvent.OutcomeComponent? Outcome
    {
      get
      {
        if(_Outcome.InOverflow<Hl7.Fhir.Model.AuditEvent.OutcomeComponent>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.AuditEvent.OutcomeComponent), Overflow["outcome"]);
        return _Outcome;
      }

      set
      {
        if (_Outcome.InOverflow<Hl7.Fhir.Model.AuditEvent.OutcomeComponent>())
          Overflow.Remove("outcome");
        _Outcome = value;
        OnPropertyChanged("Outcome");
      }

    }

    private Hl7.Fhir.Model.AuditEvent.OutcomeComponent? _Outcome;

    /// <summary>
    /// Authorization related to the event.
    /// </summary>
    [FhirElement("authorization", InSummary=true, Order=160, FiveWs="FiveWs.why[x]")]
    [Binding("AuditPurposeOfUse")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.CodeableConcept> Authorization
    {
      get
      {
        if(_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["authorization"]);
        return _Authorization ??= [];
      }

      set
      {
        if (_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          Overflow.Remove("authorization");
        _Authorization = value;
        OnPropertyChanged("Authorization");
      }

    }

    private List<Hl7.Fhir.Model.CodeableConcept>? _Authorization;

    /// <summary>
    /// Workflow authorization within which this event occurred.
    /// </summary>
    [FhirElement("basedOn", Order=170, FiveWs="FiveWs.why[x]")]
    [CLSCompliant(false)]
    [References("CarePlan","DeviceRequest","ImmunizationRecommendation","MedicationRequest","NutritionOrder","ServiceRequest","Task")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.ResourceReference> BasedOn
    {
      get
      {
        if(_BasedOn.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.ResourceReference>), Overflow["basedOn"]);
        return _BasedOn ??= [];
      }

      set
      {
        if (_BasedOn.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          Overflow.Remove("basedOn");
        _BasedOn = value;
        OnPropertyChanged("BasedOn");
      }

    }

    private List<Hl7.Fhir.Model.ResourceReference>? _BasedOn;

    /// <summary>
    /// The patient is the subject of the data used/created/updated/deleted during the activity.
    /// </summary>
    [FhirElement("patient", Order=180, FiveWs="FiveWs.subject")]
    [CLSCompliant(false)]
    [References("Patient")]
    [DataMember]
    public Hl7.Fhir.Model.ResourceReference? Patient
    {
      get
      {
        if(_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["patient"]);
        return _Patient;
      }

      set
      {
        if (_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          Overflow.Remove("patient");
        _Patient = value;
        OnPropertyChanged("Patient");
      }

    }

    private Hl7.Fhir.Model.ResourceReference? _Patient;

    /// <summary>
    /// Encounter within which this event occurred or which the event is tightly associated.
    /// </summary>
    [FhirElement("encounter", Order=190, FiveWs="FiveWs.why[x]")]
    [CLSCompliant(false)]
    [References("Encounter")]
    [DataMember]
    public Hl7.Fhir.Model.ResourceReference? Encounter
    {
      get
      {
        if(_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["encounter"]);
        return _Encounter;
      }

      set
      {
        if (_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          Overflow.Remove("encounter");
        _Encounter = value;
        OnPropertyChanged("Encounter");
      }

    }

    private Hl7.Fhir.Model.ResourceReference? _Encounter;

    /// <summary>
    /// Actor involved in the event.
    /// </summary>
    [FhirElement("agent", InSummary=true, Order=200, FiveWs="FiveWs.who")]
    [Cardinality(Min=1,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.AuditEvent.AgentComponent> Agent
    {
      get
      {
        if(_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AuditEvent.AgentComponent>), Overflow["agent"]);
        return _Agent ??= [];
      }

      set
      {
        if (_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
          Overflow.Remove("agent");
        _Agent = value;
        OnPropertyChanged("Agent");
      }

    }

    private List<Hl7.Fhir.Model.AuditEvent.AgentComponent>? _Agent;

    /// <summary>
    /// Audit Event Reporter.
    /// </summary>
    [FhirElement("source", InSummary=true, Order=210, FiveWs="FiveWs.witness")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.AuditEvent.SourceComponent Source
    {
      get
      {
        if(_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.AuditEvent.SourceComponent), Overflow["source"]);
        return _Source!;
      }

      set
      {
        if (_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>())
          Overflow.Remove("source");
        _Source = value;
        OnPropertyChanged("Source");
      }

    }

    private Hl7.Fhir.Model.AuditEvent.SourceComponent? _Source;

    /// <summary>
    /// Data or objects used.
    /// </summary>
    [FhirElement("entity", InSummary=true, Order=220, FiveWs="FiveWs.what[x]")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.AuditEvent.EntityComponent> Entity
    {
      get
      {
        if(_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AuditEvent.EntityComponent>), Overflow["entity"]);
        return _Entity ??= [];
      }

      set
      {
        if (_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>())
          Overflow.Remove("entity");
        _Entity = value;
        OnPropertyChanged("Entity");
      }

    }

    private List<Hl7.Fhir.Model.AuditEvent.EntityComponent>? _Entity;

    protected internal override void CopyToInternal(Base other)
    {
      if(other is not AuditEvent dest)
        throw new ArgumentException("Can only copy to an object of the same type", "other");

      base.CopyToInternal(dest);
      if(_Category is not null) dest.Category = new List<Hl7.Fhir.Model.CodeableConcept>(_Category.DeepCopyInternal());
      if(_Code is not null) dest.Code = (Hl7.Fhir.Model.CodeableConcept)_Code.DeepCopyInternal();
      if(_ActionElement is not null) dest.ActionElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>)_ActionElement.DeepCopyInternal();
      if(_SeverityElement is not null) dest.SeverityElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>)_SeverityElement.DeepCopyInternal();
      if(_Occurred is not null) dest.Occurred = (Hl7.Fhir.Model.DataType)_Occurred.DeepCopyInternal();
      if(_RecordedElement is not null) dest.RecordedElement = (Hl7.Fhir.Model.Instant)_RecordedElement.DeepCopyInternal();
      if(_Outcome is not null) dest.Outcome = (Hl7.Fhir.Model.AuditEvent.OutcomeComponent)_Outcome.DeepCopyInternal();
      if(_Authorization is not null) dest.Authorization = new List<Hl7.Fhir.Model.CodeableConcept>(_Authorization.DeepCopyInternal());
      if(_BasedOn is not null) dest.BasedOn = new List<Hl7.Fhir.Model.ResourceReference>(_BasedOn.DeepCopyInternal());
      if(_Patient is not null) dest.Patient = (Hl7.Fhir.Model.ResourceReference)_Patient.DeepCopyInternal();
      if(_Encounter is not null) dest.Encounter = (Hl7.Fhir.Model.ResourceReference)_Encounter.DeepCopyInternal();
      if(_Agent is not null) dest.Agent = new List<Hl7.Fhir.Model.AuditEvent.AgentComponent>(_Agent.DeepCopyInternal());
      if(_Source is not null) dest.Source = (Hl7.Fhir.Model.AuditEvent.SourceComponent)_Source.DeepCopyInternal();
      if(_Entity is not null) dest.Entity = new List<Hl7.Fhir.Model.AuditEvent.EntityComponent>(_Entity.DeepCopyInternal());
    }

    protected internal override Base DeepCopyInternal()
    {
      var instance = new AuditEvent();
      CopyToInternal(instance);
      return instance;
    }

    public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
    {
      if(other is not AuditEvent otherT) return false;

      if(!base.CompareChildren(otherT, comparer)) return false;
      #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
      if(!comparer.ListEquals(_Category, otherT._Category)) return false;
      if(!comparer.Equals(_Code, otherT._Code)) return false;
      if(!comparer.Equals(_ActionElement, otherT._ActionElement)) return false;
      if(!comparer.Equals(_SeverityElement, otherT._SeverityElement)) return false;
      if(!comparer.Equals(_Occurred, otherT._Occurred)) return false;
      if(!comparer.Equals(_RecordedElement, otherT._RecordedElement)) return false;
      if(!comparer.Equals(_Outcome, otherT._Outcome)) return false;
      if(!comparer.ListEquals(_Authorization, otherT._Authorization)) return false;
      if(!comparer.ListEquals(_BasedOn, otherT._BasedOn)) return false;
      if(!comparer.Equals(_Patient, otherT._Patient)) return false;
      if(!comparer.Equals(_Encounter, otherT._Encounter)) return false;
      if(!comparer.ListEquals(_Agent, otherT._Agent)) return false;
      if(!comparer.Equals(_Source, otherT._Source)) return false;
      if(!comparer.ListEquals(_Entity, otherT._Entity)) return false;
      #pragma warning restore CS8604 // Possible null reference argument.

      return true;
    }

    public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
    {
      switch (key)
      {
        case "category":
          if (_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          {
            value = Overflow["category"];
            return true;
          }
          value = _Category;
          return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
        case "code":
          if (_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          {
            value = Overflow["code"];
            return true;
          }
          value = _Code;
          return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
        case "action":
          if (_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>())
          {
            value = Overflow["action"];
            return true;
          }
          value = _ActionElement;
          return (value as Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>) is not null;
        case "severity":
          if (_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>>())
          {
            value = Overflow["severity"];
            return true;
          }
          value = _SeverityElement;
          return (value as Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>) is not null;
        case "occurred":
          if (_Occurred.InOverflow<DynamicDataType>())
          {
            value = Overflow["occurred"];
            return true;
          }
          value = _Occurred;
          return (value as Hl7.Fhir.Model.DataType) is not null;
        case "recorded":
          if (_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>())
          {
            value = Overflow["recorded"];
            return true;
          }
          value = _RecordedElement;
          return (value as Hl7.Fhir.Model.Instant) is not null;
        case "outcome":
          if (_Outcome.InOverflow<Hl7.Fhir.Model.AuditEvent.OutcomeComponent>())
          {
            value = Overflow["outcome"];
            return true;
          }
          value = _Outcome;
          return (value as Hl7.Fhir.Model.AuditEvent.OutcomeComponent) is not null;
        case "authorization":
          if (_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          {
            value = Overflow["authorization"];
            return true;
          }
          value = _Authorization;
          return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
        case "basedOn":
          if (_BasedOn.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          {
            value = Overflow["basedOn"];
            return true;
          }
          value = _BasedOn;
          return (value as List<Hl7.Fhir.Model.ResourceReference>)?.Any() is true;
        case "patient":
          if (_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          {
            value = Overflow["patient"];
            return true;
          }
          value = _Patient;
          return (value as Hl7.Fhir.Model.ResourceReference) is not null;
        case "encounter":
          if (_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          {
            value = Overflow["encounter"];
            return true;
          }
          value = _Encounter;
          return (value as Hl7.Fhir.Model.ResourceReference) is not null;
        case "agent":
          if (_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
          {
            value = Overflow["agent"];
            return true;
          }
          value = _Agent;
          return (value as List<Hl7.Fhir.Model.AuditEvent.AgentComponent>)?.Any() is true;
        case "source":
          if (_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>())
          {
            value = Overflow["source"];
            return true;
          }
          value = _Source;
          return (value as Hl7.Fhir.Model.AuditEvent.SourceComponent) is not null;
        case "entity":
          if (_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>())
          {
            value = Overflow["entity"];
            return true;
          }
          value = _Entity;
          return (value as List<Hl7.Fhir.Model.AuditEvent.EntityComponent>)?.Any() is true;
        default:
          return base.TryGetValue(key, out value);
      }

    }

    public override Base SetValue(string key, object? value)
    {
      if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
      switch (key)
      {
        case "category":
          if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
          {
            Category = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
            Overflow["category"] = value;
          }
          else Category = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
          return this;
        case "code":
          if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
          {
            Code = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
            Overflow["code"] = value;
          }
          else Code = (Hl7.Fhir.Model.CodeableConcept?)value!;
          return this;
        case "action":
          if (value is not (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction> or null))
          {
            ActionElement = OverflowNull<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>.INSTANCE;
            Overflow["action"] = value;
          }
          else ActionElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>?)value;
          return this;
        case "severity":
          if (value is not (Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity> or null))
          {
            SeverityElement = OverflowNull<Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>>.INSTANCE;
            Overflow["severity"] = value;
          }
          else SeverityElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>?)value;
          return this;
        case "occurred":
          if (value is not (Hl7.Fhir.Model.DataType or null))
          {
            Occurred = OverflowNull<DynamicDataType>.INSTANCE;
            Overflow["occurred"] = value;
          }
          else Occurred = (Hl7.Fhir.Model.DataType?)value;
          return this;
        case "recorded":
          if (value is not (Hl7.Fhir.Model.Instant or null))
          {
            RecordedElement = OverflowNull<Hl7.Fhir.Model.Instant>.INSTANCE;
            Overflow["recorded"] = value;
          }
          else RecordedElement = (Hl7.Fhir.Model.Instant?)value!;
          return this;
        case "outcome":
          if (value is not (Hl7.Fhir.Model.AuditEvent.OutcomeComponent or null))
          {
            Outcome = OverflowNull<Hl7.Fhir.Model.AuditEvent.OutcomeComponent>.INSTANCE;
            Overflow["outcome"] = value;
          }
          else Outcome = (Hl7.Fhir.Model.AuditEvent.OutcomeComponent?)value;
          return this;
        case "authorization":
          if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
          {
            Authorization = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
            Overflow["authorization"] = value;
          }
          else Authorization = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
          return this;
        case "basedOn":
          if (value is not (List<Hl7.Fhir.Model.ResourceReference> or null))
          {
            BasedOn = OverflowNull<List<Hl7.Fhir.Model.ResourceReference>>.INSTANCE;
            Overflow["basedOn"] = value;
          }
          else BasedOn = (List<Hl7.Fhir.Model.ResourceReference>?)value!;
          return this;
        case "patient":
          if (value is not (Hl7.Fhir.Model.ResourceReference or null))
          {
            Patient = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
            Overflow["patient"] = value;
          }
          else Patient = (Hl7.Fhir.Model.ResourceReference?)value;
          return this;
        case "encounter":
          if (value is not (Hl7.Fhir.Model.ResourceReference or null))
          {
            Encounter = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
            Overflow["encounter"] = value;
          }
          else Encounter = (Hl7.Fhir.Model.ResourceReference?)value;
          return this;
        case "agent":
          if (value is not (List<Hl7.Fhir.Model.AuditEvent.AgentComponent> or null))
          {
            Agent = OverflowNull<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>.INSTANCE;
            Overflow["agent"] = value;
          }
          else Agent = (List<Hl7.Fhir.Model.AuditEvent.AgentComponent>?)value!;
          return this;
        case "source":
          if (value is not (Hl7.Fhir.Model.AuditEvent.SourceComponent or null))
          {
            Source = OverflowNull<Hl7.Fhir.Model.AuditEvent.SourceComponent>.INSTANCE;
            Overflow["source"] = value;
          }
          else Source = (Hl7.Fhir.Model.AuditEvent.SourceComponent?)value!;
          return this;
        case "entity":
          if (value is not (List<Hl7.Fhir.Model.AuditEvent.EntityComponent> or null))
          {
            Entity = OverflowNull<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>.INSTANCE;
            Overflow["entity"] = value;
          }
          else Entity = (List<Hl7.Fhir.Model.AuditEvent.EntityComponent>?)value!;
          return this;
        default:
          return base.SetValue(key, value);
      }

    }

    public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
    {
      foreach (var kvp in base.EnumerateElements()) yield return kvp;
      if (_Category?.Any() is true && !_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("category",_Category);
      if (_Code is not null && !_Code.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("code",_Code);
      if (_ActionElement is not null && !_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>()) yield return new KeyValuePair<string,object>("action",_ActionElement);
      if (_SeverityElement is not null && !_SeverityElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventSeverity>>()) yield return new KeyValuePair<string,object>("severity",_SeverityElement);
      if (_Occurred is not null && !_Occurred.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("occurred",_Occurred);
      if (_RecordedElement is not null && !_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>()) yield return new KeyValuePair<string,object>("recorded",_RecordedElement);
      if (_Outcome is not null && !_Outcome.InOverflow<Hl7.Fhir.Model.AuditEvent.OutcomeComponent>()) yield return new KeyValuePair<string,object>("outcome",_Outcome);
      if (_Authorization?.Any() is true && !_Authorization.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("authorization",_Authorization);
      if (_BasedOn?.Any() is true && !_BasedOn.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>()) yield return new KeyValuePair<string,object>("basedOn",_BasedOn);
      if (_Patient is not null && !_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("patient",_Patient);
      if (_Encounter is not null && !_Encounter.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("encounter",_Encounter);
      if (_Agent?.Any() is true && !_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>()) yield return new KeyValuePair<string,object>("agent",_Agent);
      if (_Source is not null && !_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>()) yield return new KeyValuePair<string,object>("source",_Source);
      if (_Entity?.Any() is true && !_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>()) yield return new KeyValuePair<string,object>("entity",_Entity);
    }

  }

}

// end of file
