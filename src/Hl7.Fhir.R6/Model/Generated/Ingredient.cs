// <auto-generated/>
// Contents of: hl7.fhir.r6.expansions@6.0.0-ballot3, hl7.fhir.r6.core@6.0.0-ballot3

using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using Hl7.Fhir.Introspection;
using Hl7.Fhir.Serialization;
using Hl7.Fhir.Specification;
using Hl7.Fhir.Utility;
using Hl7.Fhir.Validation;
using System.Diagnostics.CodeAnalysis;
using SystemPrimitive = Hl7.Fhir.ElementModel.Types;

#nullable enable

/*
  Copyright (c) 2011+, HL7, Inc.
  All rights reserved.
  
  Redistribution and use in source and binary forms, with or without modification, 
  are permitted provided that the following conditions are met:
  
   * Redistributions of source code must retain the above copyright notice, this 
     list of conditions and the following disclaimer.
   * Redistributions in binary form must reproduce the above copyright notice, 
     this list of conditions and the following disclaimer in the documentation 
     and/or other materials provided with the distribution.
   * Neither the name of HL7 nor the names of its contributors may be used to 
     endorse or promote products derived from this software without specific 
     prior written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND 
  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED 
  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT 
  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR 
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
  POSSIBILITY OF SUCH DAMAGE.
  
*/

namespace Hl7.Fhir.Model
{
  /// <summary>
  /// An ingredient of a manufactured item or pharmaceutical product
  /// </summary>
  [Serializable]
  [DataContract]
  [FhirType("Ingredient","http://hl7.org/fhir/StructureDefinition/Ingredient")]
  public partial class Ingredient : Hl7.Fhir.Model.DomainResource, IIdentifiable<Identifier?>
  {
    /// <summary>
    /// FHIR Type Name
    /// </summary>
    public override string TypeName => "Ingredient";

    /// <summary>
    /// The way in which this manufacturer is associated with the ingredient. For example whether it is a possible one (others allowed), or an exclusive authorized one for this ingredient. Note that this is not the manufacturing process role.
    /// (url: http://hl7.org/fhir/ValueSet/ingredient-manufacturer-role)
    /// (system: http://hl7.org/fhir/ingredient-manufacturer-role)
    /// </summary>
    [FhirEnumeration("IngredientManufacturerRole", "http://hl7.org/fhir/ValueSet/ingredient-manufacturer-role", "http://hl7.org/fhir/ingredient-manufacturer-role")]
    public enum IngredientManufacturerRole
    {
      /// <summary>
      /// Manufacturer is specifically allowed for this ingredient
      /// (system: http://hl7.org/fhir/ingredient-manufacturer-role)
      /// </summary>
      [EnumLiteral("allowed"), Description("Manufacturer is specifically allowed for this ingredient")]
      Allowed,
      /// <summary>
      /// Manufacturer is known to make this ingredient in general
      /// (system: http://hl7.org/fhir/ingredient-manufacturer-role)
      /// </summary>
      [EnumLiteral("possible"), Description("Manufacturer is known to make this ingredient in general")]
      Possible,
      /// <summary>
      /// Manufacturer actually makes this particular ingredient
      /// (system: http://hl7.org/fhir/ingredient-manufacturer-role)
      /// </summary>
      [EnumLiteral("actual"), Description("Manufacturer actually makes this particular ingredient")]
      Actual,
    }

    /// <summary>
    /// An organization that manufactures this ingredient
    /// </summary>
    /// <remarks>
    /// The organization(s) that manufacture this ingredient. Can be used to indicate:         1) Organizations we are aware of that manufacture this ingredient         2) Specific Manufacturer(s) currently being used         3) Set of organisations allowed to manufacture this ingredient for this product         Users must be clear on the application of context relevant to their use case.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Ingredient.manufacturer", IsBackboneType=true)]
    public partial class ManufacturerComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Ingredient.manufacturer";

      /// <summary>
      /// allowed | possible | actual.
      /// </summary>
      [FhirElement("role", InSummary=true, Order=40)]
      [Binding("IngredientManufacturerRole")]
      [DataMember]
      public Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>? RoleElement
      {
        get
        {
          if(_RoleElement.InOverflow<Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>>())
            throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>), Overflow["role"]);
          return _RoleElement;
        }

        set
        {
          if (_RoleElement.InOverflow<Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>>())
            Overflow.Remove("role");
          _RoleElement = value;
          OnPropertyChanged("RoleElement");
        }

      }

      private Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>? _RoleElement;

      /// <summary>
      /// allowed | possible | actual
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole? Role
      {
        get => RoleElement?.Value;
        set
        {
          RoleElement = value is null ? null : new Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>(value);
          OnPropertyChanged("Role");
        }
      }

      /// <summary>
      /// An organization that manufactures this ingredient.
      /// </summary>
      [FhirElement("manufacturer", InSummary=true, Order=50)]
      [CLSCompliant(false)]
      [References("Organization")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference? Manufacturer
      {
        get
        {
          if(_Manufacturer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["manufacturer"]);
          return _Manufacturer;
        }

        set
        {
          if (_Manufacturer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("manufacturer");
          _Manufacturer = value;
          OnPropertyChanged("Manufacturer");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Manufacturer;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not ManufacturerComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_RoleElement is not null) dest.RoleElement = (Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>)_RoleElement.DeepCopyInternal();
        if(_Manufacturer is not null) dest.Manufacturer = (Hl7.Fhir.Model.ResourceReference)_Manufacturer.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new ManufacturerComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not ManufacturerComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_RoleElement, otherT._RoleElement)) return false;
        if(!comparer.Equals(_Manufacturer, otherT._Manufacturer)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "role":
            if (_RoleElement.InOverflow<Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>>())
            {
              value = Overflow["role"];
              return true;
            }
            value = _RoleElement;
            return (value as Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>) is not null;
          case "manufacturer":
            if (_Manufacturer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["manufacturer"];
              return true;
            }
            value = _Manufacturer;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "role":
            if (value is not (Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole> or null))
            {
              RoleElement = OverflowNull<Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>>.INSTANCE;
              Overflow["role"] = value;
            }
            else RoleElement = (Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>?)value;
            return this;
          case "manufacturer":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Manufacturer = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["manufacturer"] = value;
            }
            else Manufacturer = (Hl7.Fhir.Model.ResourceReference?)value;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_RoleElement is not null && !_RoleElement.InOverflow<Code<Hl7.Fhir.Model.Ingredient.IngredientManufacturerRole>>()) yield return new KeyValuePair<string,object>("role",_RoleElement);
        if (_Manufacturer is not null && !_Manufacturer.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("manufacturer",_Manufacturer);
      }

    }

    /// <summary>
    /// The substance that comprises this ingredient
    /// </summary>
    [Serializable]
    [DataContract]
    [FhirType("Ingredient.substance", IsBackboneType=true)]
    public partial class SubstanceComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Ingredient.substance";

      /// <summary>
      /// A code or full resource that represents the ingredient substance.
      /// </summary>
      [FhirElement("code", InSummary=true, Order=40)]
      [Binding("SNOMEDCTSubstanceCodes")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.CodeableReference? Code
      {
        get
        {
          if(_Code.InOverflow<Hl7.Fhir.Model.CodeableReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableReference), Overflow["code"]);
          return _Code;
        }

        set
        {
          if (_Code.InOverflow<Hl7.Fhir.Model.CodeableReference>())
            Overflow.Remove("code");
          _Code = value;
          OnPropertyChanged("Code");
        }

      }

      private Hl7.Fhir.Model.CodeableReference? _Code;

      /// <summary>
      /// The quantity of substance, per presentation, or per volume or mass, and type of quantity.
      /// </summary>
      [FhirElement("strength", InSummary=true, Order=50)]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Ingredient.StrengthComponent> Strength
      {
        get
        {
          if(_Strength.InOverflow<List<Hl7.Fhir.Model.Ingredient.StrengthComponent>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Ingredient.StrengthComponent>), Overflow["strength"]);
          return _Strength ??= [];
        }

        set
        {
          if (_Strength.InOverflow<List<Hl7.Fhir.Model.Ingredient.StrengthComponent>>())
            Overflow.Remove("strength");
          _Strength = value;
          OnPropertyChanged("Strength");
        }

      }

      private List<Hl7.Fhir.Model.Ingredient.StrengthComponent>? _Strength;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not SubstanceComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Code is not null) dest.Code = (Hl7.Fhir.Model.CodeableReference)_Code.DeepCopyInternal();
        if(_Strength is not null) dest.Strength = new List<Hl7.Fhir.Model.Ingredient.StrengthComponent>(_Strength.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new SubstanceComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not SubstanceComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Code, otherT._Code)) return false;
        if(!comparer.ListEquals(_Strength, otherT._Strength)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "code":
            if (_Code.InOverflow<Hl7.Fhir.Model.CodeableReference>())
            {
              value = Overflow["code"];
              return true;
            }
            value = _Code;
            return (value as Hl7.Fhir.Model.CodeableReference) is not null;
          case "strength":
            if (_Strength.InOverflow<List<Hl7.Fhir.Model.Ingredient.StrengthComponent>>())
            {
              value = Overflow["strength"];
              return true;
            }
            value = _Strength;
            return (value as List<Hl7.Fhir.Model.Ingredient.StrengthComponent>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "code":
            if (value is not (Hl7.Fhir.Model.CodeableReference or null))
            {
              Code = OverflowNull<Hl7.Fhir.Model.CodeableReference>.INSTANCE;
              Overflow["code"] = value;
            }
            else Code = (Hl7.Fhir.Model.CodeableReference?)value;
            return this;
          case "strength":
            if (value is not (List<Hl7.Fhir.Model.Ingredient.StrengthComponent> or null))
            {
              Strength = OverflowNull<List<Hl7.Fhir.Model.Ingredient.StrengthComponent>>.INSTANCE;
              Overflow["strength"] = value;
            }
            else Strength = (List<Hl7.Fhir.Model.Ingredient.StrengthComponent>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Code is not null && !_Code.InOverflow<Hl7.Fhir.Model.CodeableReference>()) yield return new KeyValuePair<string,object>("code",_Code);
        if (_Strength?.Any() is true && !_Strength.InOverflow<List<Hl7.Fhir.Model.Ingredient.StrengthComponent>>()) yield return new KeyValuePair<string,object>("strength",_Strength);
      }

    }

    /// <summary>
    /// The quantity of substance, per presentation, or per volume or mass, and type of quantity
    /// </summary>
    /// <remarks>
    /// The quantity of substance in the unit of presentation, or in the volume (or mass) of the single pharmaceutical product or manufactured item. The allowed repetitions do not represent different strengths, but are different representations - mathematically equivalent - of a single strength.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Ingredient.substance.strength", IsBackboneType=true)]
    public partial class StrengthComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Ingredient.substance.strength";

      /// <summary>
      /// The quantity of substance in the unit of presentation.
      /// </summary>
      [FhirElement("presentation", InSummary=true, Order=40, Choice=ChoiceType.DatatypeChoice)]
      [CLSCompliant(false)]
      [AllowedTypes(typeof(Hl7.Fhir.Model.Ratio),typeof(Hl7.Fhir.Model.RatioRange),typeof(Hl7.Fhir.Model.CodeableConcept),typeof(Hl7.Fhir.Model.Quantity))]
      [DataMember]
      public Hl7.Fhir.Model.DataType? Presentation
      {
        get
        {
          if(_Presentation.InOverflow<DynamicDataType>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["presentation"]);
          return _Presentation;
        }

        set
        {
          if (_Presentation.InOverflow<DynamicDataType>())
            Overflow.Remove("presentation");
          _Presentation = value;
          OnPropertyChanged("Presentation");
        }

      }

      private Hl7.Fhir.Model.DataType? _Presentation;

      /// <summary>
      /// Text of either the whole presentation strength or a part of it (rest being in Strength.presentation as a ratio).
      /// </summary>
      [FhirElement("textPresentation", InSummary=true, Order=50)]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? TextPresentationElement
      {
        get
        {
          if(_TextPresentationElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["textPresentation"]);
          return _TextPresentationElement;
        }

        set
        {
          if (_TextPresentationElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("textPresentation");
          _TextPresentationElement = value;
          OnPropertyChanged("TextPresentationElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _TextPresentationElement;

      /// <summary>
      /// Text of either the whole presentation strength or a part of it (rest being in Strength.presentation as a ratio)
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? TextPresentation
      {
        get => TextPresentationElement?.Value;
        set
        {
          TextPresentationElement = value is null ? null : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("TextPresentation");
        }
      }

      /// <summary>
      /// The strength per unitary volume (or mass).
      /// </summary>
      [FhirElement("concentration", InSummary=true, Order=60, Choice=ChoiceType.DatatypeChoice)]
      [CLSCompliant(false)]
      [AllowedTypes(typeof(Hl7.Fhir.Model.Ratio),typeof(Hl7.Fhir.Model.RatioRange),typeof(Hl7.Fhir.Model.CodeableConcept),typeof(Hl7.Fhir.Model.Quantity))]
      [DataMember]
      public Hl7.Fhir.Model.DataType? Concentration
      {
        get
        {
          if(_Concentration.InOverflow<DynamicDataType>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["concentration"]);
          return _Concentration;
        }

        set
        {
          if (_Concentration.InOverflow<DynamicDataType>())
            Overflow.Remove("concentration");
          _Concentration = value;
          OnPropertyChanged("Concentration");
        }

      }

      private Hl7.Fhir.Model.DataType? _Concentration;

      /// <summary>
      /// Text of either the whole concentration strength or a part of it (rest being in Strength.concentration as a ratio).
      /// </summary>
      [FhirElement("textConcentration", InSummary=true, Order=70)]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? TextConcentrationElement
      {
        get
        {
          if(_TextConcentrationElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["textConcentration"]);
          return _TextConcentrationElement;
        }

        set
        {
          if (_TextConcentrationElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("textConcentration");
          _TextConcentrationElement = value;
          OnPropertyChanged("TextConcentrationElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _TextConcentrationElement;

      /// <summary>
      /// Text of either the whole concentration strength or a part of it (rest being in Strength.concentration as a ratio)
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? TextConcentration
      {
        get => TextConcentrationElement?.Value;
        set
        {
          TextConcentrationElement = value is null ? null : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("TextConcentration");
        }
      }

      /// <summary>
      /// A code that indicates if the strength is, for example, based on the ingredient substance as stated or on the substance base (when the ingredient is a salt).
      /// </summary>
      [FhirElement("basis", InSummary=true, Order=80)]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept? Basis
      {
        get
        {
          if(_Basis.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["basis"]);
          return _Basis;
        }

        set
        {
          if (_Basis.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("basis");
          _Basis = value;
          OnPropertyChanged("Basis");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Basis;

      /// <summary>
      /// When strength is measured at a particular point or distance.
      /// </summary>
      [FhirElement("measurementPoint", InSummary=true, Order=90)]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? MeasurementPointElement
      {
        get
        {
          if(_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["measurementPoint"]);
          return _MeasurementPointElement;
        }

        set
        {
          if (_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("measurementPoint");
          _MeasurementPointElement = value;
          OnPropertyChanged("MeasurementPointElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _MeasurementPointElement;

      /// <summary>
      /// When strength is measured at a particular point or distance
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? MeasurementPoint
      {
        get => MeasurementPointElement?.Value;
        set
        {
          MeasurementPointElement = value is null ? null : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("MeasurementPoint");
        }
      }

      /// <summary>
      /// Where the strength range applies.
      /// </summary>
      [FhirElement("country", InSummary=true, Order=100)]
      [Binding("Country")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Country
      {
        get
        {
          if(_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["country"]);
          return _Country ??= [];
        }

        set
        {
          if (_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("country");
          _Country = value;
          OnPropertyChanged("Country");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Country;

      /// <summary>
      /// Strength expressed in terms of a reference substance.
      /// </summary>
      [FhirElement("referenceStrength", InSummary=true, Order=110)]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent> ReferenceStrength
      {
        get
        {
          if(_ReferenceStrength.InOverflow<List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>), Overflow["referenceStrength"]);
          return _ReferenceStrength ??= [];
        }

        set
        {
          if (_ReferenceStrength.InOverflow<List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>>())
            Overflow.Remove("referenceStrength");
          _ReferenceStrength = value;
          OnPropertyChanged("ReferenceStrength");
        }

      }

      private List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>? _ReferenceStrength;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not StrengthComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Presentation is not null) dest.Presentation = (Hl7.Fhir.Model.DataType)_Presentation.DeepCopyInternal();
        if(_TextPresentationElement is not null) dest.TextPresentationElement = (Hl7.Fhir.Model.FhirString)_TextPresentationElement.DeepCopyInternal();
        if(_Concentration is not null) dest.Concentration = (Hl7.Fhir.Model.DataType)_Concentration.DeepCopyInternal();
        if(_TextConcentrationElement is not null) dest.TextConcentrationElement = (Hl7.Fhir.Model.FhirString)_TextConcentrationElement.DeepCopyInternal();
        if(_Basis is not null) dest.Basis = (Hl7.Fhir.Model.CodeableConcept)_Basis.DeepCopyInternal();
        if(_MeasurementPointElement is not null) dest.MeasurementPointElement = (Hl7.Fhir.Model.FhirString)_MeasurementPointElement.DeepCopyInternal();
        if(_Country is not null) dest.Country = new List<Hl7.Fhir.Model.CodeableConcept>(_Country.DeepCopyInternal());
        if(_ReferenceStrength is not null) dest.ReferenceStrength = new List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>(_ReferenceStrength.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new StrengthComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not StrengthComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Presentation, otherT._Presentation)) return false;
        if(!comparer.Equals(_TextPresentationElement, otherT._TextPresentationElement)) return false;
        if(!comparer.Equals(_Concentration, otherT._Concentration)) return false;
        if(!comparer.Equals(_TextConcentrationElement, otherT._TextConcentrationElement)) return false;
        if(!comparer.Equals(_Basis, otherT._Basis)) return false;
        if(!comparer.Equals(_MeasurementPointElement, otherT._MeasurementPointElement)) return false;
        if(!comparer.ListEquals(_Country, otherT._Country)) return false;
        if(!comparer.ListEquals(_ReferenceStrength, otherT._ReferenceStrength)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "presentation":
            if (_Presentation.InOverflow<DynamicDataType>())
            {
              value = Overflow["presentation"];
              return true;
            }
            value = _Presentation;
            return (value as Hl7.Fhir.Model.DataType) is not null;
          case "textPresentation":
            if (_TextPresentationElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["textPresentation"];
              return true;
            }
            value = _TextPresentationElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "concentration":
            if (_Concentration.InOverflow<DynamicDataType>())
            {
              value = Overflow["concentration"];
              return true;
            }
            value = _Concentration;
            return (value as Hl7.Fhir.Model.DataType) is not null;
          case "textConcentration":
            if (_TextConcentrationElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["textConcentration"];
              return true;
            }
            value = _TextConcentrationElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "basis":
            if (_Basis.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["basis"];
              return true;
            }
            value = _Basis;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "measurementPoint":
            if (_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["measurementPoint"];
              return true;
            }
            value = _MeasurementPointElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "country":
            if (_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["country"];
              return true;
            }
            value = _Country;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          case "referenceStrength":
            if (_ReferenceStrength.InOverflow<List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>>())
            {
              value = Overflow["referenceStrength"];
              return true;
            }
            value = _ReferenceStrength;
            return (value as List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "presentation":
            if (value is not (Hl7.Fhir.Model.DataType or null))
            {
              Presentation = OverflowNull<DynamicDataType>.INSTANCE;
              Overflow["presentation"] = value;
            }
            else Presentation = (Hl7.Fhir.Model.DataType?)value;
            return this;
          case "textPresentation":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              TextPresentationElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["textPresentation"] = value;
            }
            else TextPresentationElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "concentration":
            if (value is not (Hl7.Fhir.Model.DataType or null))
            {
              Concentration = OverflowNull<DynamicDataType>.INSTANCE;
              Overflow["concentration"] = value;
            }
            else Concentration = (Hl7.Fhir.Model.DataType?)value;
            return this;
          case "textConcentration":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              TextConcentrationElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["textConcentration"] = value;
            }
            else TextConcentrationElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "basis":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Basis = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["basis"] = value;
            }
            else Basis = (Hl7.Fhir.Model.CodeableConcept?)value;
            return this;
          case "measurementPoint":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              MeasurementPointElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["measurementPoint"] = value;
            }
            else MeasurementPointElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "country":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Country = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["country"] = value;
            }
            else Country = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          case "referenceStrength":
            if (value is not (List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent> or null))
            {
              ReferenceStrength = OverflowNull<List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>>.INSTANCE;
              Overflow["referenceStrength"] = value;
            }
            else ReferenceStrength = (List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Presentation is not null && !_Presentation.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("presentation",_Presentation);
        if (_TextPresentationElement is not null && !_TextPresentationElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("textPresentation",_TextPresentationElement);
        if (_Concentration is not null && !_Concentration.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("concentration",_Concentration);
        if (_TextConcentrationElement is not null && !_TextConcentrationElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("textConcentration",_TextConcentrationElement);
        if (_Basis is not null && !_Basis.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("basis",_Basis);
        if (_MeasurementPointElement is not null && !_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("measurementPoint",_MeasurementPointElement);
        if (_Country?.Any() is true && !_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("country",_Country);
        if (_ReferenceStrength?.Any() is true && !_ReferenceStrength.InOverflow<List<Hl7.Fhir.Model.Ingredient.ReferenceStrengthComponent>>()) yield return new KeyValuePair<string,object>("referenceStrength",_ReferenceStrength);
      }

    }

    /// <summary>
    /// Strength expressed in terms of a reference substance
    /// </summary>
    /// <remarks>
    /// Strength expressed in terms of a reference substance. For when the ingredient strength is additionally expressed as equivalent to the strength of some other closely related substance (e.g. salt vs. base). Reference strength represents the strength (quantitative composition) of the active moiety of the active substance. There are situations when the active substance and active moiety are different, therefore both a strength and a reference strength are needed.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Ingredient.substance.strength.referenceStrength", IsBackboneType=true)]
    public partial class ReferenceStrengthComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Ingredient.substance.strength.referenceStrength";

      /// <summary>
      /// Relevant reference substance.
      /// </summary>
      [FhirElement("substance", InSummary=true, Order=40)]
      [Binding("SNOMEDCTSubstanceCodes")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.CodeableReference? Substance
      {
        get
        {
          if(_Substance.InOverflow<Hl7.Fhir.Model.CodeableReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableReference), Overflow["substance"]);
          return _Substance;
        }

        set
        {
          if (_Substance.InOverflow<Hl7.Fhir.Model.CodeableReference>())
            Overflow.Remove("substance");
          _Substance = value;
          OnPropertyChanged("Substance");
        }

      }

      private Hl7.Fhir.Model.CodeableReference? _Substance;

      /// <summary>
      /// Strength expressed in terms of a reference substance.
      /// </summary>
      [FhirElement("strength", InSummary=true, Order=50, Choice=ChoiceType.DatatypeChoice)]
      [CLSCompliant(false)]
      [AllowedTypes(typeof(Hl7.Fhir.Model.Ratio),typeof(Hl7.Fhir.Model.RatioRange),typeof(Hl7.Fhir.Model.Quantity))]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.DataType? Strength
      {
        get
        {
          if(_Strength.InOverflow<DynamicDataType>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["strength"]);
          return _Strength;
        }

        set
        {
          if (_Strength.InOverflow<DynamicDataType>())
            Overflow.Remove("strength");
          _Strength = value;
          OnPropertyChanged("Strength");
        }

      }

      private Hl7.Fhir.Model.DataType? _Strength;

      /// <summary>
      /// When strength is measured at a particular point or distance.
      /// </summary>
      [FhirElement("measurementPoint", InSummary=true, Order=60)]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? MeasurementPointElement
      {
        get
        {
          if(_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["measurementPoint"]);
          return _MeasurementPointElement;
        }

        set
        {
          if (_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("measurementPoint");
          _MeasurementPointElement = value;
          OnPropertyChanged("MeasurementPointElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _MeasurementPointElement;

      /// <summary>
      /// When strength is measured at a particular point or distance
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? MeasurementPoint
      {
        get => MeasurementPointElement?.Value;
        set
        {
          MeasurementPointElement = value is null ? null : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("MeasurementPoint");
        }
      }

      /// <summary>
      /// Where the strength range applies.
      /// </summary>
      [FhirElement("country", InSummary=true, Order=70)]
      [Binding("Country")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Country
      {
        get
        {
          if(_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["country"]);
          return _Country ??= [];
        }

        set
        {
          if (_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("country");
          _Country = value;
          OnPropertyChanged("Country");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Country;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not ReferenceStrengthComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Substance is not null) dest.Substance = (Hl7.Fhir.Model.CodeableReference)_Substance.DeepCopyInternal();
        if(_Strength is not null) dest.Strength = (Hl7.Fhir.Model.DataType)_Strength.DeepCopyInternal();
        if(_MeasurementPointElement is not null) dest.MeasurementPointElement = (Hl7.Fhir.Model.FhirString)_MeasurementPointElement.DeepCopyInternal();
        if(_Country is not null) dest.Country = new List<Hl7.Fhir.Model.CodeableConcept>(_Country.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new ReferenceStrengthComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not ReferenceStrengthComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Substance, otherT._Substance)) return false;
        if(!comparer.Equals(_Strength, otherT._Strength)) return false;
        if(!comparer.Equals(_MeasurementPointElement, otherT._MeasurementPointElement)) return false;
        if(!comparer.ListEquals(_Country, otherT._Country)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "substance":
            if (_Substance.InOverflow<Hl7.Fhir.Model.CodeableReference>())
            {
              value = Overflow["substance"];
              return true;
            }
            value = _Substance;
            return (value as Hl7.Fhir.Model.CodeableReference) is not null;
          case "strength":
            if (_Strength.InOverflow<DynamicDataType>())
            {
              value = Overflow["strength"];
              return true;
            }
            value = _Strength;
            return (value as Hl7.Fhir.Model.DataType) is not null;
          case "measurementPoint":
            if (_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["measurementPoint"];
              return true;
            }
            value = _MeasurementPointElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "country":
            if (_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["country"];
              return true;
            }
            value = _Country;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "substance":
            if (value is not (Hl7.Fhir.Model.CodeableReference or null))
            {
              Substance = OverflowNull<Hl7.Fhir.Model.CodeableReference>.INSTANCE;
              Overflow["substance"] = value;
            }
            else Substance = (Hl7.Fhir.Model.CodeableReference?)value;
            return this;
          case "strength":
            if (value is not (Hl7.Fhir.Model.DataType or null))
            {
              Strength = OverflowNull<DynamicDataType>.INSTANCE;
              Overflow["strength"] = value;
            }
            else Strength = (Hl7.Fhir.Model.DataType?)value;
            return this;
          case "measurementPoint":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              MeasurementPointElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["measurementPoint"] = value;
            }
            else MeasurementPointElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "country":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Country = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["country"] = value;
            }
            else Country = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Substance is not null && !_Substance.InOverflow<Hl7.Fhir.Model.CodeableReference>()) yield return new KeyValuePair<string,object>("substance",_Substance);
        if (_Strength is not null && !_Strength.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("strength",_Strength);
        if (_MeasurementPointElement is not null && !_MeasurementPointElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("measurementPoint",_MeasurementPointElement);
        if (_Country?.Any() is true && !_Country.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("country",_Country);
      }

    }

    /// <summary>
    /// An identifier or code by which the ingredient can be referenced.
    /// </summary>
    [FhirElement("identifier", InSummary=true, Order=90, FiveWs="FiveWs.class")]
    [DataMember]
    public Hl7.Fhir.Model.Identifier? Identifier
    {
      get
      {
        if(_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Identifier), Overflow["identifier"]);
        return _Identifier;
      }

      set
      {
        if (_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>())
          Overflow.Remove("identifier");
        _Identifier = value;
        OnPropertyChanged("Identifier");
      }

    }

    private Hl7.Fhir.Model.Identifier? _Identifier;

    /// <summary>
    /// draft | active | retired | unknown.
    /// </summary>
    [FhirElement("status", InSummary=true, IsModifier=true, Order=100)]
    [Binding("PublicationStatus")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Code<Hl7.Fhir.Model.PublicationStatus>? StatusElement
    {
      get
      {
        if(_StatusElement.InOverflow<Code<Hl7.Fhir.Model.PublicationStatus>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.PublicationStatus>), Overflow["status"]);
        return _StatusElement;
      }

      set
      {
        if (_StatusElement.InOverflow<Code<Hl7.Fhir.Model.PublicationStatus>>())
          Overflow.Remove("status");
        _StatusElement = value;
        OnPropertyChanged("StatusElement");
      }

    }

    private Code<Hl7.Fhir.Model.PublicationStatus>? _StatusElement;

    /// <summary>
    /// draft | active | retired | unknown
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.PublicationStatus? Status
    {
      get => StatusElement?.Value;
      set
      {
        StatusElement = value is null ? null : new Code<Hl7.Fhir.Model.PublicationStatus>(value);
        OnPropertyChanged("Status");
      }
    }

    /// <summary>
    /// The product which this ingredient is a constituent part of.
    /// </summary>
    [FhirElement("for", InSummary=true, Order=110)]
    [CLSCompliant(false)]
    [References("MedicinalProductDefinition","AdministrableProductDefinition","ManufacturedItemDefinition")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.ResourceReference> For
    {
      get
      {
        if(_For.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.ResourceReference>), Overflow["for"]);
        return _For ??= [];
      }

      set
      {
        if (_For.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          Overflow.Remove("for");
        _For = value;
        OnPropertyChanged("For");
      }

    }

    private List<Hl7.Fhir.Model.ResourceReference>? _For;

    /// <summary>
    /// Purpose of the ingredient within the product, e.g. active, inactive.
    /// </summary>
    [FhirElement("role", InSummary=true, Order=120)]
    [Binding("IngredientRole")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.CodeableConcept? Role
    {
      get
      {
        if(_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["role"]);
        return _Role;
      }

      set
      {
        if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          Overflow.Remove("role");
        _Role = value;
        OnPropertyChanged("Role");
      }

    }

    private Hl7.Fhir.Model.CodeableConcept? _Role;

    /// <summary>
    /// Precise action within the drug product, e.g. antioxidant, alkalizing agent.
    /// </summary>
    [FhirElement("function", InSummary=true, Order=130)]
    [Binding("IngredientFunction")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.CodeableConcept> Function
    {
      get
      {
        if(_Function.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["function"]);
        return _Function ??= [];
      }

      set
      {
        if (_Function.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          Overflow.Remove("function");
        _Function = value;
        OnPropertyChanged("Function");
      }

    }

    private List<Hl7.Fhir.Model.CodeableConcept>? _Function;

    /// <summary>
    /// A classification of the ingredient according to where in the physical item it tends to be used, such the outer shell of a tablet, inner body or ink.
    /// </summary>
    [FhirElement("group", InSummary=true, Order=140)]
    [DataMember]
    public Hl7.Fhir.Model.CodeableConcept? Group
    {
      get
      {
        if(_Group.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["group"]);
        return _Group;
      }

      set
      {
        if (_Group.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          Overflow.Remove("group");
        _Group = value;
        OnPropertyChanged("Group");
      }

    }

    private Hl7.Fhir.Model.CodeableConcept? _Group;

    /// <summary>
    /// If the ingredient is a known or suspected allergen.
    /// </summary>
    [FhirElement("allergenicIndicator", InSummary=true, Order=150)]
    [DataMember]
    public Hl7.Fhir.Model.FhirBoolean? AllergenicIndicatorElement
    {
      get
      {
        if(_AllergenicIndicatorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirBoolean), Overflow["allergenicIndicator"]);
        return _AllergenicIndicatorElement;
      }

      set
      {
        if (_AllergenicIndicatorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
          Overflow.Remove("allergenicIndicator");
        _AllergenicIndicatorElement = value;
        OnPropertyChanged("AllergenicIndicatorElement");
      }

    }

    private Hl7.Fhir.Model.FhirBoolean? _AllergenicIndicatorElement;

    /// <summary>
    /// If the ingredient is a known or suspected allergen
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public bool? AllergenicIndicator
    {
      get => AllergenicIndicatorElement?.Value;
      set
      {
        AllergenicIndicatorElement = value is null ? null : new Hl7.Fhir.Model.FhirBoolean(value);
        OnPropertyChanged("AllergenicIndicator");
      }
    }

    /// <summary>
    /// A place for providing any notes that are relevant to the component, e.g. removed during process, adjusted for loss on drying.
    /// </summary>
    [FhirElement("comment", Order=160)]
    [DataMember]
    public Hl7.Fhir.Model.Markdown? CommentElement
    {
      get
      {
        if(_CommentElement.InOverflow<Hl7.Fhir.Model.Markdown>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Markdown), Overflow["comment"]);
        return _CommentElement;
      }

      set
      {
        if (_CommentElement.InOverflow<Hl7.Fhir.Model.Markdown>())
          Overflow.Remove("comment");
        _CommentElement = value;
        OnPropertyChanged("CommentElement");
      }

    }

    private Hl7.Fhir.Model.Markdown? _CommentElement;

    /// <summary>
    /// A place for providing any notes that are relevant to the component, e.g. removed during process, adjusted for loss on drying
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public string? Comment
    {
      get => CommentElement?.Value;
      set
      {
        CommentElement = value is null ? null : new Hl7.Fhir.Model.Markdown(value);
        OnPropertyChanged("Comment");
      }
    }

    /// <summary>
    /// An organization that manufactures this ingredient.
    /// </summary>
    [FhirElement("manufacturer", InSummary=true, Order=170)]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent> Manufacturer
    {
      get
      {
        if(_Manufacturer.InOverflow<List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>), Overflow["manufacturer"]);
        return _Manufacturer ??= [];
      }

      set
      {
        if (_Manufacturer.InOverflow<List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>>())
          Overflow.Remove("manufacturer");
        _Manufacturer = value;
        OnPropertyChanged("Manufacturer");
      }

    }

    private List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>? _Manufacturer;

    /// <summary>
    /// The substance that comprises this ingredient.
    /// </summary>
    [FhirElement("substance", InSummary=true, Order=180)]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.Ingredient.SubstanceComponent? Substance
    {
      get
      {
        if(_Substance.InOverflow<Hl7.Fhir.Model.Ingredient.SubstanceComponent>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Ingredient.SubstanceComponent), Overflow["substance"]);
        return _Substance;
      }

      set
      {
        if (_Substance.InOverflow<Hl7.Fhir.Model.Ingredient.SubstanceComponent>())
          Overflow.Remove("substance");
        _Substance = value;
        OnPropertyChanged("Substance");
      }

    }

    private Hl7.Fhir.Model.Ingredient.SubstanceComponent? _Substance;

    Identifier? IIdentifiable<Identifier?>.Identifier { get => Identifier; set => Identifier = value; }

    protected internal override void CopyToInternal(Base other)
    {
      if(other is not Ingredient dest)
        throw new ArgumentException("Can only copy to an object of the same type", "other");

      base.CopyToInternal(dest);
      if(_Identifier is not null) dest.Identifier = (Hl7.Fhir.Model.Identifier)_Identifier.DeepCopyInternal();
      if(_StatusElement is not null) dest.StatusElement = (Code<Hl7.Fhir.Model.PublicationStatus>)_StatusElement.DeepCopyInternal();
      if(_For is not null) dest.For = new List<Hl7.Fhir.Model.ResourceReference>(_For.DeepCopyInternal());
      if(_Role is not null) dest.Role = (Hl7.Fhir.Model.CodeableConcept)_Role.DeepCopyInternal();
      if(_Function is not null) dest.Function = new List<Hl7.Fhir.Model.CodeableConcept>(_Function.DeepCopyInternal());
      if(_Group is not null) dest.Group = (Hl7.Fhir.Model.CodeableConcept)_Group.DeepCopyInternal();
      if(_AllergenicIndicatorElement is not null) dest.AllergenicIndicatorElement = (Hl7.Fhir.Model.FhirBoolean)_AllergenicIndicatorElement.DeepCopyInternal();
      if(_CommentElement is not null) dest.CommentElement = (Hl7.Fhir.Model.Markdown)_CommentElement.DeepCopyInternal();
      if(_Manufacturer is not null) dest.Manufacturer = new List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>(_Manufacturer.DeepCopyInternal());
      if(_Substance is not null) dest.Substance = (Hl7.Fhir.Model.Ingredient.SubstanceComponent)_Substance.DeepCopyInternal();
    }

    protected internal override Base DeepCopyInternal()
    {
      var instance = new Ingredient();
      CopyToInternal(instance);
      return instance;
    }

    public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
    {
      if(other is not Ingredient otherT) return false;

      if(!base.CompareChildren(otherT, comparer)) return false;
      #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
      if(!comparer.Equals(_Identifier, otherT._Identifier)) return false;
      if(!comparer.Equals(_StatusElement, otherT._StatusElement)) return false;
      if(!comparer.ListEquals(_For, otherT._For)) return false;
      if(!comparer.Equals(_Role, otherT._Role)) return false;
      if(!comparer.ListEquals(_Function, otherT._Function)) return false;
      if(!comparer.Equals(_Group, otherT._Group)) return false;
      if(!comparer.Equals(_AllergenicIndicatorElement, otherT._AllergenicIndicatorElement)) return false;
      if(!comparer.Equals(_CommentElement, otherT._CommentElement)) return false;
      if(!comparer.ListEquals(_Manufacturer, otherT._Manufacturer)) return false;
      if(!comparer.Equals(_Substance, otherT._Substance)) return false;
      #pragma warning restore CS8604 // Possible null reference argument.

      return true;
    }

    public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
    {
      switch (key)
      {
        case "identifier":
          if (_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>())
          {
            value = Overflow["identifier"];
            return true;
          }
          value = _Identifier;
          return (value as Hl7.Fhir.Model.Identifier) is not null;
        case "status":
          if (_StatusElement.InOverflow<Code<Hl7.Fhir.Model.PublicationStatus>>())
          {
            value = Overflow["status"];
            return true;
          }
          value = _StatusElement;
          return (value as Code<Hl7.Fhir.Model.PublicationStatus>) is not null;
        case "for":
          if (_For.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          {
            value = Overflow["for"];
            return true;
          }
          value = _For;
          return (value as List<Hl7.Fhir.Model.ResourceReference>)?.Any() is true;
        case "role":
          if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          {
            value = Overflow["role"];
            return true;
          }
          value = _Role;
          return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
        case "function":
          if (_Function.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          {
            value = Overflow["function"];
            return true;
          }
          value = _Function;
          return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
        case "group":
          if (_Group.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
          {
            value = Overflow["group"];
            return true;
          }
          value = _Group;
          return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
        case "allergenicIndicator":
          if (_AllergenicIndicatorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
          {
            value = Overflow["allergenicIndicator"];
            return true;
          }
          value = _AllergenicIndicatorElement;
          return (value as Hl7.Fhir.Model.FhirBoolean) is not null;
        case "comment":
          if (_CommentElement.InOverflow<Hl7.Fhir.Model.Markdown>())
          {
            value = Overflow["comment"];
            return true;
          }
          value = _CommentElement;
          return (value as Hl7.Fhir.Model.Markdown) is not null;
        case "manufacturer":
          if (_Manufacturer.InOverflow<List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>>())
          {
            value = Overflow["manufacturer"];
            return true;
          }
          value = _Manufacturer;
          return (value as List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>)?.Any() is true;
        case "substance":
          if (_Substance.InOverflow<Hl7.Fhir.Model.Ingredient.SubstanceComponent>())
          {
            value = Overflow["substance"];
            return true;
          }
          value = _Substance;
          return (value as Hl7.Fhir.Model.Ingredient.SubstanceComponent) is not null;
        default:
          return base.TryGetValue(key, out value);
      }

    }

    public override Base SetValue(string key, object? value)
    {
      if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
      switch (key)
      {
        case "identifier":
          if (value is not (Hl7.Fhir.Model.Identifier or null))
          {
            Identifier = OverflowNull<Hl7.Fhir.Model.Identifier>.INSTANCE;
            Overflow["identifier"] = value;
          }
          else Identifier = (Hl7.Fhir.Model.Identifier?)value;
          return this;
        case "status":
          if (value is not (Code<Hl7.Fhir.Model.PublicationStatus> or null))
          {
            StatusElement = OverflowNull<Code<Hl7.Fhir.Model.PublicationStatus>>.INSTANCE;
            Overflow["status"] = value;
          }
          else StatusElement = (Code<Hl7.Fhir.Model.PublicationStatus>?)value;
          return this;
        case "for":
          if (value is not (List<Hl7.Fhir.Model.ResourceReference> or null))
          {
            For = OverflowNull<List<Hl7.Fhir.Model.ResourceReference>>.INSTANCE;
            Overflow["for"] = value;
          }
          else For = (List<Hl7.Fhir.Model.ResourceReference>?)value!;
          return this;
        case "role":
          if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
          {
            Role = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
            Overflow["role"] = value;
          }
          else Role = (Hl7.Fhir.Model.CodeableConcept?)value;
          return this;
        case "function":
          if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
          {
            Function = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
            Overflow["function"] = value;
          }
          else Function = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
          return this;
        case "group":
          if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
          {
            Group = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
            Overflow["group"] = value;
          }
          else Group = (Hl7.Fhir.Model.CodeableConcept?)value;
          return this;
        case "allergenicIndicator":
          if (value is not (Hl7.Fhir.Model.FhirBoolean or null))
          {
            AllergenicIndicatorElement = OverflowNull<Hl7.Fhir.Model.FhirBoolean>.INSTANCE;
            Overflow["allergenicIndicator"] = value;
          }
          else AllergenicIndicatorElement = (Hl7.Fhir.Model.FhirBoolean?)value;
          return this;
        case "comment":
          if (value is not (Hl7.Fhir.Model.Markdown or null))
          {
            CommentElement = OverflowNull<Hl7.Fhir.Model.Markdown>.INSTANCE;
            Overflow["comment"] = value;
          }
          else CommentElement = (Hl7.Fhir.Model.Markdown?)value;
          return this;
        case "manufacturer":
          if (value is not (List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent> or null))
          {
            Manufacturer = OverflowNull<List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>>.INSTANCE;
            Overflow["manufacturer"] = value;
          }
          else Manufacturer = (List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>?)value!;
          return this;
        case "substance":
          if (value is not (Hl7.Fhir.Model.Ingredient.SubstanceComponent or null))
          {
            Substance = OverflowNull<Hl7.Fhir.Model.Ingredient.SubstanceComponent>.INSTANCE;
            Overflow["substance"] = value;
          }
          else Substance = (Hl7.Fhir.Model.Ingredient.SubstanceComponent?)value;
          return this;
        default:
          return base.SetValue(key, value);
      }

    }

    public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
    {
      foreach (var kvp in base.EnumerateElements()) yield return kvp;
      if (_Identifier is not null && !_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>()) yield return new KeyValuePair<string,object>("identifier",_Identifier);
      if (_StatusElement is not null && !_StatusElement.InOverflow<Code<Hl7.Fhir.Model.PublicationStatus>>()) yield return new KeyValuePair<string,object>("status",_StatusElement);
      if (_For?.Any() is true && !_For.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>()) yield return new KeyValuePair<string,object>("for",_For);
      if (_Role is not null && !_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("role",_Role);
      if (_Function?.Any() is true && !_Function.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("function",_Function);
      if (_Group is not null && !_Group.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("group",_Group);
      if (_AllergenicIndicatorElement is not null && !_AllergenicIndicatorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>()) yield return new KeyValuePair<string,object>("allergenicIndicator",_AllergenicIndicatorElement);
      if (_CommentElement is not null && !_CommentElement.InOverflow<Hl7.Fhir.Model.Markdown>()) yield return new KeyValuePair<string,object>("comment",_CommentElement);
      if (_Manufacturer?.Any() is true && !_Manufacturer.InOverflow<List<Hl7.Fhir.Model.Ingredient.ManufacturerComponent>>()) yield return new KeyValuePair<string,object>("manufacturer",_Manufacturer);
      if (_Substance is not null && !_Substance.InOverflow<Hl7.Fhir.Model.Ingredient.SubstanceComponent>()) yield return new KeyValuePair<string,object>("substance",_Substance);
    }

  }

}

// end of file
