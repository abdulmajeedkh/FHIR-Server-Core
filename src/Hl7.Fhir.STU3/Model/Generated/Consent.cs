// <auto-generated/>
// Contents of: hl7.fhir.r3.expansions@3.0.2, hl7.fhir.r3.core@3.0.2

using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using Hl7.Fhir.Introspection;
using Hl7.Fhir.Serialization;
using Hl7.Fhir.Specification;
using Hl7.Fhir.Utility;
using Hl7.Fhir.Validation;
using System.Diagnostics.CodeAnalysis;
using SystemPrimitive = Hl7.Fhir.ElementModel.Types;

#nullable enable

/*
  Copyright (c) 2011+, HL7, Inc.
  All rights reserved.
  
  Redistribution and use in source and binary forms, with or without modification, 
  are permitted provided that the following conditions are met:
  
   * Redistributions of source code must retain the above copyright notice, this 
     list of conditions and the following disclaimer.
   * Redistributions in binary form must reproduce the above copyright notice, 
     this list of conditions and the following disclaimer in the documentation 
     and/or other materials provided with the distribution.
   * Neither the name of HL7 nor the names of its contributors may be used to 
     endorse or promote products derived from this software without specific 
     prior written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND 
  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED 
  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT 
  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR 
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
  POSSIBILITY OF SUCH DAMAGE.
  
*/

namespace Hl7.Fhir.Model
{
  /// <summary>
  /// A healthcare consumer's policy choices to permits or denies recipients or roles to perform actions for specific purposes and periods of time
  /// </summary>
  /// <remarks>
  /// A record of a healthcare consumerâ€™s policy choices, which permits or denies identified recipient(s) or recipient role(s) to perform one or more actions within a given policy context, for specific purposes and periods of time.
  /// Broadly, there are 3 key areas of consent for patients: Consent around sharing information (aka Privacy Consent Directive - Authorization to Collect, Use, or Disclose information), consent for specific treatment, or kinds of treatment, and general advance care directives.
  /// </remarks>
  [Serializable]
  [DataContract]
  [FhirType("Consent","http://hl7.org/fhir/StructureDefinition/Consent")]
  public partial class Consent : Hl7.Fhir.Model.DomainResource, IIdentifiable<Identifier?>
  {
    /// <summary>
    /// FHIR Type Name
    /// </summary>
    public override string TypeName => "Consent";

    /// <summary>
    /// Indicates the state of the consent
    /// (url: http://hl7.org/fhir/ValueSet/consent-state-codes)
    /// (system: http://hl7.org/fhir/consent-state-codes)
    /// </summary>
    [FhirEnumeration("ConsentState", "http://hl7.org/fhir/ValueSet/consent-state-codes", "http://hl7.org/fhir/consent-state-codes")]
    public enum ConsentState
    {
      /// <summary>
      /// The consent is in development or awaiting use but is not yet intended to be acted upon.
      /// (system: http://hl7.org/fhir/consent-state-codes)
      /// </summary>
      [EnumLiteral("draft"), Description("Pending")]
      Draft,
      /// <summary>
      /// The consent has been proposed but not yet agreed to by all parties. The negotiation stage.
      /// (system: http://hl7.org/fhir/consent-state-codes)
      /// </summary>
      [EnumLiteral("proposed"), Description("Proposed")]
      Proposed,
      /// <summary>
      /// The consent is to be followed and enforced.
      /// (system: http://hl7.org/fhir/consent-state-codes)
      /// </summary>
      [EnumLiteral("active"), Description("Active")]
      Active,
      /// <summary>
      /// The consent has been rejected by one or more of the parties.
      /// (system: http://hl7.org/fhir/consent-state-codes)
      /// </summary>
      [EnumLiteral("rejected"), Description("Rejected")]
      Rejected,
      /// <summary>
      /// The consent is terminated or replaced.
      /// (system: http://hl7.org/fhir/consent-state-codes)
      /// </summary>
      [EnumLiteral("inactive"), Description("Inactive")]
      Inactive,
      /// <summary>
      /// The consent was created wrongly (e.g. wrong patient) and should be ignored
      /// (system: http://hl7.org/fhir/consent-state-codes)
      /// </summary>
      [EnumLiteral("entered-in-error"), Description("Entered in Error")]
      EnteredInError,
    }

    /// <summary>
    /// How a resource reference is interpreted when testing consent restrictions
    /// (url: http://hl7.org/fhir/ValueSet/consent-data-meaning)
    /// (system: http://hl7.org/fhir/consent-data-meaning)
    /// </summary>
    [FhirEnumeration("ConsentDataMeaning", "http://hl7.org/fhir/ValueSet/consent-data-meaning", "http://hl7.org/fhir/consent-data-meaning")]
    public enum ConsentDataMeaning
    {
      /// <summary>
      /// The consent applies directly to the instance of the resource
      /// (system: http://hl7.org/fhir/consent-data-meaning)
      /// </summary>
      [EnumLiteral("instance"), Description("Instance")]
      Instance,
      /// <summary>
      /// The consent applies directly to the instance of the resource and instances it refers to
      /// (system: http://hl7.org/fhir/consent-data-meaning)
      /// </summary>
      [EnumLiteral("related"), Description("Related")]
      Related,
      /// <summary>
      /// The consent applies directly to the instance of the resource and instances that refer to it
      /// (system: http://hl7.org/fhir/consent-data-meaning)
      /// </summary>
      [EnumLiteral("dependents"), Description("Dependents")]
      Dependents,
      /// <summary>
      /// The consent applies to instances of resources that are authored by
      /// (system: http://hl7.org/fhir/consent-data-meaning)
      /// </summary>
      [EnumLiteral("authoredby"), Description("AuthoredBy")]
      Authoredby,
    }

    /// <summary>
    /// How an exception statement is applied, such as adding additional consent or removing consent
    /// (url: http://hl7.org/fhir/ValueSet/consent-except-type)
    /// (system: http://hl7.org/fhir/consent-except-type)
    /// </summary>
    [FhirEnumeration("ConsentExceptType", "http://hl7.org/fhir/ValueSet/consent-except-type", "http://hl7.org/fhir/consent-except-type")]
    public enum ConsentExceptType
    {
      /// <summary>
      /// Consent is denied for actions meeting these rules
      /// (system: http://hl7.org/fhir/consent-except-type)
      /// </summary>
      [EnumLiteral("deny"), Description("Opt Out")]
      Deny,
      /// <summary>
      /// Consent is provided for actions meeting these rules
      /// (system: http://hl7.org/fhir/consent-except-type)
      /// </summary>
      [EnumLiteral("permit"), Description("Opt In")]
      Permit,
    }

    /// <summary>
    /// Who|what controlled by this consent (or group, by role)
    /// </summary>
    /// <remarks>
    /// Who or what is controlled by this consent. Use group to identify a set of actors by some property they share (e.g. 'admitting officers').
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Consent.actor", IsBackboneType=true)]
    public partial class ActorComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Consent.actor";

      /// <summary>
      /// How the actor is involved.
      /// </summary>
      [FhirElement("role", Order=40)]
      [Binding("ConsentActorRole")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept Role
      {
        get
        {
          if(_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["role"]);
          return _Role!;
        }

        set
        {
          if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("role");
          _Role = value;
          OnPropertyChanged("Role");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Role;

      /// <summary>
      /// Resource for the actor (or group, by role).
      /// </summary>
      [FhirElement("reference", Order=50)]
      [CLSCompliant(false)]
      [References("Device","Group","CareTeam","Organization","Patient","Practitioner","RelatedPerson")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference Reference
      {
        get
        {
          if(_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["reference"]);
          return _Reference!;
        }

        set
        {
          if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("reference");
          _Reference = value;
          OnPropertyChanged("Reference");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Reference;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not ActorComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Role is not null) dest.Role = (Hl7.Fhir.Model.CodeableConcept)_Role.DeepCopyInternal();
        if(_Reference is not null) dest.Reference = (Hl7.Fhir.Model.ResourceReference)_Reference.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new ActorComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not ActorComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Role, otherT._Role)) return false;
        if(!comparer.Equals(_Reference, otherT._Reference)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "role":
            if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["role"];
              return true;
            }
            value = _Role;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "reference":
            if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["reference"];
              return true;
            }
            value = _Reference;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "role":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Role = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["role"] = value;
            }
            else Role = (Hl7.Fhir.Model.CodeableConcept?)value!;
            return this;
          case "reference":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Reference = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["reference"] = value;
            }
            else Reference = (Hl7.Fhir.Model.ResourceReference?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Role is not null && !_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("role",_Role);
        if (_Reference is not null && !_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("reference",_Reference);
      }

    }

    /// <summary>
    /// Policies covered by this consent
    /// </summary>
    /// <remarks>
    /// The references to the policies that are included in this consent scope. Policies may be organizational, but are often defined jurisdictionally, or in law.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Consent.policy", IsBackboneType=true)]
    public partial class PolicyComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Consent.policy";

      /// <summary>
      /// Enforcement source for policy.
      /// </summary>
      [FhirElement("authority", Order=40)]
      [DataMember]
      public Hl7.Fhir.Model.FhirUri? AuthorityElement
      {
        get
        {
          if(_AuthorityElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirUri), Overflow["authority"]);
          return _AuthorityElement;
        }

        set
        {
          if (_AuthorityElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
            Overflow.Remove("authority");
          _AuthorityElement = value;
          OnPropertyChanged("AuthorityElement");
        }

      }

      private Hl7.Fhir.Model.FhirUri? _AuthorityElement;

      /// <summary>
      /// Enforcement source for policy
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Authority
      {
        get => AuthorityElement?.Value;
        set
        {
          AuthorityElement = value is null ? null! : new Hl7.Fhir.Model.FhirUri(value);
          OnPropertyChanged("Authority");
        }
      }

      /// <summary>
      /// Specific policy covered by this consent.
      /// </summary>
      [FhirElement("uri", Order=50)]
      [DataMember]
      public Hl7.Fhir.Model.FhirUri? UriElement
      {
        get
        {
          if(_UriElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirUri), Overflow["uri"]);
          return _UriElement;
        }

        set
        {
          if (_UriElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
            Overflow.Remove("uri");
          _UriElement = value;
          OnPropertyChanged("UriElement");
        }

      }

      private Hl7.Fhir.Model.FhirUri? _UriElement;

      /// <summary>
      /// Specific policy covered by this consent
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Uri
      {
        get => UriElement?.Value;
        set
        {
          UriElement = value is null ? null! : new Hl7.Fhir.Model.FhirUri(value);
          OnPropertyChanged("Uri");
        }
      }

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not PolicyComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_AuthorityElement is not null) dest.AuthorityElement = (Hl7.Fhir.Model.FhirUri)_AuthorityElement.DeepCopyInternal();
        if(_UriElement is not null) dest.UriElement = (Hl7.Fhir.Model.FhirUri)_UriElement.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new PolicyComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not PolicyComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_AuthorityElement, otherT._AuthorityElement)) return false;
        if(!comparer.Equals(_UriElement, otherT._UriElement)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "authority":
            if (_AuthorityElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
            {
              value = Overflow["authority"];
              return true;
            }
            value = _AuthorityElement;
            return (value as Hl7.Fhir.Model.FhirUri) is not null;
          case "uri":
            if (_UriElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
            {
              value = Overflow["uri"];
              return true;
            }
            value = _UriElement;
            return (value as Hl7.Fhir.Model.FhirUri) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "authority":
            if (value is not (Hl7.Fhir.Model.FhirUri or null))
            {
              AuthorityElement = OverflowNull<Hl7.Fhir.Model.FhirUri>.INSTANCE;
              Overflow["authority"] = value;
            }
            else AuthorityElement = (Hl7.Fhir.Model.FhirUri?)value;
            return this;
          case "uri":
            if (value is not (Hl7.Fhir.Model.FhirUri or null))
            {
              UriElement = OverflowNull<Hl7.Fhir.Model.FhirUri>.INSTANCE;
              Overflow["uri"] = value;
            }
            else UriElement = (Hl7.Fhir.Model.FhirUri?)value;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_AuthorityElement is not null && !_AuthorityElement.InOverflow<Hl7.Fhir.Model.FhirUri>()) yield return new KeyValuePair<string,object>("authority",_AuthorityElement);
        if (_UriElement is not null && !_UriElement.InOverflow<Hl7.Fhir.Model.FhirUri>()) yield return new KeyValuePair<string,object>("uri",_UriElement);
      }

    }

    /// <summary>
    /// Data controlled by this consent
    /// </summary>
    /// <remarks>
    /// The resources controlled by this consent, if specific resources are referenced.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Consent.data", IsBackboneType=true)]
    public partial class DataComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Consent.data";

      /// <summary>
      /// instance | related | dependents | authoredby.
      /// </summary>
      [FhirElement("meaning", InSummary=true, Order=40)]
      [Binding("ConsentDataMeaning")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning> MeaningElement
      {
        get
        {
          if(_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>())
            throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>), Overflow["meaning"]);
          return _MeaningElement!;
        }

        set
        {
          if (_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>())
            Overflow.Remove("meaning");
          _MeaningElement = value;
          OnPropertyChanged("MeaningElement");
        }

      }

      private Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>? _MeaningElement;

      /// <summary>
      /// instance | related | dependents | authoredby
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public Hl7.Fhir.Model.Consent.ConsentDataMeaning? Meaning
      {
        get => MeaningElement?.Value;
        set
        {
          MeaningElement = value is null ? null! : new Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>(value);
          OnPropertyChanged("Meaning");
        }
      }

      /// <summary>
      /// The actual data reference.
      /// </summary>
      [FhirElement("reference", InSummary=true, Order=50)]
      [CLSCompliant(false)]
      [References("Resource")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference Reference
      {
        get
        {
          if(_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["reference"]);
          return _Reference!;
        }

        set
        {
          if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("reference");
          _Reference = value;
          OnPropertyChanged("Reference");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Reference;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not DataComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_MeaningElement is not null) dest.MeaningElement = (Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>)_MeaningElement.DeepCopyInternal();
        if(_Reference is not null) dest.Reference = (Hl7.Fhir.Model.ResourceReference)_Reference.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new DataComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not DataComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_MeaningElement, otherT._MeaningElement)) return false;
        if(!comparer.Equals(_Reference, otherT._Reference)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "meaning":
            if (_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>())
            {
              value = Overflow["meaning"];
              return true;
            }
            value = _MeaningElement;
            return (value as Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>) is not null;
          case "reference":
            if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["reference"];
              return true;
            }
            value = _Reference;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "meaning":
            if (value is not (Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning> or null))
            {
              MeaningElement = OverflowNull<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>.INSTANCE;
              Overflow["meaning"] = value;
            }
            else MeaningElement = (Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>?)value!;
            return this;
          case "reference":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Reference = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["reference"] = value;
            }
            else Reference = (Hl7.Fhir.Model.ResourceReference?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_MeaningElement is not null && !_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>()) yield return new KeyValuePair<string,object>("meaning",_MeaningElement);
        if (_Reference is not null && !_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("reference",_Reference);
      }

    }

    /// <summary>
    /// Additional rule -  addition or removal of permissions
    /// </summary>
    /// <remarks>
    /// An exception to the base policy of this consent. An exception can be an addition or removal of access permissions.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Consent.except", IsBackboneType=true)]
    public partial class ExceptComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Consent.except";

      /// <summary>
      /// deny | permit.
      /// </summary>
      [FhirElement("type", InSummary=true, Order=40)]
      [Binding("ConsentExceptType")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Code<Hl7.Fhir.Model.Consent.ConsentExceptType> TypeElement
      {
        get
        {
          if(_TypeElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentExceptType>>())
            throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.Consent.ConsentExceptType>), Overflow["type"]);
          return _TypeElement!;
        }

        set
        {
          if (_TypeElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentExceptType>>())
            Overflow.Remove("type");
          _TypeElement = value;
          OnPropertyChanged("TypeElement");
        }

      }

      private Code<Hl7.Fhir.Model.Consent.ConsentExceptType>? _TypeElement;

      /// <summary>
      /// deny | permit
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public Hl7.Fhir.Model.Consent.ConsentExceptType? Type
      {
        get => TypeElement?.Value;
        set
        {
          TypeElement = value is null ? null! : new Code<Hl7.Fhir.Model.Consent.ConsentExceptType>(value);
          OnPropertyChanged("Type");
        }
      }

      /// <summary>
      /// Timeframe for this exception.
      /// </summary>
      [FhirElement("period", InSummary=true, Order=50)]
      [DataMember]
      public Hl7.Fhir.Model.Period? Period
      {
        get
        {
          if(_Period.InOverflow<Hl7.Fhir.Model.Period>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Period), Overflow["period"]);
          return _Period;
        }

        set
        {
          if (_Period.InOverflow<Hl7.Fhir.Model.Period>())
            Overflow.Remove("period");
          _Period = value;
          OnPropertyChanged("Period");
        }

      }

      private Hl7.Fhir.Model.Period? _Period;

      /// <summary>
      /// Who|what controlled by this exception (or group, by role).
      /// </summary>
      [FhirElement("actor", InSummary=true, Order=60)]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Consent.ExceptActorComponent> Actor
      {
        get
        {
          if(_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptActorComponent>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Consent.ExceptActorComponent>), Overflow["actor"]);
          return _Actor ??= [];
        }

        set
        {
          if (_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptActorComponent>>())
            Overflow.Remove("actor");
          _Actor = value;
          OnPropertyChanged("Actor");
        }

      }

      private List<Hl7.Fhir.Model.Consent.ExceptActorComponent>? _Actor;

      /// <summary>
      /// Actions controlled by this exception.
      /// </summary>
      [FhirElement("action", InSummary=true, Order=70)]
      [Binding("ConsentAction")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Action
      {
        get
        {
          if(_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["action"]);
          return _Action ??= [];
        }

        set
        {
          if (_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("action");
          _Action = value;
          OnPropertyChanged("Action");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Action;

      /// <summary>
      /// Security Labels that define affected resources.
      /// </summary>
      [FhirElement("securityLabel", InSummary=true, Order=80)]
      [Binding("SecurityLabels")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Coding> SecurityLabel
      {
        get
        {
          if(_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["securityLabel"]);
          return _SecurityLabel ??= [];
        }

        set
        {
          if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            Overflow.Remove("securityLabel");
          _SecurityLabel = value;
          OnPropertyChanged("SecurityLabel");
        }

      }

      private List<Hl7.Fhir.Model.Coding>? _SecurityLabel;

      /// <summary>
      /// Context of activities covered by this exception.
      /// </summary>
      [FhirElement("purpose", InSummary=true, Order=90)]
      [Binding("PurposeOfUse")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Coding> Purpose
      {
        get
        {
          if(_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["purpose"]);
          return _Purpose ??= [];
        }

        set
        {
          if (_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            Overflow.Remove("purpose");
          _Purpose = value;
          OnPropertyChanged("Purpose");
        }

      }

      private List<Hl7.Fhir.Model.Coding>? _Purpose;

      /// <summary>
      /// e.g. Resource Type, Profile, or CDA etc.
      /// </summary>
      [FhirElement("class", InSummary=true, Order=100)]
      [Binding("ConsentContentClass")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Coding> Class
      {
        get
        {
          if(_Class.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["class"]);
          return _Class ??= [];
        }

        set
        {
          if (_Class.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            Overflow.Remove("class");
          _Class = value;
          OnPropertyChanged("Class");
        }

      }

      private List<Hl7.Fhir.Model.Coding>? _Class;

      /// <summary>
      /// e.g. LOINC or SNOMED CT code, etc in the content.
      /// </summary>
      [FhirElement("code", InSummary=true, Order=110)]
      [Binding("ConsentContentCode")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Coding> Code
      {
        get
        {
          if(_Code.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["code"]);
          return _Code ??= [];
        }

        set
        {
          if (_Code.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            Overflow.Remove("code");
          _Code = value;
          OnPropertyChanged("Code");
        }

      }

      private List<Hl7.Fhir.Model.Coding>? _Code;

      /// <summary>
      /// Timeframe for data controlled by this exception.
      /// </summary>
      [FhirElement("dataPeriod", InSummary=true, Order=120)]
      [DataMember]
      public Hl7.Fhir.Model.Period? DataPeriod
      {
        get
        {
          if(_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Period), Overflow["dataPeriod"]);
          return _DataPeriod;
        }

        set
        {
          if (_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>())
            Overflow.Remove("dataPeriod");
          _DataPeriod = value;
          OnPropertyChanged("DataPeriod");
        }

      }

      private Hl7.Fhir.Model.Period? _DataPeriod;

      /// <summary>
      /// Data controlled by this exception.
      /// </summary>
      [FhirElement("data", InSummary=true, Order=130)]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Consent.ExceptDataComponent> Data
      {
        get
        {
          if(_Data.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptDataComponent>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Consent.ExceptDataComponent>), Overflow["data"]);
          return _Data ??= [];
        }

        set
        {
          if (_Data.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptDataComponent>>())
            Overflow.Remove("data");
          _Data = value;
          OnPropertyChanged("Data");
        }

      }

      private List<Hl7.Fhir.Model.Consent.ExceptDataComponent>? _Data;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not ExceptComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_TypeElement is not null) dest.TypeElement = (Code<Hl7.Fhir.Model.Consent.ConsentExceptType>)_TypeElement.DeepCopyInternal();
        if(_Period is not null) dest.Period = (Hl7.Fhir.Model.Period)_Period.DeepCopyInternal();
        if(_Actor is not null) dest.Actor = new List<Hl7.Fhir.Model.Consent.ExceptActorComponent>(_Actor.DeepCopyInternal());
        if(_Action is not null) dest.Action = new List<Hl7.Fhir.Model.CodeableConcept>(_Action.DeepCopyInternal());
        if(_SecurityLabel is not null) dest.SecurityLabel = new List<Hl7.Fhir.Model.Coding>(_SecurityLabel.DeepCopyInternal());
        if(_Purpose is not null) dest.Purpose = new List<Hl7.Fhir.Model.Coding>(_Purpose.DeepCopyInternal());
        if(_Class is not null) dest.Class = new List<Hl7.Fhir.Model.Coding>(_Class.DeepCopyInternal());
        if(_Code is not null) dest.Code = new List<Hl7.Fhir.Model.Coding>(_Code.DeepCopyInternal());
        if(_DataPeriod is not null) dest.DataPeriod = (Hl7.Fhir.Model.Period)_DataPeriod.DeepCopyInternal();
        if(_Data is not null) dest.Data = new List<Hl7.Fhir.Model.Consent.ExceptDataComponent>(_Data.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new ExceptComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not ExceptComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_TypeElement, otherT._TypeElement)) return false;
        if(!comparer.Equals(_Period, otherT._Period)) return false;
        if(!comparer.ListEquals(_Actor, otherT._Actor)) return false;
        if(!comparer.ListEquals(_Action, otherT._Action)) return false;
        if(!comparer.ListEquals(_SecurityLabel, otherT._SecurityLabel)) return false;
        if(!comparer.ListEquals(_Purpose, otherT._Purpose)) return false;
        if(!comparer.ListEquals(_Class, otherT._Class)) return false;
        if(!comparer.ListEquals(_Code, otherT._Code)) return false;
        if(!comparer.Equals(_DataPeriod, otherT._DataPeriod)) return false;
        if(!comparer.ListEquals(_Data, otherT._Data)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "type":
            if (_TypeElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentExceptType>>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _TypeElement;
            return (value as Code<Hl7.Fhir.Model.Consent.ConsentExceptType>) is not null;
          case "period":
            if (_Period.InOverflow<Hl7.Fhir.Model.Period>())
            {
              value = Overflow["period"];
              return true;
            }
            value = _Period;
            return (value as Hl7.Fhir.Model.Period) is not null;
          case "actor":
            if (_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptActorComponent>>())
            {
              value = Overflow["actor"];
              return true;
            }
            value = _Actor;
            return (value as List<Hl7.Fhir.Model.Consent.ExceptActorComponent>)?.Any() is true;
          case "action":
            if (_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["action"];
              return true;
            }
            value = _Action;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          case "securityLabel":
            if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            {
              value = Overflow["securityLabel"];
              return true;
            }
            value = _SecurityLabel;
            return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
          case "purpose":
            if (_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            {
              value = Overflow["purpose"];
              return true;
            }
            value = _Purpose;
            return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
          case "class":
            if (_Class.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            {
              value = Overflow["class"];
              return true;
            }
            value = _Class;
            return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
          case "code":
            if (_Code.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            {
              value = Overflow["code"];
              return true;
            }
            value = _Code;
            return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
          case "dataPeriod":
            if (_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>())
            {
              value = Overflow["dataPeriod"];
              return true;
            }
            value = _DataPeriod;
            return (value as Hl7.Fhir.Model.Period) is not null;
          case "data":
            if (_Data.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptDataComponent>>())
            {
              value = Overflow["data"];
              return true;
            }
            value = _Data;
            return (value as List<Hl7.Fhir.Model.Consent.ExceptDataComponent>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "type":
            if (value is not (Code<Hl7.Fhir.Model.Consent.ConsentExceptType> or null))
            {
              TypeElement = OverflowNull<Code<Hl7.Fhir.Model.Consent.ConsentExceptType>>.INSTANCE;
              Overflow["type"] = value;
            }
            else TypeElement = (Code<Hl7.Fhir.Model.Consent.ConsentExceptType>?)value!;
            return this;
          case "period":
            if (value is not (Hl7.Fhir.Model.Period or null))
            {
              Period = OverflowNull<Hl7.Fhir.Model.Period>.INSTANCE;
              Overflow["period"] = value;
            }
            else Period = (Hl7.Fhir.Model.Period?)value;
            return this;
          case "actor":
            if (value is not (List<Hl7.Fhir.Model.Consent.ExceptActorComponent> or null))
            {
              Actor = OverflowNull<List<Hl7.Fhir.Model.Consent.ExceptActorComponent>>.INSTANCE;
              Overflow["actor"] = value;
            }
            else Actor = (List<Hl7.Fhir.Model.Consent.ExceptActorComponent>?)value!;
            return this;
          case "action":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Action = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["action"] = value;
            }
            else Action = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          case "securityLabel":
            if (value is not (List<Hl7.Fhir.Model.Coding> or null))
            {
              SecurityLabel = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
              Overflow["securityLabel"] = value;
            }
            else SecurityLabel = (List<Hl7.Fhir.Model.Coding>?)value!;
            return this;
          case "purpose":
            if (value is not (List<Hl7.Fhir.Model.Coding> or null))
            {
              Purpose = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
              Overflow["purpose"] = value;
            }
            else Purpose = (List<Hl7.Fhir.Model.Coding>?)value!;
            return this;
          case "class":
            if (value is not (List<Hl7.Fhir.Model.Coding> or null))
            {
              Class = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
              Overflow["class"] = value;
            }
            else Class = (List<Hl7.Fhir.Model.Coding>?)value!;
            return this;
          case "code":
            if (value is not (List<Hl7.Fhir.Model.Coding> or null))
            {
              Code = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
              Overflow["code"] = value;
            }
            else Code = (List<Hl7.Fhir.Model.Coding>?)value!;
            return this;
          case "dataPeriod":
            if (value is not (Hl7.Fhir.Model.Period or null))
            {
              DataPeriod = OverflowNull<Hl7.Fhir.Model.Period>.INSTANCE;
              Overflow["dataPeriod"] = value;
            }
            else DataPeriod = (Hl7.Fhir.Model.Period?)value;
            return this;
          case "data":
            if (value is not (List<Hl7.Fhir.Model.Consent.ExceptDataComponent> or null))
            {
              Data = OverflowNull<List<Hl7.Fhir.Model.Consent.ExceptDataComponent>>.INSTANCE;
              Overflow["data"] = value;
            }
            else Data = (List<Hl7.Fhir.Model.Consent.ExceptDataComponent>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_TypeElement is not null && !_TypeElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentExceptType>>()) yield return new KeyValuePair<string,object>("type",_TypeElement);
        if (_Period is not null && !_Period.InOverflow<Hl7.Fhir.Model.Period>()) yield return new KeyValuePair<string,object>("period",_Period);
        if (_Actor?.Any() is true && !_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptActorComponent>>()) yield return new KeyValuePair<string,object>("actor",_Actor);
        if (_Action?.Any() is true && !_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("action",_Action);
        if (_SecurityLabel?.Any() is true && !_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("securityLabel",_SecurityLabel);
        if (_Purpose?.Any() is true && !_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("purpose",_Purpose);
        if (_Class?.Any() is true && !_Class.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("class",_Class);
        if (_Code?.Any() is true && !_Code.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("code",_Code);
        if (_DataPeriod is not null && !_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>()) yield return new KeyValuePair<string,object>("dataPeriod",_DataPeriod);
        if (_Data?.Any() is true && !_Data.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptDataComponent>>()) yield return new KeyValuePair<string,object>("data",_Data);
      }

    }

    /// <summary>
    /// Who|what controlled by this exception (or group, by role)
    /// </summary>
    /// <remarks>
    /// Who or what is controlled by this Exception. Use group to identify a set of actors by some property they share (e.g. 'admitting officers').
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Consent.except.actor", IsBackboneType=true)]
    public partial class ExceptActorComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Consent.except.actor";

      /// <summary>
      /// How the actor is involved.
      /// </summary>
      [FhirElement("role", Order=40)]
      [Binding("ConsentActorRole")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept Role
      {
        get
        {
          if(_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["role"]);
          return _Role!;
        }

        set
        {
          if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("role");
          _Role = value;
          OnPropertyChanged("Role");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Role;

      /// <summary>
      /// Resource for the actor (or group, by role).
      /// </summary>
      [FhirElement("reference", Order=50)]
      [CLSCompliant(false)]
      [References("Device","Group","CareTeam","Organization","Patient","Practitioner","RelatedPerson")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference Reference
      {
        get
        {
          if(_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["reference"]);
          return _Reference!;
        }

        set
        {
          if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("reference");
          _Reference = value;
          OnPropertyChanged("Reference");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Reference;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not ExceptActorComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Role is not null) dest.Role = (Hl7.Fhir.Model.CodeableConcept)_Role.DeepCopyInternal();
        if(_Reference is not null) dest.Reference = (Hl7.Fhir.Model.ResourceReference)_Reference.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new ExceptActorComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not ExceptActorComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Role, otherT._Role)) return false;
        if(!comparer.Equals(_Reference, otherT._Reference)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "role":
            if (_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["role"];
              return true;
            }
            value = _Role;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "reference":
            if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["reference"];
              return true;
            }
            value = _Reference;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "role":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Role = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["role"] = value;
            }
            else Role = (Hl7.Fhir.Model.CodeableConcept?)value!;
            return this;
          case "reference":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Reference = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["reference"] = value;
            }
            else Reference = (Hl7.Fhir.Model.ResourceReference?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Role is not null && !_Role.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("role",_Role);
        if (_Reference is not null && !_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("reference",_Reference);
      }

    }

    /// <summary>
    /// Data controlled by this exception
    /// </summary>
    /// <remarks>
    /// The resources controlled by this exception, if specific resources are referenced.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("Consent.except.data", IsBackboneType=true)]
    public partial class ExceptDataComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "Consent.except.data";

      /// <summary>
      /// instance | related | dependents | authoredby.
      /// </summary>
      [FhirElement("meaning", InSummary=true, Order=40)]
      [Binding("ConsentDataMeaning")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning> MeaningElement
      {
        get
        {
          if(_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>())
            throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>), Overflow["meaning"]);
          return _MeaningElement!;
        }

        set
        {
          if (_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>())
            Overflow.Remove("meaning");
          _MeaningElement = value;
          OnPropertyChanged("MeaningElement");
        }

      }

      private Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>? _MeaningElement;

      /// <summary>
      /// instance | related | dependents | authoredby
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public Hl7.Fhir.Model.Consent.ConsentDataMeaning? Meaning
      {
        get => MeaningElement?.Value;
        set
        {
          MeaningElement = value is null ? null! : new Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>(value);
          OnPropertyChanged("Meaning");
        }
      }

      /// <summary>
      /// The actual data reference.
      /// </summary>
      [FhirElement("reference", InSummary=true, Order=50)]
      [CLSCompliant(false)]
      [References("Resource")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference Reference
      {
        get
        {
          if(_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["reference"]);
          return _Reference!;
        }

        set
        {
          if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("reference");
          _Reference = value;
          OnPropertyChanged("Reference");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Reference;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not ExceptDataComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_MeaningElement is not null) dest.MeaningElement = (Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>)_MeaningElement.DeepCopyInternal();
        if(_Reference is not null) dest.Reference = (Hl7.Fhir.Model.ResourceReference)_Reference.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new ExceptDataComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not ExceptDataComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_MeaningElement, otherT._MeaningElement)) return false;
        if(!comparer.Equals(_Reference, otherT._Reference)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "meaning":
            if (_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>())
            {
              value = Overflow["meaning"];
              return true;
            }
            value = _MeaningElement;
            return (value as Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>) is not null;
          case "reference":
            if (_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["reference"];
              return true;
            }
            value = _Reference;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "meaning":
            if (value is not (Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning> or null))
            {
              MeaningElement = OverflowNull<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>.INSTANCE;
              Overflow["meaning"] = value;
            }
            else MeaningElement = (Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>?)value!;
            return this;
          case "reference":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Reference = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["reference"] = value;
            }
            else Reference = (Hl7.Fhir.Model.ResourceReference?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_MeaningElement is not null && !_MeaningElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentDataMeaning>>()) yield return new KeyValuePair<string,object>("meaning",_MeaningElement);
        if (_Reference is not null && !_Reference.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("reference",_Reference);
      }

    }

    /// <summary>
    /// Identifier for this record (external references).
    /// </summary>
    [FhirElement("identifier", InSummary=true, Order=90, FiveWs="id")]
    [DataMember]
    public Hl7.Fhir.Model.Identifier? Identifier
    {
      get
      {
        if(_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Identifier), Overflow["identifier"]);
        return _Identifier;
      }

      set
      {
        if (_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>())
          Overflow.Remove("identifier");
        _Identifier = value;
        OnPropertyChanged("Identifier");
      }

    }

    private Hl7.Fhir.Model.Identifier? _Identifier;

    /// <summary>
    /// draft | proposed | active | rejected | inactive | entered-in-error.
    /// </summary>
    [FhirElement("status", InSummary=true, IsModifier=true, Order=100, FiveWs="status")]
    [Binding("ConsentState")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Code<Hl7.Fhir.Model.Consent.ConsentState> StatusElement
    {
      get
      {
        if(_StatusElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentState>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.Consent.ConsentState>), Overflow["status"]);
        return _StatusElement!;
      }

      set
      {
        if (_StatusElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentState>>())
          Overflow.Remove("status");
        _StatusElement = value;
        OnPropertyChanged("StatusElement");
      }

    }

    private Code<Hl7.Fhir.Model.Consent.ConsentState>? _StatusElement;

    /// <summary>
    /// draft | proposed | active | rejected | inactive | entered-in-error
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.Consent.ConsentState? Status
    {
      get => StatusElement?.Value;
      set
      {
        StatusElement = value is null ? null! : new Code<Hl7.Fhir.Model.Consent.ConsentState>(value);
        OnPropertyChanged("Status");
      }
    }

    /// <summary>
    /// Classification of the consent statement - for indexing/retrieval.
    /// </summary>
    [FhirElement("category", InSummary=true, Order=110, FiveWs="class")]
    [Binding("ConsentCategory")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.CodeableConcept> Category
    {
      get
      {
        if(_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["category"]);
        return _Category ??= [];
      }

      set
      {
        if (_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          Overflow.Remove("category");
        _Category = value;
        OnPropertyChanged("Category");
      }

    }

    private List<Hl7.Fhir.Model.CodeableConcept>? _Category;

    /// <summary>
    /// Who the consent applies to.
    /// </summary>
    [FhirElement("patient", InSummary=true, Order=120, FiveWs="who.focus")]
    [CLSCompliant(false)]
    [References("Patient")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.ResourceReference Patient
    {
      get
      {
        if(_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["patient"]);
        return _Patient!;
      }

      set
      {
        if (_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          Overflow.Remove("patient");
        _Patient = value;
        OnPropertyChanged("Patient");
      }

    }

    private Hl7.Fhir.Model.ResourceReference? _Patient;

    /// <summary>
    /// Period that this consent applies.
    /// </summary>
    [FhirElement("period", InSummary=true, Order=130, FiveWs="when.done")]
    [DataMember]
    public Hl7.Fhir.Model.Period? Period
    {
      get
      {
        if(_Period.InOverflow<Hl7.Fhir.Model.Period>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Period), Overflow["period"]);
        return _Period;
      }

      set
      {
        if (_Period.InOverflow<Hl7.Fhir.Model.Period>())
          Overflow.Remove("period");
        _Period = value;
        OnPropertyChanged("Period");
      }

    }

    private Hl7.Fhir.Model.Period? _Period;

    /// <summary>
    /// When this Consent was created or indexed.
    /// </summary>
    [FhirElement("dateTime", InSummary=true, Order=140, FiveWs="when.recorded")]
    [DataMember]
    public Hl7.Fhir.Model.FhirDateTime? DateTimeElement
    {
      get
      {
        if(_DateTimeElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirDateTime), Overflow["dateTime"]);
        return _DateTimeElement;
      }

      set
      {
        if (_DateTimeElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          Overflow.Remove("dateTime");
        _DateTimeElement = value;
        OnPropertyChanged("DateTimeElement");
      }

    }

    private Hl7.Fhir.Model.FhirDateTime? _DateTimeElement;

    /// <summary>
    /// When this Consent was created or indexed
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public string? DateTime
    {
      get => DateTimeElement?.Value;
      set
      {
        DateTimeElement = value is null ? null! : new Hl7.Fhir.Model.FhirDateTime(value);
        OnPropertyChanged("DateTime");
      }
    }

    /// <summary>
    /// Who is agreeing to the policy and exceptions.
    /// </summary>
    [FhirElement("consentingParty", InSummary=true, Order=150, FiveWs="who.actor")]
    [CLSCompliant(false)]
    [References("Organization","Patient","Practitioner","RelatedPerson")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.ResourceReference> ConsentingParty
    {
      get
      {
        if(_ConsentingParty.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.ResourceReference>), Overflow["consentingParty"]);
        return _ConsentingParty ??= [];
      }

      set
      {
        if (_ConsentingParty.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          Overflow.Remove("consentingParty");
        _ConsentingParty = value;
        OnPropertyChanged("ConsentingParty");
      }

    }

    private List<Hl7.Fhir.Model.ResourceReference>? _ConsentingParty;

    /// <summary>
    /// Who|what controlled by this consent (or group, by role).
    /// </summary>
    [FhirElement("actor", InSummary=true, Order=160, FiveWs="who.actor")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Consent.ActorComponent> Actor
    {
      get
      {
        if(_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ActorComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Consent.ActorComponent>), Overflow["actor"]);
        return _Actor ??= [];
      }

      set
      {
        if (_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ActorComponent>>())
          Overflow.Remove("actor");
        _Actor = value;
        OnPropertyChanged("Actor");
      }

    }

    private List<Hl7.Fhir.Model.Consent.ActorComponent>? _Actor;

    /// <summary>
    /// Actions controlled by this consent.
    /// </summary>
    [FhirElement("action", InSummary=true, Order=170)]
    [Binding("ConsentAction")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.CodeableConcept> Action
    {
      get
      {
        if(_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["action"]);
        return _Action ??= [];
      }

      set
      {
        if (_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          Overflow.Remove("action");
        _Action = value;
        OnPropertyChanged("Action");
      }

    }

    private List<Hl7.Fhir.Model.CodeableConcept>? _Action;

    /// <summary>
    /// Custodian of the consent.
    /// </summary>
    [FhirElement("organization", InSummary=true, Order=180, FiveWs="who.witness")]
    [CLSCompliant(false)]
    [References("Organization")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.ResourceReference> Organization
    {
      get
      {
        if(_Organization.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.ResourceReference>), Overflow["organization"]);
        return _Organization ??= [];
      }

      set
      {
        if (_Organization.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          Overflow.Remove("organization");
        _Organization = value;
        OnPropertyChanged("Organization");
      }

    }

    private List<Hl7.Fhir.Model.ResourceReference>? _Organization;

    /// <summary>
    /// Source from which this consent is taken.
    /// </summary>
    [FhirElement("source", InSummary=true, Order=190, Choice=ChoiceType.DatatypeChoice)]
    [CLSCompliant(false)]
    [References("Consent","DocumentReference","Contract","QuestionnaireResponse")]
    [AllowedTypes(typeof(Hl7.Fhir.Model.Attachment),typeof(Hl7.Fhir.Model.Identifier),typeof(Hl7.Fhir.Model.ResourceReference))]
    [DataMember]
    public Hl7.Fhir.Model.DataType? Source
    {
      get
      {
        if(_Source.InOverflow<DynamicDataType>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["source"]);
        return _Source;
      }

      set
      {
        if (_Source.InOverflow<DynamicDataType>())
          Overflow.Remove("source");
        _Source = value;
        OnPropertyChanged("Source");
      }

    }

    private Hl7.Fhir.Model.DataType? _Source;

    /// <summary>
    /// Policies covered by this consent.
    /// </summary>
    [FhirElement("policy", Order=200)]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Consent.PolicyComponent> Policy
    {
      get
      {
        if(_Policy.InOverflow<List<Hl7.Fhir.Model.Consent.PolicyComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Consent.PolicyComponent>), Overflow["policy"]);
        return _Policy ??= [];
      }

      set
      {
        if (_Policy.InOverflow<List<Hl7.Fhir.Model.Consent.PolicyComponent>>())
          Overflow.Remove("policy");
        _Policy = value;
        OnPropertyChanged("Policy");
      }

    }

    private List<Hl7.Fhir.Model.Consent.PolicyComponent>? _Policy;

    /// <summary>
    /// Policy that this consents to.
    /// </summary>
    [FhirElement("policyRule", InSummary=true, Order=210)]
    [DataMember]
    public Hl7.Fhir.Model.FhirUri? PolicyRuleElement
    {
      get
      {
        if(_PolicyRuleElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirUri), Overflow["policyRule"]);
        return _PolicyRuleElement;
      }

      set
      {
        if (_PolicyRuleElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
          Overflow.Remove("policyRule");
        _PolicyRuleElement = value;
        OnPropertyChanged("PolicyRuleElement");
      }

    }

    private Hl7.Fhir.Model.FhirUri? _PolicyRuleElement;

    /// <summary>
    /// Policy that this consents to
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public string? PolicyRule
    {
      get => PolicyRuleElement?.Value;
      set
      {
        PolicyRuleElement = value is null ? null! : new Hl7.Fhir.Model.FhirUri(value);
        OnPropertyChanged("PolicyRule");
      }
    }

    /// <summary>
    /// Security Labels that define affected resources.
    /// </summary>
    [FhirElement("securityLabel", InSummary=true, Order=220)]
    [Binding("SecurityLabels")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Coding> SecurityLabel
    {
      get
      {
        if(_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["securityLabel"]);
        return _SecurityLabel ??= [];
      }

      set
      {
        if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          Overflow.Remove("securityLabel");
        _SecurityLabel = value;
        OnPropertyChanged("SecurityLabel");
      }

    }

    private List<Hl7.Fhir.Model.Coding>? _SecurityLabel;

    /// <summary>
    /// Context of activities for which the agreement is made.
    /// </summary>
    [FhirElement("purpose", InSummary=true, Order=230)]
    [Binding("PurposeOfUse")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Coding> Purpose
    {
      get
      {
        if(_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["purpose"]);
        return _Purpose ??= [];
      }

      set
      {
        if (_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          Overflow.Remove("purpose");
        _Purpose = value;
        OnPropertyChanged("Purpose");
      }

    }

    private List<Hl7.Fhir.Model.Coding>? _Purpose;

    /// <summary>
    /// Timeframe for data controlled by this consent.
    /// </summary>
    [FhirElement("dataPeriod", InSummary=true, Order=240)]
    [DataMember]
    public Hl7.Fhir.Model.Period? DataPeriod
    {
      get
      {
        if(_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Period), Overflow["dataPeriod"]);
        return _DataPeriod;
      }

      set
      {
        if (_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>())
          Overflow.Remove("dataPeriod");
        _DataPeriod = value;
        OnPropertyChanged("DataPeriod");
      }

    }

    private Hl7.Fhir.Model.Period? _DataPeriod;

    /// <summary>
    /// Data controlled by this consent.
    /// </summary>
    [FhirElement("data", InSummary=true, Order=250)]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Consent.DataComponent> Data
    {
      get
      {
        if(_Data.InOverflow<List<Hl7.Fhir.Model.Consent.DataComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Consent.DataComponent>), Overflow["data"]);
        return _Data ??= [];
      }

      set
      {
        if (_Data.InOverflow<List<Hl7.Fhir.Model.Consent.DataComponent>>())
          Overflow.Remove("data");
        _Data = value;
        OnPropertyChanged("Data");
      }

    }

    private List<Hl7.Fhir.Model.Consent.DataComponent>? _Data;

    /// <summary>
    /// Additional rule -  addition or removal of permissions.
    /// </summary>
    [FhirElement("except", InSummary=true, Order=260)]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Consent.ExceptComponent> Except
    {
      get
      {
        if(_Except.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Consent.ExceptComponent>), Overflow["except"]);
        return _Except ??= [];
      }

      set
      {
        if (_Except.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptComponent>>())
          Overflow.Remove("except");
        _Except = value;
        OnPropertyChanged("Except");
      }

    }

    private List<Hl7.Fhir.Model.Consent.ExceptComponent>? _Except;

    Identifier? IIdentifiable<Identifier?>.Identifier { get => Identifier; set => Identifier = value!; }

    protected internal override void CopyToInternal(Base other)
    {
      if(other is not Consent dest)
        throw new ArgumentException("Can only copy to an object of the same type", "other");

      base.CopyToInternal(dest);
      if(_Identifier is not null) dest.Identifier = (Hl7.Fhir.Model.Identifier)_Identifier.DeepCopyInternal();
      if(_StatusElement is not null) dest.StatusElement = (Code<Hl7.Fhir.Model.Consent.ConsentState>)_StatusElement.DeepCopyInternal();
      if(_Category is not null) dest.Category = new List<Hl7.Fhir.Model.CodeableConcept>(_Category.DeepCopyInternal());
      if(_Patient is not null) dest.Patient = (Hl7.Fhir.Model.ResourceReference)_Patient.DeepCopyInternal();
      if(_Period is not null) dest.Period = (Hl7.Fhir.Model.Period)_Period.DeepCopyInternal();
      if(_DateTimeElement is not null) dest.DateTimeElement = (Hl7.Fhir.Model.FhirDateTime)_DateTimeElement.DeepCopyInternal();
      if(_ConsentingParty is not null) dest.ConsentingParty = new List<Hl7.Fhir.Model.ResourceReference>(_ConsentingParty.DeepCopyInternal());
      if(_Actor is not null) dest.Actor = new List<Hl7.Fhir.Model.Consent.ActorComponent>(_Actor.DeepCopyInternal());
      if(_Action is not null) dest.Action = new List<Hl7.Fhir.Model.CodeableConcept>(_Action.DeepCopyInternal());
      if(_Organization is not null) dest.Organization = new List<Hl7.Fhir.Model.ResourceReference>(_Organization.DeepCopyInternal());
      if(_Source is not null) dest.Source = (Hl7.Fhir.Model.DataType)_Source.DeepCopyInternal();
      if(_Policy is not null) dest.Policy = new List<Hl7.Fhir.Model.Consent.PolicyComponent>(_Policy.DeepCopyInternal());
      if(_PolicyRuleElement is not null) dest.PolicyRuleElement = (Hl7.Fhir.Model.FhirUri)_PolicyRuleElement.DeepCopyInternal();
      if(_SecurityLabel is not null) dest.SecurityLabel = new List<Hl7.Fhir.Model.Coding>(_SecurityLabel.DeepCopyInternal());
      if(_Purpose is not null) dest.Purpose = new List<Hl7.Fhir.Model.Coding>(_Purpose.DeepCopyInternal());
      if(_DataPeriod is not null) dest.DataPeriod = (Hl7.Fhir.Model.Period)_DataPeriod.DeepCopyInternal();
      if(_Data is not null) dest.Data = new List<Hl7.Fhir.Model.Consent.DataComponent>(_Data.DeepCopyInternal());
      if(_Except is not null) dest.Except = new List<Hl7.Fhir.Model.Consent.ExceptComponent>(_Except.DeepCopyInternal());
    }

    protected internal override Base DeepCopyInternal()
    {
      var instance = new Consent();
      CopyToInternal(instance);
      return instance;
    }

    public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
    {
      if(other is not Consent otherT) return false;

      if(!base.CompareChildren(otherT, comparer)) return false;
      #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
      if(!comparer.Equals(_Identifier, otherT._Identifier)) return false;
      if(!comparer.Equals(_StatusElement, otherT._StatusElement)) return false;
      if(!comparer.ListEquals(_Category, otherT._Category)) return false;
      if(!comparer.Equals(_Patient, otherT._Patient)) return false;
      if(!comparer.Equals(_Period, otherT._Period)) return false;
      if(!comparer.Equals(_DateTimeElement, otherT._DateTimeElement)) return false;
      if(!comparer.ListEquals(_ConsentingParty, otherT._ConsentingParty)) return false;
      if(!comparer.ListEquals(_Actor, otherT._Actor)) return false;
      if(!comparer.ListEquals(_Action, otherT._Action)) return false;
      if(!comparer.ListEquals(_Organization, otherT._Organization)) return false;
      if(!comparer.Equals(_Source, otherT._Source)) return false;
      if(!comparer.ListEquals(_Policy, otherT._Policy)) return false;
      if(!comparer.Equals(_PolicyRuleElement, otherT._PolicyRuleElement)) return false;
      if(!comparer.ListEquals(_SecurityLabel, otherT._SecurityLabel)) return false;
      if(!comparer.ListEquals(_Purpose, otherT._Purpose)) return false;
      if(!comparer.Equals(_DataPeriod, otherT._DataPeriod)) return false;
      if(!comparer.ListEquals(_Data, otherT._Data)) return false;
      if(!comparer.ListEquals(_Except, otherT._Except)) return false;
      #pragma warning restore CS8604 // Possible null reference argument.

      return true;
    }

    public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
    {
      switch (key)
      {
        case "identifier":
          if (_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>())
          {
            value = Overflow["identifier"];
            return true;
          }
          value = _Identifier;
          return (value as Hl7.Fhir.Model.Identifier) is not null;
        case "status":
          if (_StatusElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentState>>())
          {
            value = Overflow["status"];
            return true;
          }
          value = _StatusElement;
          return (value as Code<Hl7.Fhir.Model.Consent.ConsentState>) is not null;
        case "category":
          if (_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          {
            value = Overflow["category"];
            return true;
          }
          value = _Category;
          return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
        case "patient":
          if (_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>())
          {
            value = Overflow["patient"];
            return true;
          }
          value = _Patient;
          return (value as Hl7.Fhir.Model.ResourceReference) is not null;
        case "period":
          if (_Period.InOverflow<Hl7.Fhir.Model.Period>())
          {
            value = Overflow["period"];
            return true;
          }
          value = _Period;
          return (value as Hl7.Fhir.Model.Period) is not null;
        case "dateTime":
          if (_DateTimeElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>())
          {
            value = Overflow["dateTime"];
            return true;
          }
          value = _DateTimeElement;
          return (value as Hl7.Fhir.Model.FhirDateTime) is not null;
        case "consentingParty":
          if (_ConsentingParty.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          {
            value = Overflow["consentingParty"];
            return true;
          }
          value = _ConsentingParty;
          return (value as List<Hl7.Fhir.Model.ResourceReference>)?.Any() is true;
        case "actor":
          if (_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ActorComponent>>())
          {
            value = Overflow["actor"];
            return true;
          }
          value = _Actor;
          return (value as List<Hl7.Fhir.Model.Consent.ActorComponent>)?.Any() is true;
        case "action":
          if (_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          {
            value = Overflow["action"];
            return true;
          }
          value = _Action;
          return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
        case "organization":
          if (_Organization.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>())
          {
            value = Overflow["organization"];
            return true;
          }
          value = _Organization;
          return (value as List<Hl7.Fhir.Model.ResourceReference>)?.Any() is true;
        case "source":
          if (_Source.InOverflow<DynamicDataType>())
          {
            value = Overflow["source"];
            return true;
          }
          value = _Source;
          return (value as Hl7.Fhir.Model.DataType) is not null;
        case "policy":
          if (_Policy.InOverflow<List<Hl7.Fhir.Model.Consent.PolicyComponent>>())
          {
            value = Overflow["policy"];
            return true;
          }
          value = _Policy;
          return (value as List<Hl7.Fhir.Model.Consent.PolicyComponent>)?.Any() is true;
        case "policyRule":
          if (_PolicyRuleElement.InOverflow<Hl7.Fhir.Model.FhirUri>())
          {
            value = Overflow["policyRule"];
            return true;
          }
          value = _PolicyRuleElement;
          return (value as Hl7.Fhir.Model.FhirUri) is not null;
        case "securityLabel":
          if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          {
            value = Overflow["securityLabel"];
            return true;
          }
          value = _SecurityLabel;
          return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
        case "purpose":
          if (_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          {
            value = Overflow["purpose"];
            return true;
          }
          value = _Purpose;
          return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
        case "dataPeriod":
          if (_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>())
          {
            value = Overflow["dataPeriod"];
            return true;
          }
          value = _DataPeriod;
          return (value as Hl7.Fhir.Model.Period) is not null;
        case "data":
          if (_Data.InOverflow<List<Hl7.Fhir.Model.Consent.DataComponent>>())
          {
            value = Overflow["data"];
            return true;
          }
          value = _Data;
          return (value as List<Hl7.Fhir.Model.Consent.DataComponent>)?.Any() is true;
        case "except":
          if (_Except.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptComponent>>())
          {
            value = Overflow["except"];
            return true;
          }
          value = _Except;
          return (value as List<Hl7.Fhir.Model.Consent.ExceptComponent>)?.Any() is true;
        default:
          return base.TryGetValue(key, out value);
      }

    }

    public override Base SetValue(string key, object? value)
    {
      if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
      switch (key)
      {
        case "identifier":
          if (value is not (Hl7.Fhir.Model.Identifier or null))
          {
            Identifier = OverflowNull<Hl7.Fhir.Model.Identifier>.INSTANCE;
            Overflow["identifier"] = value;
          }
          else Identifier = (Hl7.Fhir.Model.Identifier?)value;
          return this;
        case "status":
          if (value is not (Code<Hl7.Fhir.Model.Consent.ConsentState> or null))
          {
            StatusElement = OverflowNull<Code<Hl7.Fhir.Model.Consent.ConsentState>>.INSTANCE;
            Overflow["status"] = value;
          }
          else StatusElement = (Code<Hl7.Fhir.Model.Consent.ConsentState>?)value!;
          return this;
        case "category":
          if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
          {
            Category = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
            Overflow["category"] = value;
          }
          else Category = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
          return this;
        case "patient":
          if (value is not (Hl7.Fhir.Model.ResourceReference or null))
          {
            Patient = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
            Overflow["patient"] = value;
          }
          else Patient = (Hl7.Fhir.Model.ResourceReference?)value!;
          return this;
        case "period":
          if (value is not (Hl7.Fhir.Model.Period or null))
          {
            Period = OverflowNull<Hl7.Fhir.Model.Period>.INSTANCE;
            Overflow["period"] = value;
          }
          else Period = (Hl7.Fhir.Model.Period?)value;
          return this;
        case "dateTime":
          if (value is not (Hl7.Fhir.Model.FhirDateTime or null))
          {
            DateTimeElement = OverflowNull<Hl7.Fhir.Model.FhirDateTime>.INSTANCE;
            Overflow["dateTime"] = value;
          }
          else DateTimeElement = (Hl7.Fhir.Model.FhirDateTime?)value;
          return this;
        case "consentingParty":
          if (value is not (List<Hl7.Fhir.Model.ResourceReference> or null))
          {
            ConsentingParty = OverflowNull<List<Hl7.Fhir.Model.ResourceReference>>.INSTANCE;
            Overflow["consentingParty"] = value;
          }
          else ConsentingParty = (List<Hl7.Fhir.Model.ResourceReference>?)value!;
          return this;
        case "actor":
          if (value is not (List<Hl7.Fhir.Model.Consent.ActorComponent> or null))
          {
            Actor = OverflowNull<List<Hl7.Fhir.Model.Consent.ActorComponent>>.INSTANCE;
            Overflow["actor"] = value;
          }
          else Actor = (List<Hl7.Fhir.Model.Consent.ActorComponent>?)value!;
          return this;
        case "action":
          if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
          {
            Action = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
            Overflow["action"] = value;
          }
          else Action = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
          return this;
        case "organization":
          if (value is not (List<Hl7.Fhir.Model.ResourceReference> or null))
          {
            Organization = OverflowNull<List<Hl7.Fhir.Model.ResourceReference>>.INSTANCE;
            Overflow["organization"] = value;
          }
          else Organization = (List<Hl7.Fhir.Model.ResourceReference>?)value!;
          return this;
        case "source":
          if (value is not (Hl7.Fhir.Model.DataType or null))
          {
            Source = OverflowNull<DynamicDataType>.INSTANCE;
            Overflow["source"] = value;
          }
          else Source = (Hl7.Fhir.Model.DataType?)value;
          return this;
        case "policy":
          if (value is not (List<Hl7.Fhir.Model.Consent.PolicyComponent> or null))
          {
            Policy = OverflowNull<List<Hl7.Fhir.Model.Consent.PolicyComponent>>.INSTANCE;
            Overflow["policy"] = value;
          }
          else Policy = (List<Hl7.Fhir.Model.Consent.PolicyComponent>?)value!;
          return this;
        case "policyRule":
          if (value is not (Hl7.Fhir.Model.FhirUri or null))
          {
            PolicyRuleElement = OverflowNull<Hl7.Fhir.Model.FhirUri>.INSTANCE;
            Overflow["policyRule"] = value;
          }
          else PolicyRuleElement = (Hl7.Fhir.Model.FhirUri?)value;
          return this;
        case "securityLabel":
          if (value is not (List<Hl7.Fhir.Model.Coding> or null))
          {
            SecurityLabel = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
            Overflow["securityLabel"] = value;
          }
          else SecurityLabel = (List<Hl7.Fhir.Model.Coding>?)value!;
          return this;
        case "purpose":
          if (value is not (List<Hl7.Fhir.Model.Coding> or null))
          {
            Purpose = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
            Overflow["purpose"] = value;
          }
          else Purpose = (List<Hl7.Fhir.Model.Coding>?)value!;
          return this;
        case "dataPeriod":
          if (value is not (Hl7.Fhir.Model.Period or null))
          {
            DataPeriod = OverflowNull<Hl7.Fhir.Model.Period>.INSTANCE;
            Overflow["dataPeriod"] = value;
          }
          else DataPeriod = (Hl7.Fhir.Model.Period?)value;
          return this;
        case "data":
          if (value is not (List<Hl7.Fhir.Model.Consent.DataComponent> or null))
          {
            Data = OverflowNull<List<Hl7.Fhir.Model.Consent.DataComponent>>.INSTANCE;
            Overflow["data"] = value;
          }
          else Data = (List<Hl7.Fhir.Model.Consent.DataComponent>?)value!;
          return this;
        case "except":
          if (value is not (List<Hl7.Fhir.Model.Consent.ExceptComponent> or null))
          {
            Except = OverflowNull<List<Hl7.Fhir.Model.Consent.ExceptComponent>>.INSTANCE;
            Overflow["except"] = value;
          }
          else Except = (List<Hl7.Fhir.Model.Consent.ExceptComponent>?)value!;
          return this;
        default:
          return base.SetValue(key, value);
      }

    }

    public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
    {
      foreach (var kvp in base.EnumerateElements()) yield return kvp;
      if (_Identifier is not null && !_Identifier.InOverflow<Hl7.Fhir.Model.Identifier>()) yield return new KeyValuePair<string,object>("identifier",_Identifier);
      if (_StatusElement is not null && !_StatusElement.InOverflow<Code<Hl7.Fhir.Model.Consent.ConsentState>>()) yield return new KeyValuePair<string,object>("status",_StatusElement);
      if (_Category?.Any() is true && !_Category.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("category",_Category);
      if (_Patient is not null && !_Patient.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("patient",_Patient);
      if (_Period is not null && !_Period.InOverflow<Hl7.Fhir.Model.Period>()) yield return new KeyValuePair<string,object>("period",_Period);
      if (_DateTimeElement is not null && !_DateTimeElement.InOverflow<Hl7.Fhir.Model.FhirDateTime>()) yield return new KeyValuePair<string,object>("dateTime",_DateTimeElement);
      if (_ConsentingParty?.Any() is true && !_ConsentingParty.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>()) yield return new KeyValuePair<string,object>("consentingParty",_ConsentingParty);
      if (_Actor?.Any() is true && !_Actor.InOverflow<List<Hl7.Fhir.Model.Consent.ActorComponent>>()) yield return new KeyValuePair<string,object>("actor",_Actor);
      if (_Action?.Any() is true && !_Action.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("action",_Action);
      if (_Organization?.Any() is true && !_Organization.InOverflow<List<Hl7.Fhir.Model.ResourceReference>>()) yield return new KeyValuePair<string,object>("organization",_Organization);
      if (_Source is not null && !_Source.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("source",_Source);
      if (_Policy?.Any() is true && !_Policy.InOverflow<List<Hl7.Fhir.Model.Consent.PolicyComponent>>()) yield return new KeyValuePair<string,object>("policy",_Policy);
      if (_PolicyRuleElement is not null && !_PolicyRuleElement.InOverflow<Hl7.Fhir.Model.FhirUri>()) yield return new KeyValuePair<string,object>("policyRule",_PolicyRuleElement);
      if (_SecurityLabel?.Any() is true && !_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("securityLabel",_SecurityLabel);
      if (_Purpose?.Any() is true && !_Purpose.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("purpose",_Purpose);
      if (_DataPeriod is not null && !_DataPeriod.InOverflow<Hl7.Fhir.Model.Period>()) yield return new KeyValuePair<string,object>("dataPeriod",_DataPeriod);
      if (_Data?.Any() is true && !_Data.InOverflow<List<Hl7.Fhir.Model.Consent.DataComponent>>()) yield return new KeyValuePair<string,object>("data",_Data);
      if (_Except?.Any() is true && !_Except.InOverflow<List<Hl7.Fhir.Model.Consent.ExceptComponent>>()) yield return new KeyValuePair<string,object>("except",_Except);
    }

  }

}

// end of file
