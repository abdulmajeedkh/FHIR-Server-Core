// <auto-generated/>
// Contents of: hl7.fhir.r4b.expansions@4.3.0, hl7.fhir.r4b.core@4.3.0

using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using Hl7.Fhir.Introspection;
using Hl7.Fhir.Serialization;
using Hl7.Fhir.Specification;
using Hl7.Fhir.Utility;
using Hl7.Fhir.Validation;
using System.Diagnostics.CodeAnalysis;
using SystemPrimitive = Hl7.Fhir.ElementModel.Types;

#nullable enable

/*
  Copyright (c) 2011+, HL7, Inc.
  All rights reserved.
  
  Redistribution and use in source and binary forms, with or without modification, 
  are permitted provided that the following conditions are met:
  
   * Redistributions of source code must retain the above copyright notice, this 
     list of conditions and the following disclaimer.
   * Redistributions in binary form must reproduce the above copyright notice, 
     this list of conditions and the following disclaimer in the documentation 
     and/or other materials provided with the distribution.
   * Neither the name of HL7 nor the names of its contributors may be used to 
     endorse or promote products derived from this software without specific 
     prior written permission.
  
  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND 
  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED 
  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT 
  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR 
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
  POSSIBILITY OF SUCH DAMAGE.
  
*/

namespace Hl7.Fhir.Model
{
  /// <summary>
  /// Event record kept for security purposes
  /// </summary>
  /// <remarks>
  /// A record of an event made for purposes of maintaining a security log. Typical uses include detection of intrusion attempts and monitoring for inappropriate usage.
  /// Based on IHE-ATNA.
  /// </remarks>
  [Serializable]
  [DataContract]
  [FhirType("AuditEvent","http://hl7.org/fhir/StructureDefinition/AuditEvent")]
  public partial class AuditEvent : Hl7.Fhir.Model.DomainResource
  {
    /// <summary>
    /// FHIR Type Name
    /// </summary>
    public override string TypeName => "AuditEvent";

    /// <summary>
    /// Indicator for type of action performed during the event that generated the event.
    /// (url: http://hl7.org/fhir/ValueSet/audit-event-action)
    /// (system: http://hl7.org/fhir/audit-event-action)
    /// </summary>
    [FhirEnumeration("AuditEventAction", "http://hl7.org/fhir/ValueSet/audit-event-action", "http://hl7.org/fhir/audit-event-action")]
    public enum AuditEventAction
    {
      /// <summary>
      /// Create a new database object, such as placing an order.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("C"), Description("Create")]
      C,
      /// <summary>
      /// Display or print data, such as a doctor census.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("R"), Description("Read/View/Print")]
      R,
      /// <summary>
      /// Update data, such as revise patient information.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("U"), Description("Update")]
      U,
      /// <summary>
      /// Delete items, such as a doctor master file record.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("D"), Description("Delete")]
      D,
      /// <summary>
      /// Perform a system or application function such as log-on, program execution or use of an object's method, or perform a query/search operation.
      /// (system: http://hl7.org/fhir/audit-event-action)
      /// </summary>
      [EnumLiteral("E"), Description("Execute")]
      E,
    }

    /// <summary>
    /// Indicates whether the event succeeded or failed.
    /// (url: http://hl7.org/fhir/ValueSet/audit-event-outcome)
    /// (system: http://hl7.org/fhir/audit-event-outcome)
    /// </summary>
    [FhirEnumeration("AuditEventOutcome", "http://hl7.org/fhir/ValueSet/audit-event-outcome", "http://hl7.org/fhir/audit-event-outcome")]
    public enum AuditEventOutcome
    {
      /// <summary>
      /// The operation completed successfully (whether with warnings or not).
      /// (system: http://hl7.org/fhir/audit-event-outcome)
      /// </summary>
      [EnumLiteral("0"), Description("Success")]
      N0,
      /// <summary>
      /// The action was not successful due to some kind of minor failure (often equivalent to an HTTP 400 response).
      /// (system: http://hl7.org/fhir/audit-event-outcome)
      /// </summary>
      [EnumLiteral("4"), Description("Minor failure")]
      N4,
      /// <summary>
      /// The action was not successful due to some kind of unexpected error (often equivalent to an HTTP 500 response).
      /// (system: http://hl7.org/fhir/audit-event-outcome)
      /// </summary>
      [EnumLiteral("8"), Description("Serious failure")]
      N8,
      /// <summary>
      /// An error of such magnitude occurred that the system is no longer available for use (i.e. the system died).
      /// (system: http://hl7.org/fhir/audit-event-outcome)
      /// </summary>
      [EnumLiteral("12"), Description("Major failure")]
      N12,
    }

    /// <summary>
    /// The type of network access point of this agent in the audit event.
    /// (url: http://hl7.org/fhir/ValueSet/network-type)
    /// (system: http://hl7.org/fhir/network-type)
    /// </summary>
    [FhirEnumeration("AuditEventAgentNetworkType", "http://hl7.org/fhir/ValueSet/network-type", "http://hl7.org/fhir/network-type")]
    public enum AuditEventAgentNetworkType
    {
      /// <summary>
      /// The machine name, including DNS name.
      /// (system: http://hl7.org/fhir/network-type)
      /// </summary>
      [EnumLiteral("1"), Description("Machine Name")]
      N1,
      /// <summary>
      /// The assigned Internet Protocol (IP) address.
      /// (system: http://hl7.org/fhir/network-type)
      /// </summary>
      [EnumLiteral("2"), Description("IP Address")]
      N2,
      /// <summary>
      /// The assigned telephone number.
      /// (system: http://hl7.org/fhir/network-type)
      /// </summary>
      [EnumLiteral("3"), Description("Telephone Number")]
      N3,
      /// <summary>
      /// The assigned email address.
      /// (system: http://hl7.org/fhir/network-type)
      /// </summary>
      [EnumLiteral("4"), Description("Email address")]
      N4,
      /// <summary>
      /// URI (User directory, HTTP-PUT, ftp, etc.).
      /// (system: http://hl7.org/fhir/network-type)
      /// </summary>
      [EnumLiteral("5"), Description("URI")]
      N5,
    }

    /// <summary>
    /// Actor involved in the event
    /// </summary>
    /// <remarks>
    /// An actor taking an active role in the event or activity that is logged.
    /// Several agents may be associated (i.e. have some responsibility for an activity) with an event or activity.
    /// For example, an activity may be initiated by one user for other users or involve more than one user. However, only one user may be the initiator/requestor for the activity.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.agent", IsBackboneType=true)]
    public partial class AgentComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.agent";

      /// <summary>
      /// How agent participated.
      /// </summary>
      [FhirElement("type", Order=40, FiveWs="FiveWs.who")]
      [Binding("AuditAgentType")]
      [DataMember]
      public Hl7.Fhir.Model.CodeableConcept? Type
      {
        get
        {
          if(_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.CodeableConcept), Overflow["type"]);
          return _Type;
        }

        set
        {
          if (_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            Overflow.Remove("type");
          _Type = value;
          OnPropertyChanged("Type");
        }

      }

      private Hl7.Fhir.Model.CodeableConcept? _Type;

      /// <summary>
      /// Agent role in the event.
      /// </summary>
      [FhirElement("role", Order=50, FiveWs="FiveWs.who")]
      [Binding("AuditAgentRole")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> Role
      {
        get
        {
          if(_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["role"]);
          return _Role ??= [];
        }

        set
        {
          if (_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("role");
          _Role = value;
          OnPropertyChanged("Role");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _Role;

      /// <summary>
      /// Identifier of who.
      /// </summary>
      [FhirElement("who", InSummary=true, Order=60, FiveWs="FiveWs.who")]
      [CLSCompliant(false)]
      [References("PractitionerRole","Practitioner","Organization","Device","Patient","RelatedPerson")]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference? Who
      {
        get
        {
          if(_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["who"]);
          return _Who;
        }

        set
        {
          if (_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("who");
          _Who = value;
          OnPropertyChanged("Who");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Who;

      /// <summary>
      /// Alternative User identity.
      /// </summary>
      [FhirElement("altId", Order=70, FiveWs="FiveWs.who")]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? AltIdElement
      {
        get
        {
          if(_AltIdElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["altId"]);
          return _AltIdElement;
        }

        set
        {
          if (_AltIdElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("altId");
          _AltIdElement = value;
          OnPropertyChanged("AltIdElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _AltIdElement;

      /// <summary>
      /// Alternative User identity
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? AltId
      {
        get => AltIdElement?.Value;
        set
        {
          AltIdElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("AltId");
        }
      }

      /// <summary>
      /// Human friendly name for the agent.
      /// </summary>
      [FhirElement("name", Order=80, FiveWs="FiveWs.who")]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? NameElement
      {
        get
        {
          if(_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["name"]);
          return _NameElement;
        }

        set
        {
          if (_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("name");
          _NameElement = value;
          OnPropertyChanged("NameElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _NameElement;

      /// <summary>
      /// Human friendly name for the agent
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Name
      {
        get => NameElement?.Value;
        set
        {
          NameElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("Name");
        }
      }

      /// <summary>
      /// Whether user is initiator.
      /// </summary>
      [FhirElement("requestor", InSummary=true, Order=90, FiveWs="FiveWs.who")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.FhirBoolean RequestorElement
      {
        get
        {
          if(_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirBoolean), Overflow["requestor"]);
          return _RequestorElement!;
        }

        set
        {
          if (_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
            Overflow.Remove("requestor");
          _RequestorElement = value;
          OnPropertyChanged("RequestorElement");
        }

      }

      private Hl7.Fhir.Model.FhirBoolean? _RequestorElement;

      /// <summary>
      /// Whether user is initiator
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public bool? Requestor
      {
        get => RequestorElement?.Value;
        set
        {
          RequestorElement = value is null ? null! : new Hl7.Fhir.Model.FhirBoolean(value);
          OnPropertyChanged("Requestor");
        }
      }

      /// <summary>
      /// Where.
      /// </summary>
      [FhirElement("location", Order=100, FiveWs="FiveWs.where[x]")]
      [CLSCompliant(false)]
      [References("Location")]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference? Location
      {
        get
        {
          if(_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["location"]);
          return _Location;
        }

        set
        {
          if (_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("location");
          _Location = value;
          OnPropertyChanged("Location");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Location;

      /// <summary>
      /// Policy that authorized event.
      /// </summary>
      [FhirElement("policy", Order=110, FiveWs="FiveWs.why[x]")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.FhirUri> PolicyElement
      {
        get
        {
          if(_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.FhirUri>), Overflow["policy"]);
          return _PolicyElement ??= [];
        }

        set
        {
          if (_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>())
            Overflow.Remove("policy");
          _PolicyElement = value;
          OnPropertyChanged("PolicyElement");
        }

      }

      private List<Hl7.Fhir.Model.FhirUri>? _PolicyElement;

      /// <summary>
      /// Policy that authorized event
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public IEnumerable<string?> Policy
      {
        get => _PolicyElement?.Select(elem => elem.Value) ?? [];
        set
        {
          if (value == null)
            PolicyElement = null!;
          else
            PolicyElement = new List<Hl7.Fhir.Model.FhirUri>(value.Select(elem=>new Hl7.Fhir.Model.FhirUri(elem)));
          OnPropertyChanged("Policy");
        }
      }

      /// <summary>
      /// Type of media.
      /// </summary>
      [FhirElement("media", Order=120, FiveWs="FiveWs.where[x]")]
      [Binding("DICOMMediaType")]
      [DataMember]
      public Hl7.Fhir.Model.Coding? Media
      {
        get
        {
          if(_Media.InOverflow<Hl7.Fhir.Model.Coding>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Coding), Overflow["media"]);
          return _Media;
        }

        set
        {
          if (_Media.InOverflow<Hl7.Fhir.Model.Coding>())
            Overflow.Remove("media");
          _Media = value;
          OnPropertyChanged("Media");
        }

      }

      private Hl7.Fhir.Model.Coding? _Media;

      /// <summary>
      /// Logical network location for application activity.
      /// </summary>
      [FhirElement("network", Order=130, FiveWs="FiveWs.where[x]")]
      [DataMember]
      public Hl7.Fhir.Model.AuditEvent.NetworkComponent? Network
      {
        get
        {
          if(_Network.InOverflow<Hl7.Fhir.Model.AuditEvent.NetworkComponent>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.AuditEvent.NetworkComponent), Overflow["network"]);
          return _Network;
        }

        set
        {
          if (_Network.InOverflow<Hl7.Fhir.Model.AuditEvent.NetworkComponent>())
            Overflow.Remove("network");
          _Network = value;
          OnPropertyChanged("Network");
        }

      }

      private Hl7.Fhir.Model.AuditEvent.NetworkComponent? _Network;

      /// <summary>
      /// Reason given for this user.
      /// </summary>
      [FhirElement("purposeOfUse", Order=140, FiveWs="FiveWs.why[x]")]
      [Binding("AuditPurposeOfUse")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.CodeableConcept> PurposeOfUse
      {
        get
        {
          if(_PurposeOfUse.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["purposeOfUse"]);
          return _PurposeOfUse ??= [];
        }

        set
        {
          if (_PurposeOfUse.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            Overflow.Remove("purposeOfUse");
          _PurposeOfUse = value;
          OnPropertyChanged("PurposeOfUse");
        }

      }

      private List<Hl7.Fhir.Model.CodeableConcept>? _PurposeOfUse;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not AgentComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_Type is not null) dest.Type = (Hl7.Fhir.Model.CodeableConcept)_Type.DeepCopyInternal();
        if(_Role is not null) dest.Role = new List<Hl7.Fhir.Model.CodeableConcept>(_Role.DeepCopyInternal());
        if(_Who is not null) dest.Who = (Hl7.Fhir.Model.ResourceReference)_Who.DeepCopyInternal();
        if(_AltIdElement is not null) dest.AltIdElement = (Hl7.Fhir.Model.FhirString)_AltIdElement.DeepCopyInternal();
        if(_NameElement is not null) dest.NameElement = (Hl7.Fhir.Model.FhirString)_NameElement.DeepCopyInternal();
        if(_RequestorElement is not null) dest.RequestorElement = (Hl7.Fhir.Model.FhirBoolean)_RequestorElement.DeepCopyInternal();
        if(_Location is not null) dest.Location = (Hl7.Fhir.Model.ResourceReference)_Location.DeepCopyInternal();
        if(_PolicyElement is not null) dest.PolicyElement = new List<Hl7.Fhir.Model.FhirUri>(_PolicyElement.DeepCopyInternal());
        if(_Media is not null) dest.Media = (Hl7.Fhir.Model.Coding)_Media.DeepCopyInternal();
        if(_Network is not null) dest.Network = (Hl7.Fhir.Model.AuditEvent.NetworkComponent)_Network.DeepCopyInternal();
        if(_PurposeOfUse is not null) dest.PurposeOfUse = new List<Hl7.Fhir.Model.CodeableConcept>(_PurposeOfUse.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new AgentComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not AgentComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_Type, otherT._Type)) return false;
        if(!comparer.ListEquals(_Role, otherT._Role)) return false;
        if(!comparer.Equals(_Who, otherT._Who)) return false;
        if(!comparer.Equals(_AltIdElement, otherT._AltIdElement)) return false;
        if(!comparer.Equals(_NameElement, otherT._NameElement)) return false;
        if(!comparer.Equals(_RequestorElement, otherT._RequestorElement)) return false;
        if(!comparer.Equals(_Location, otherT._Location)) return false;
        if(!comparer.ListEquals(_PolicyElement, otherT._PolicyElement)) return false;
        if(!comparer.Equals(_Media, otherT._Media)) return false;
        if(!comparer.Equals(_Network, otherT._Network)) return false;
        if(!comparer.ListEquals(_PurposeOfUse, otherT._PurposeOfUse)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "type":
            if (_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _Type;
            return (value as Hl7.Fhir.Model.CodeableConcept) is not null;
          case "role":
            if (_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["role"];
              return true;
            }
            value = _Role;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          case "who":
            if (_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["who"];
              return true;
            }
            value = _Who;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "altId":
            if (_AltIdElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["altId"];
              return true;
            }
            value = _AltIdElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "name":
            if (_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["name"];
              return true;
            }
            value = _NameElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "requestor":
            if (_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>())
            {
              value = Overflow["requestor"];
              return true;
            }
            value = _RequestorElement;
            return (value as Hl7.Fhir.Model.FhirBoolean) is not null;
          case "location":
            if (_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["location"];
              return true;
            }
            value = _Location;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "policy":
            if (_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>())
            {
              value = Overflow["policy"];
              return true;
            }
            value = _PolicyElement;
            return (value as List<Hl7.Fhir.Model.FhirUri>)?.Any() is true;
          case "media":
            if (_Media.InOverflow<Hl7.Fhir.Model.Coding>())
            {
              value = Overflow["media"];
              return true;
            }
            value = _Media;
            return (value as Hl7.Fhir.Model.Coding) is not null;
          case "network":
            if (_Network.InOverflow<Hl7.Fhir.Model.AuditEvent.NetworkComponent>())
            {
              value = Overflow["network"];
              return true;
            }
            value = _Network;
            return (value as Hl7.Fhir.Model.AuditEvent.NetworkComponent) is not null;
          case "purposeOfUse":
            if (_PurposeOfUse.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
            {
              value = Overflow["purposeOfUse"];
              return true;
            }
            value = _PurposeOfUse;
            return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "type":
            if (value is not (Hl7.Fhir.Model.CodeableConcept or null))
            {
              Type = OverflowNull<Hl7.Fhir.Model.CodeableConcept>.INSTANCE;
              Overflow["type"] = value;
            }
            else Type = (Hl7.Fhir.Model.CodeableConcept?)value;
            return this;
          case "role":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              Role = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["role"] = value;
            }
            else Role = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          case "who":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Who = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["who"] = value;
            }
            else Who = (Hl7.Fhir.Model.ResourceReference?)value;
            return this;
          case "altId":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              AltIdElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["altId"] = value;
            }
            else AltIdElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "name":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              NameElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["name"] = value;
            }
            else NameElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "requestor":
            if (value is not (Hl7.Fhir.Model.FhirBoolean or null))
            {
              RequestorElement = OverflowNull<Hl7.Fhir.Model.FhirBoolean>.INSTANCE;
              Overflow["requestor"] = value;
            }
            else RequestorElement = (Hl7.Fhir.Model.FhirBoolean?)value!;
            return this;
          case "location":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Location = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["location"] = value;
            }
            else Location = (Hl7.Fhir.Model.ResourceReference?)value;
            return this;
          case "policy":
            if (value is not (List<Hl7.Fhir.Model.FhirUri> or null))
            {
              PolicyElement = OverflowNull<List<Hl7.Fhir.Model.FhirUri>>.INSTANCE;
              Overflow["policy"] = value;
            }
            else PolicyElement = (List<Hl7.Fhir.Model.FhirUri>?)value!;
            return this;
          case "media":
            if (value is not (Hl7.Fhir.Model.Coding or null))
            {
              Media = OverflowNull<Hl7.Fhir.Model.Coding>.INSTANCE;
              Overflow["media"] = value;
            }
            else Media = (Hl7.Fhir.Model.Coding?)value;
            return this;
          case "network":
            if (value is not (Hl7.Fhir.Model.AuditEvent.NetworkComponent or null))
            {
              Network = OverflowNull<Hl7.Fhir.Model.AuditEvent.NetworkComponent>.INSTANCE;
              Overflow["network"] = value;
            }
            else Network = (Hl7.Fhir.Model.AuditEvent.NetworkComponent?)value;
            return this;
          case "purposeOfUse":
            if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
            {
              PurposeOfUse = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
              Overflow["purposeOfUse"] = value;
            }
            else PurposeOfUse = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_Type is not null && !_Type.InOverflow<Hl7.Fhir.Model.CodeableConcept>()) yield return new KeyValuePair<string,object>("type",_Type);
        if (_Role?.Any() is true && !_Role.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("role",_Role);
        if (_Who is not null && !_Who.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("who",_Who);
        if (_AltIdElement is not null && !_AltIdElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("altId",_AltIdElement);
        if (_NameElement is not null && !_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("name",_NameElement);
        if (_RequestorElement is not null && !_RequestorElement.InOverflow<Hl7.Fhir.Model.FhirBoolean>()) yield return new KeyValuePair<string,object>("requestor",_RequestorElement);
        if (_Location is not null && !_Location.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("location",_Location);
        if (_PolicyElement?.Any() is true && !_PolicyElement.InOverflow<List<Hl7.Fhir.Model.FhirUri>>()) yield return new KeyValuePair<string,object>("policy",_PolicyElement);
        if (_Media is not null && !_Media.InOverflow<Hl7.Fhir.Model.Coding>()) yield return new KeyValuePair<string,object>("media",_Media);
        if (_Network is not null && !_Network.InOverflow<Hl7.Fhir.Model.AuditEvent.NetworkComponent>()) yield return new KeyValuePair<string,object>("network",_Network);
        if (_PurposeOfUse?.Any() is true && !_PurposeOfUse.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("purposeOfUse",_PurposeOfUse);
      }

    }

    /// <summary>
    /// Logical network location for application activity
    /// </summary>
    /// <remarks>
    /// Logical network location for application activity, if the activity has a network location.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.agent.network", IsBackboneType=true)]
    public partial class NetworkComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.agent.network";

      /// <summary>
      /// Identifier for the network access point of the user device.
      /// </summary>
      [FhirElement("address", Order=40, FiveWs="FiveWs.where[x]")]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? AddressElement
      {
        get
        {
          if(_AddressElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["address"]);
          return _AddressElement;
        }

        set
        {
          if (_AddressElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("address");
          _AddressElement = value;
          OnPropertyChanged("AddressElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _AddressElement;

      /// <summary>
      /// Identifier for the network access point of the user device
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Address
      {
        get => AddressElement?.Value;
        set
        {
          AddressElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("Address");
        }
      }

      /// <summary>
      /// The type of network access point.
      /// </summary>
      [FhirElement("type", Order=50, FiveWs="FiveWs.where[x]")]
      [Binding("AuditEventAgentNetworkType")]
      [DataMember]
      public Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>? TypeElement
      {
        get
        {
          if(_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>>())
            throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>), Overflow["type"]);
          return _TypeElement;
        }

        set
        {
          if (_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>>())
            Overflow.Remove("type");
          _TypeElement = value;
          OnPropertyChanged("TypeElement");
        }

      }

      private Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>? _TypeElement;

      /// <summary>
      /// The type of network access point
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType? Type
      {
        get => TypeElement?.Value;
        set
        {
          TypeElement = value is null ? null! : new Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>(value);
          OnPropertyChanged("Type");
        }
      }

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not NetworkComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_AddressElement is not null) dest.AddressElement = (Hl7.Fhir.Model.FhirString)_AddressElement.DeepCopyInternal();
        if(_TypeElement is not null) dest.TypeElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>)_TypeElement.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new NetworkComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not NetworkComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_AddressElement, otherT._AddressElement)) return false;
        if(!comparer.Equals(_TypeElement, otherT._TypeElement)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "address":
            if (_AddressElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["address"];
              return true;
            }
            value = _AddressElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "type":
            if (_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _TypeElement;
            return (value as Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "address":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              AddressElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["address"] = value;
            }
            else AddressElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "type":
            if (value is not (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType> or null))
            {
              TypeElement = OverflowNull<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>>.INSTANCE;
              Overflow["type"] = value;
            }
            else TypeElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>?)value;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_AddressElement is not null && !_AddressElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("address",_AddressElement);
        if (_TypeElement is not null && !_TypeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAgentNetworkType>>()) yield return new KeyValuePair<string,object>("type",_TypeElement);
      }

    }

    /// <summary>
    /// Audit Event Reporter
    /// </summary>
    /// <remarks>
    /// The system that is reporting the event.
    /// Since multi-tier, distributed, or composite applications make source identification ambiguous, this collection of fields may repeat for each application or process actively involved in the event. For example, multiple value-sets can identify participating web servers, application processes, and database server threads in an n-tier distributed application. Passive event participants (e.g. low-level network transports) need not be identified.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.source", IsBackboneType=true)]
    public partial class SourceComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.source";

      /// <summary>
      /// Logical source location within the enterprise.
      /// </summary>
      [FhirElement("site", Order=40, FiveWs="FiveWs.witness")]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? SiteElement
      {
        get
        {
          if(_SiteElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["site"]);
          return _SiteElement;
        }

        set
        {
          if (_SiteElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("site");
          _SiteElement = value;
          OnPropertyChanged("SiteElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _SiteElement;

      /// <summary>
      /// Logical source location within the enterprise
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Site
      {
        get => SiteElement?.Value;
        set
        {
          SiteElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("Site");
        }
      }

      /// <summary>
      /// The identity of source detecting the event.
      /// </summary>
      [FhirElement("observer", InSummary=true, Order=50, FiveWs="FiveWs.witness")]
      [CLSCompliant(false)]
      [References("PractitionerRole","Practitioner","Organization","Device","Patient","RelatedPerson")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference Observer
      {
        get
        {
          if(_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["observer"]);
          return _Observer!;
        }

        set
        {
          if (_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("observer");
          _Observer = value;
          OnPropertyChanged("Observer");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _Observer;

      /// <summary>
      /// The type of source where event originated.
      /// </summary>
      [FhirElement("type", Order=60, FiveWs="FiveWs.witness")]
      [Binding("AuditEventSourceType")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Coding> Type
      {
        get
        {
          if(_Type.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["type"]);
          return _Type ??= [];
        }

        set
        {
          if (_Type.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            Overflow.Remove("type");
          _Type = value;
          OnPropertyChanged("Type");
        }

      }

      private List<Hl7.Fhir.Model.Coding>? _Type;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not SourceComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_SiteElement is not null) dest.SiteElement = (Hl7.Fhir.Model.FhirString)_SiteElement.DeepCopyInternal();
        if(_Observer is not null) dest.Observer = (Hl7.Fhir.Model.ResourceReference)_Observer.DeepCopyInternal();
        if(_Type is not null) dest.Type = new List<Hl7.Fhir.Model.Coding>(_Type.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new SourceComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not SourceComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_SiteElement, otherT._SiteElement)) return false;
        if(!comparer.Equals(_Observer, otherT._Observer)) return false;
        if(!comparer.ListEquals(_Type, otherT._Type)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "site":
            if (_SiteElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["site"];
              return true;
            }
            value = _SiteElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "observer":
            if (_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["observer"];
              return true;
            }
            value = _Observer;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "type":
            if (_Type.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _Type;
            return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "site":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              SiteElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["site"] = value;
            }
            else SiteElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "observer":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              Observer = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["observer"] = value;
            }
            else Observer = (Hl7.Fhir.Model.ResourceReference?)value!;
            return this;
          case "type":
            if (value is not (List<Hl7.Fhir.Model.Coding> or null))
            {
              Type = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
              Overflow["type"] = value;
            }
            else Type = (List<Hl7.Fhir.Model.Coding>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_SiteElement is not null && !_SiteElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("site",_SiteElement);
        if (_Observer is not null && !_Observer.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("observer",_Observer);
        if (_Type?.Any() is true && !_Type.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("type",_Type);
      }

    }

    /// <summary>
    /// Data or objects used
    /// </summary>
    /// <remarks>
    /// Specific instances of data or objects that have been accessed.
    /// Required unless the values for event identification, agent identification, and audit source identification are sufficient to document the entire auditable event. Because events may have more than one entity, this group can be a repeating set of values.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.entity", IsBackboneType=true)]
    public partial class EntityComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.entity";

      /// <summary>
      /// Specific instance of resource.
      /// </summary>
      [FhirElement("what", InSummary=true, Order=40, FiveWs="FiveWs.what[x]")]
      [CLSCompliant(false)]
      [References("Resource")]
      [DataMember]
      public Hl7.Fhir.Model.ResourceReference? What
      {
        get
        {
          if(_What.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.ResourceReference), Overflow["what"]);
          return _What;
        }

        set
        {
          if (_What.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            Overflow.Remove("what");
          _What = value;
          OnPropertyChanged("What");
        }

      }

      private Hl7.Fhir.Model.ResourceReference? _What;

      /// <summary>
      /// Type of entity involved.
      /// </summary>
      [FhirElement("type", Order=50, FiveWs="FiveWs.what[x]")]
      [Binding("AuditEventEntityType")]
      [DataMember]
      public Hl7.Fhir.Model.Coding? Type
      {
        get
        {
          if(_Type.InOverflow<Hl7.Fhir.Model.Coding>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Coding), Overflow["type"]);
          return _Type;
        }

        set
        {
          if (_Type.InOverflow<Hl7.Fhir.Model.Coding>())
            Overflow.Remove("type");
          _Type = value;
          OnPropertyChanged("Type");
        }

      }

      private Hl7.Fhir.Model.Coding? _Type;

      /// <summary>
      /// What role the entity played.
      /// </summary>
      [FhirElement("role", Order=60, FiveWs="FiveWs.context")]
      [Binding("AuditEventEntityRole")]
      [DataMember]
      public Hl7.Fhir.Model.Coding? Role
      {
        get
        {
          if(_Role.InOverflow<Hl7.Fhir.Model.Coding>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Coding), Overflow["role"]);
          return _Role;
        }

        set
        {
          if (_Role.InOverflow<Hl7.Fhir.Model.Coding>())
            Overflow.Remove("role");
          _Role = value;
          OnPropertyChanged("Role");
        }

      }

      private Hl7.Fhir.Model.Coding? _Role;

      /// <summary>
      /// Life-cycle stage for the entity.
      /// </summary>
      [FhirElement("lifecycle", Order=70, FiveWs="FiveWs.context")]
      [Binding("AuditEventEntityLifecycle")]
      [DataMember]
      public Hl7.Fhir.Model.Coding? Lifecycle
      {
        get
        {
          if(_Lifecycle.InOverflow<Hl7.Fhir.Model.Coding>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Coding), Overflow["lifecycle"]);
          return _Lifecycle;
        }

        set
        {
          if (_Lifecycle.InOverflow<Hl7.Fhir.Model.Coding>())
            Overflow.Remove("lifecycle");
          _Lifecycle = value;
          OnPropertyChanged("Lifecycle");
        }

      }

      private Hl7.Fhir.Model.Coding? _Lifecycle;

      /// <summary>
      /// Security labels on the entity.
      /// </summary>
      [FhirElement("securityLabel", Order=80, FiveWs="FiveWs.context")]
      [Binding("SecurityLabels")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.Coding> SecurityLabel
      {
        get
        {
          if(_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["securityLabel"]);
          return _SecurityLabel ??= [];
        }

        set
        {
          if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            Overflow.Remove("securityLabel");
          _SecurityLabel = value;
          OnPropertyChanged("SecurityLabel");
        }

      }

      private List<Hl7.Fhir.Model.Coding>? _SecurityLabel;

      /// <summary>
      /// Descriptor for entity.
      /// </summary>
      [FhirElement("name", InSummary=true, Order=90, FiveWs="FiveWs.context")]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? NameElement
      {
        get
        {
          if(_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["name"]);
          return _NameElement;
        }

        set
        {
          if (_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("name");
          _NameElement = value;
          OnPropertyChanged("NameElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _NameElement;

      /// <summary>
      /// Descriptor for entity
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Name
      {
        get => NameElement?.Value;
        set
        {
          NameElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("Name");
        }
      }

      /// <summary>
      /// Descriptive text.
      /// </summary>
      [FhirElement("description", Order=100, FiveWs="FiveWs.context")]
      [DataMember]
      public Hl7.Fhir.Model.FhirString? DescriptionElement
      {
        get
        {
          if(_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["description"]);
          return _DescriptionElement;
        }

        set
        {
          if (_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("description");
          _DescriptionElement = value;
          OnPropertyChanged("DescriptionElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _DescriptionElement;

      /// <summary>
      /// Descriptive text
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Description
      {
        get => DescriptionElement?.Value;
        set
        {
          DescriptionElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("Description");
        }
      }

      /// <summary>
      /// Query parameters.
      /// </summary>
      [FhirElement("query", InSummary=true, Order=110, FiveWs="FiveWs.context")]
      [DataMember]
      public Hl7.Fhir.Model.Base64Binary? QueryElement
      {
        get
        {
          if(_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Base64Binary), Overflow["query"]);
          return _QueryElement;
        }

        set
        {
          if (_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>())
            Overflow.Remove("query");
          _QueryElement = value;
          OnPropertyChanged("QueryElement");
        }

      }

      private Hl7.Fhir.Model.Base64Binary? _QueryElement;

      /// <summary>
      /// Query parameters
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public byte[]? Query
      {
        get => QueryElement?.Value;
        set
        {
          QueryElement = value is null ? null! : new Hl7.Fhir.Model.Base64Binary(value);
          OnPropertyChanged("Query");
        }
      }

      /// <summary>
      /// Additional Information about the entity.
      /// </summary>
      [FhirElement("detail", Order=120, FiveWs="FiveWs.context")]
      [Cardinality(Min=0,Max=-1)]
      [DataMember]
      [AllowNull]
      public List<Hl7.Fhir.Model.AuditEvent.DetailComponent> Detail
      {
        get
        {
          if(_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>())
            throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AuditEvent.DetailComponent>), Overflow["detail"]);
          return _Detail ??= [];
        }

        set
        {
          if (_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>())
            Overflow.Remove("detail");
          _Detail = value;
          OnPropertyChanged("Detail");
        }

      }

      private List<Hl7.Fhir.Model.AuditEvent.DetailComponent>? _Detail;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not EntityComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_What is not null) dest.What = (Hl7.Fhir.Model.ResourceReference)_What.DeepCopyInternal();
        if(_Type is not null) dest.Type = (Hl7.Fhir.Model.Coding)_Type.DeepCopyInternal();
        if(_Role is not null) dest.Role = (Hl7.Fhir.Model.Coding)_Role.DeepCopyInternal();
        if(_Lifecycle is not null) dest.Lifecycle = (Hl7.Fhir.Model.Coding)_Lifecycle.DeepCopyInternal();
        if(_SecurityLabel is not null) dest.SecurityLabel = new List<Hl7.Fhir.Model.Coding>(_SecurityLabel.DeepCopyInternal());
        if(_NameElement is not null) dest.NameElement = (Hl7.Fhir.Model.FhirString)_NameElement.DeepCopyInternal();
        if(_DescriptionElement is not null) dest.DescriptionElement = (Hl7.Fhir.Model.FhirString)_DescriptionElement.DeepCopyInternal();
        if(_QueryElement is not null) dest.QueryElement = (Hl7.Fhir.Model.Base64Binary)_QueryElement.DeepCopyInternal();
        if(_Detail is not null) dest.Detail = new List<Hl7.Fhir.Model.AuditEvent.DetailComponent>(_Detail.DeepCopyInternal());
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new EntityComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not EntityComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_What, otherT._What)) return false;
        if(!comparer.Equals(_Type, otherT._Type)) return false;
        if(!comparer.Equals(_Role, otherT._Role)) return false;
        if(!comparer.Equals(_Lifecycle, otherT._Lifecycle)) return false;
        if(!comparer.ListEquals(_SecurityLabel, otherT._SecurityLabel)) return false;
        if(!comparer.Equals(_NameElement, otherT._NameElement)) return false;
        if(!comparer.Equals(_DescriptionElement, otherT._DescriptionElement)) return false;
        if(!comparer.Equals(_QueryElement, otherT._QueryElement)) return false;
        if(!comparer.ListEquals(_Detail, otherT._Detail)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "what":
            if (_What.InOverflow<Hl7.Fhir.Model.ResourceReference>())
            {
              value = Overflow["what"];
              return true;
            }
            value = _What;
            return (value as Hl7.Fhir.Model.ResourceReference) is not null;
          case "type":
            if (_Type.InOverflow<Hl7.Fhir.Model.Coding>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _Type;
            return (value as Hl7.Fhir.Model.Coding) is not null;
          case "role":
            if (_Role.InOverflow<Hl7.Fhir.Model.Coding>())
            {
              value = Overflow["role"];
              return true;
            }
            value = _Role;
            return (value as Hl7.Fhir.Model.Coding) is not null;
          case "lifecycle":
            if (_Lifecycle.InOverflow<Hl7.Fhir.Model.Coding>())
            {
              value = Overflow["lifecycle"];
              return true;
            }
            value = _Lifecycle;
            return (value as Hl7.Fhir.Model.Coding) is not null;
          case "securityLabel":
            if (_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>())
            {
              value = Overflow["securityLabel"];
              return true;
            }
            value = _SecurityLabel;
            return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
          case "name":
            if (_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["name"];
              return true;
            }
            value = _NameElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "description":
            if (_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["description"];
              return true;
            }
            value = _DescriptionElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "query":
            if (_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>())
            {
              value = Overflow["query"];
              return true;
            }
            value = _QueryElement;
            return (value as Hl7.Fhir.Model.Base64Binary) is not null;
          case "detail":
            if (_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>())
            {
              value = Overflow["detail"];
              return true;
            }
            value = _Detail;
            return (value as List<Hl7.Fhir.Model.AuditEvent.DetailComponent>)?.Any() is true;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "what":
            if (value is not (Hl7.Fhir.Model.ResourceReference or null))
            {
              What = OverflowNull<Hl7.Fhir.Model.ResourceReference>.INSTANCE;
              Overflow["what"] = value;
            }
            else What = (Hl7.Fhir.Model.ResourceReference?)value;
            return this;
          case "type":
            if (value is not (Hl7.Fhir.Model.Coding or null))
            {
              Type = OverflowNull<Hl7.Fhir.Model.Coding>.INSTANCE;
              Overflow["type"] = value;
            }
            else Type = (Hl7.Fhir.Model.Coding?)value;
            return this;
          case "role":
            if (value is not (Hl7.Fhir.Model.Coding or null))
            {
              Role = OverflowNull<Hl7.Fhir.Model.Coding>.INSTANCE;
              Overflow["role"] = value;
            }
            else Role = (Hl7.Fhir.Model.Coding?)value;
            return this;
          case "lifecycle":
            if (value is not (Hl7.Fhir.Model.Coding or null))
            {
              Lifecycle = OverflowNull<Hl7.Fhir.Model.Coding>.INSTANCE;
              Overflow["lifecycle"] = value;
            }
            else Lifecycle = (Hl7.Fhir.Model.Coding?)value;
            return this;
          case "securityLabel":
            if (value is not (List<Hl7.Fhir.Model.Coding> or null))
            {
              SecurityLabel = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
              Overflow["securityLabel"] = value;
            }
            else SecurityLabel = (List<Hl7.Fhir.Model.Coding>?)value!;
            return this;
          case "name":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              NameElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["name"] = value;
            }
            else NameElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "description":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              DescriptionElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["description"] = value;
            }
            else DescriptionElement = (Hl7.Fhir.Model.FhirString?)value;
            return this;
          case "query":
            if (value is not (Hl7.Fhir.Model.Base64Binary or null))
            {
              QueryElement = OverflowNull<Hl7.Fhir.Model.Base64Binary>.INSTANCE;
              Overflow["query"] = value;
            }
            else QueryElement = (Hl7.Fhir.Model.Base64Binary?)value;
            return this;
          case "detail":
            if (value is not (List<Hl7.Fhir.Model.AuditEvent.DetailComponent> or null))
            {
              Detail = OverflowNull<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>.INSTANCE;
              Overflow["detail"] = value;
            }
            else Detail = (List<Hl7.Fhir.Model.AuditEvent.DetailComponent>?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_What is not null && !_What.InOverflow<Hl7.Fhir.Model.ResourceReference>()) yield return new KeyValuePair<string,object>("what",_What);
        if (_Type is not null && !_Type.InOverflow<Hl7.Fhir.Model.Coding>()) yield return new KeyValuePair<string,object>("type",_Type);
        if (_Role is not null && !_Role.InOverflow<Hl7.Fhir.Model.Coding>()) yield return new KeyValuePair<string,object>("role",_Role);
        if (_Lifecycle is not null && !_Lifecycle.InOverflow<Hl7.Fhir.Model.Coding>()) yield return new KeyValuePair<string,object>("lifecycle",_Lifecycle);
        if (_SecurityLabel?.Any() is true && !_SecurityLabel.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("securityLabel",_SecurityLabel);
        if (_NameElement is not null && !_NameElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("name",_NameElement);
        if (_DescriptionElement is not null && !_DescriptionElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("description",_DescriptionElement);
        if (_QueryElement is not null && !_QueryElement.InOverflow<Hl7.Fhir.Model.Base64Binary>()) yield return new KeyValuePair<string,object>("query",_QueryElement);
        if (_Detail?.Any() is true && !_Detail.InOverflow<List<Hl7.Fhir.Model.AuditEvent.DetailComponent>>()) yield return new KeyValuePair<string,object>("detail",_Detail);
      }

    }

    /// <summary>
    /// Additional Information about the entity
    /// </summary>
    /// <remarks>
    /// Tagged value pairs for conveying additional information about the entity.
    /// </remarks>
    [Serializable]
    [DataContract]
    [FhirType("AuditEvent.entity.detail", IsBackboneType=true)]
    public partial class DetailComponent : Hl7.Fhir.Model.BackboneElement
    {
      /// <summary>
      /// FHIR Type Name
      /// </summary>
      public override string TypeName => "AuditEvent.entity.detail";

      /// <summary>
      /// Name of the property.
      /// </summary>
      [FhirElement("type", Order=40, FiveWs="FiveWs.context")]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.FhirString TypeElement
      {
        get
        {
          if(_TypeElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["type"]);
          return _TypeElement!;
        }

        set
        {
          if (_TypeElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            Overflow.Remove("type");
          _TypeElement = value;
          OnPropertyChanged("TypeElement");
        }

      }

      private Hl7.Fhir.Model.FhirString? _TypeElement;

      /// <summary>
      /// Name of the property
      /// </summary>
      /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
      [IgnoreDataMember]
      public string? Type
      {
        get => TypeElement?.Value;
        set
        {
          TypeElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
          OnPropertyChanged("Type");
        }
      }

      /// <summary>
      /// Property value.
      /// </summary>
      [FhirElement("value", Order=50, Choice=ChoiceType.DatatypeChoice, FiveWs="FiveWs.context")]
      [CLSCompliant(false)]
      [AllowedTypes(typeof(Hl7.Fhir.Model.FhirString),typeof(Hl7.Fhir.Model.Base64Binary))]
      [Cardinality(Min=1,Max=1)]
      [DataMember]
      public Hl7.Fhir.Model.DataType Value
      {
        get
        {
          if(_Value.InOverflow<DynamicDataType>())
            throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.DataType), Overflow["value"]);
          return _Value!;
        }

        set
        {
          if (_Value.InOverflow<DynamicDataType>())
            Overflow.Remove("value");
          _Value = value;
          OnPropertyChanged("Value");
        }

      }

      private Hl7.Fhir.Model.DataType? _Value;

      protected internal override void CopyToInternal(Base other)
      {
        if(other is not DetailComponent dest)
          throw new ArgumentException("Can only copy to an object of the same type", "other");

        base.CopyToInternal(dest);
        if(_TypeElement is not null) dest.TypeElement = (Hl7.Fhir.Model.FhirString)_TypeElement.DeepCopyInternal();
        if(_Value is not null) dest.Value = (Hl7.Fhir.Model.DataType)_Value.DeepCopyInternal();
      }

      protected internal override Base DeepCopyInternal()
      {
        var instance = new DetailComponent();
        CopyToInternal(instance);
        return instance;
      }

      public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
      {
        if(other is not DetailComponent otherT) return false;

        if(!base.CompareChildren(otherT, comparer)) return false;
        #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
        if(!comparer.Equals(_TypeElement, otherT._TypeElement)) return false;
        if(!comparer.Equals(_Value, otherT._Value)) return false;
        #pragma warning restore CS8604 // Possible null reference argument.

        return true;
      }

      public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
      {
        switch (key)
        {
          case "type":
            if (_TypeElement.InOverflow<Hl7.Fhir.Model.FhirString>())
            {
              value = Overflow["type"];
              return true;
            }
            value = _TypeElement;
            return (value as Hl7.Fhir.Model.FhirString) is not null;
          case "value":
            if (_Value.InOverflow<DynamicDataType>())
            {
              value = Overflow["value"];
              return true;
            }
            value = _Value;
            return (value as Hl7.Fhir.Model.DataType) is not null;
          default:
            return base.TryGetValue(key, out value);
        }

      }

      public override Base SetValue(string key, object? value)
      {
        if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
        switch (key)
        {
          case "type":
            if (value is not (Hl7.Fhir.Model.FhirString or null))
            {
              TypeElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
              Overflow["type"] = value;
            }
            else TypeElement = (Hl7.Fhir.Model.FhirString?)value!;
            return this;
          case "value":
            if (value is not (Hl7.Fhir.Model.DataType or null))
            {
              Value = OverflowNull<DynamicDataType>.INSTANCE;
              Overflow["value"] = value;
            }
            else Value = (Hl7.Fhir.Model.DataType?)value!;
            return this;
          default:
            return base.SetValue(key, value);
        }

      }

      public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
      {
        foreach (var kvp in base.EnumerateElements()) yield return kvp;
        if (_TypeElement is not null && !_TypeElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("type",_TypeElement);
        if (_Value is not null && !_Value.InOverflow<DynamicDataType>()) yield return new KeyValuePair<string,object>("value",_Value);
      }

    }

    /// <summary>
    /// Type/identifier of event.
    /// </summary>
    [FhirElement("type", InSummary=true, Order=90, FiveWs="FiveWs.what[x]")]
    [Binding("AuditEventType")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.Coding Type
    {
      get
      {
        if(_Type.InOverflow<Hl7.Fhir.Model.Coding>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Coding), Overflow["type"]);
        return _Type!;
      }

      set
      {
        if (_Type.InOverflow<Hl7.Fhir.Model.Coding>())
          Overflow.Remove("type");
        _Type = value;
        OnPropertyChanged("Type");
      }

    }

    private Hl7.Fhir.Model.Coding? _Type;

    /// <summary>
    /// More specific type/id for the event.
    /// </summary>
    [FhirElement("subtype", InSummary=true, Order=100, FiveWs="FiveWs.what[x]")]
    [Binding("AuditEventSubType")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.Coding> Subtype
    {
      get
      {
        if(_Subtype.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.Coding>), Overflow["subtype"]);
        return _Subtype ??= [];
      }

      set
      {
        if (_Subtype.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          Overflow.Remove("subtype");
        _Subtype = value;
        OnPropertyChanged("Subtype");
      }

    }

    private List<Hl7.Fhir.Model.Coding>? _Subtype;

    /// <summary>
    /// Type of action performed during the event.
    /// </summary>
    [FhirElement("action", InSummary=true, Order=110, FiveWs="FiveWs.what[x]")]
    [Binding("AuditEventAction")]
    [DataMember]
    public Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>? ActionElement
    {
      get
      {
        if(_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>), Overflow["action"]);
        return _ActionElement;
      }

      set
      {
        if (_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>())
          Overflow.Remove("action");
        _ActionElement = value;
        OnPropertyChanged("ActionElement");
      }

    }

    private Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>? _ActionElement;

    /// <summary>
    /// Type of action performed during the event
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.AuditEvent.AuditEventAction? Action
    {
      get => ActionElement?.Value;
      set
      {
        ActionElement = value is null ? null! : new Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>(value);
        OnPropertyChanged("Action");
      }
    }

    /// <summary>
    /// When the activity occurred.
    /// </summary>
    [FhirElement("period", Order=120, FiveWs="FiveWs.done[x]")]
    [DataMember]
    public Hl7.Fhir.Model.Period? Period
    {
      get
      {
        if(_Period.InOverflow<Hl7.Fhir.Model.Period>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Period), Overflow["period"]);
        return _Period;
      }

      set
      {
        if (_Period.InOverflow<Hl7.Fhir.Model.Period>())
          Overflow.Remove("period");
        _Period = value;
        OnPropertyChanged("Period");
      }

    }

    private Hl7.Fhir.Model.Period? _Period;

    /// <summary>
    /// Time when the event was recorded.
    /// </summary>
    [FhirElement("recorded", InSummary=true, Order=130, FiveWs="FiveWs.recorded")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.Instant RecordedElement
    {
      get
      {
        if(_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.Instant), Overflow["recorded"]);
        return _RecordedElement!;
      }

      set
      {
        if (_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>())
          Overflow.Remove("recorded");
        _RecordedElement = value;
        OnPropertyChanged("RecordedElement");
      }

    }

    private Hl7.Fhir.Model.Instant? _RecordedElement;

    /// <summary>
    /// Time when the event was recorded
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public DateTimeOffset? Recorded
    {
      get => RecordedElement?.Value;
      set
      {
        RecordedElement = value is null ? null! : new Hl7.Fhir.Model.Instant(value);
        OnPropertyChanged("Recorded");
      }
    }

    /// <summary>
    /// Whether the event succeeded or failed.
    /// </summary>
    [FhirElement("outcome", InSummary=true, Order=140, FiveWs="FiveWs.what[x]")]
    [Binding("AuditEventOutcome")]
    [DataMember]
    public Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>? OutcomeElement
    {
      get
      {
        if(_OutcomeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>>())
          throw CodedValidationException.FromTypes(typeof(Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>), Overflow["outcome"]);
        return _OutcomeElement;
      }

      set
      {
        if (_OutcomeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>>())
          Overflow.Remove("outcome");
        _OutcomeElement = value;
        OnPropertyChanged("OutcomeElement");
      }

    }

    private Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>? _OutcomeElement;

    /// <summary>
    /// Whether the event succeeded or failed
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public Hl7.Fhir.Model.AuditEvent.AuditEventOutcome? Outcome
    {
      get => OutcomeElement?.Value;
      set
      {
        OutcomeElement = value is null ? null! : new Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>(value);
        OnPropertyChanged("Outcome");
      }
    }

    /// <summary>
    /// Description of the event outcome.
    /// </summary>
    [FhirElement("outcomeDesc", InSummary=true, Order=150, FiveWs="FiveWs.what[x]")]
    [DataMember]
    public Hl7.Fhir.Model.FhirString? OutcomeDescElement
    {
      get
      {
        if(_OutcomeDescElement.InOverflow<Hl7.Fhir.Model.FhirString>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.FhirString), Overflow["outcomeDesc"]);
        return _OutcomeDescElement;
      }

      set
      {
        if (_OutcomeDescElement.InOverflow<Hl7.Fhir.Model.FhirString>())
          Overflow.Remove("outcomeDesc");
        _OutcomeDescElement = value;
        OnPropertyChanged("OutcomeDescElement");
      }

    }

    private Hl7.Fhir.Model.FhirString? _OutcomeDescElement;

    /// <summary>
    /// Description of the event outcome
    /// </summary>
    /// <remarks>This uses the native .NET datatype, rather than the FHIR equivalent</remarks>
    [IgnoreDataMember]
    public string? OutcomeDesc
    {
      get => OutcomeDescElement?.Value;
      set
      {
        OutcomeDescElement = value is null ? null! : new Hl7.Fhir.Model.FhirString(value);
        OnPropertyChanged("OutcomeDesc");
      }
    }

    /// <summary>
    /// The purposeOfUse of the event.
    /// </summary>
    [FhirElement("purposeOfEvent", InSummary=true, Order=160, FiveWs="FiveWs.why[x]")]
    [Binding("AuditPurposeOfUse")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.CodeableConcept> PurposeOfEvent
    {
      get
      {
        if(_PurposeOfEvent.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.CodeableConcept>), Overflow["purposeOfEvent"]);
        return _PurposeOfEvent ??= [];
      }

      set
      {
        if (_PurposeOfEvent.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          Overflow.Remove("purposeOfEvent");
        _PurposeOfEvent = value;
        OnPropertyChanged("PurposeOfEvent");
      }

    }

    private List<Hl7.Fhir.Model.CodeableConcept>? _PurposeOfEvent;

    /// <summary>
    /// Actor involved in the event.
    /// </summary>
    [FhirElement("agent", Order=170, FiveWs="FiveWs.who")]
    [Cardinality(Min=1,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.AuditEvent.AgentComponent> Agent
    {
      get
      {
        if(_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AuditEvent.AgentComponent>), Overflow["agent"]);
        return _Agent ??= [];
      }

      set
      {
        if (_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
          Overflow.Remove("agent");
        _Agent = value;
        OnPropertyChanged("Agent");
      }

    }

    private List<Hl7.Fhir.Model.AuditEvent.AgentComponent>? _Agent;

    /// <summary>
    /// Audit Event Reporter.
    /// </summary>
    [FhirElement("source", Order=180, FiveWs="FiveWs.witness")]
    [Cardinality(Min=1,Max=1)]
    [DataMember]
    public Hl7.Fhir.Model.AuditEvent.SourceComponent Source
    {
      get
      {
        if(_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>())
          throw CodedValidationException.FromTypes(typeof(Hl7.Fhir.Model.AuditEvent.SourceComponent), Overflow["source"]);
        return _Source!;
      }

      set
      {
        if (_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>())
          Overflow.Remove("source");
        _Source = value;
        OnPropertyChanged("Source");
      }

    }

    private Hl7.Fhir.Model.AuditEvent.SourceComponent? _Source;

    /// <summary>
    /// Data or objects used.
    /// </summary>
    [FhirElement("entity", Order=190, FiveWs="FiveWs.what[x]")]
    [Cardinality(Min=0,Max=-1)]
    [DataMember]
    [AllowNull]
    public List<Hl7.Fhir.Model.AuditEvent.EntityComponent> Entity
    {
      get
      {
        if(_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>())
          throw CodedValidationException.FromTypes(typeof(List<Hl7.Fhir.Model.AuditEvent.EntityComponent>), Overflow["entity"]);
        return _Entity ??= [];
      }

      set
      {
        if (_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>())
          Overflow.Remove("entity");
        _Entity = value;
        OnPropertyChanged("Entity");
      }

    }

    private List<Hl7.Fhir.Model.AuditEvent.EntityComponent>? _Entity;

    protected internal override void CopyToInternal(Base other)
    {
      if(other is not AuditEvent dest)
        throw new ArgumentException("Can only copy to an object of the same type", "other");

      base.CopyToInternal(dest);
      if(_Type is not null) dest.Type = (Hl7.Fhir.Model.Coding)_Type.DeepCopyInternal();
      if(_Subtype is not null) dest.Subtype = new List<Hl7.Fhir.Model.Coding>(_Subtype.DeepCopyInternal());
      if(_ActionElement is not null) dest.ActionElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>)_ActionElement.DeepCopyInternal();
      if(_Period is not null) dest.Period = (Hl7.Fhir.Model.Period)_Period.DeepCopyInternal();
      if(_RecordedElement is not null) dest.RecordedElement = (Hl7.Fhir.Model.Instant)_RecordedElement.DeepCopyInternal();
      if(_OutcomeElement is not null) dest.OutcomeElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>)_OutcomeElement.DeepCopyInternal();
      if(_OutcomeDescElement is not null) dest.OutcomeDescElement = (Hl7.Fhir.Model.FhirString)_OutcomeDescElement.DeepCopyInternal();
      if(_PurposeOfEvent is not null) dest.PurposeOfEvent = new List<Hl7.Fhir.Model.CodeableConcept>(_PurposeOfEvent.DeepCopyInternal());
      if(_Agent is not null) dest.Agent = new List<Hl7.Fhir.Model.AuditEvent.AgentComponent>(_Agent.DeepCopyInternal());
      if(_Source is not null) dest.Source = (Hl7.Fhir.Model.AuditEvent.SourceComponent)_Source.DeepCopyInternal();
      if(_Entity is not null) dest.Entity = new List<Hl7.Fhir.Model.AuditEvent.EntityComponent>(_Entity.DeepCopyInternal());
    }

    protected internal override Base DeepCopyInternal()
    {
      var instance = new AuditEvent();
      CopyToInternal(instance);
      return instance;
    }

    public override bool CompareChildren(Base other, IEqualityComparer<Base> comparer)
    {
      if(other is not AuditEvent otherT) return false;

      if(!base.CompareChildren(otherT, comparer)) return false;
      #pragma warning disable CS8604 // Possible null reference argument - netstd2.1 has a wrong nullable signature here
      if(!comparer.Equals(_Type, otherT._Type)) return false;
      if(!comparer.ListEquals(_Subtype, otherT._Subtype)) return false;
      if(!comparer.Equals(_ActionElement, otherT._ActionElement)) return false;
      if(!comparer.Equals(_Period, otherT._Period)) return false;
      if(!comparer.Equals(_RecordedElement, otherT._RecordedElement)) return false;
      if(!comparer.Equals(_OutcomeElement, otherT._OutcomeElement)) return false;
      if(!comparer.Equals(_OutcomeDescElement, otherT._OutcomeDescElement)) return false;
      if(!comparer.ListEquals(_PurposeOfEvent, otherT._PurposeOfEvent)) return false;
      if(!comparer.ListEquals(_Agent, otherT._Agent)) return false;
      if(!comparer.Equals(_Source, otherT._Source)) return false;
      if(!comparer.ListEquals(_Entity, otherT._Entity)) return false;
      #pragma warning restore CS8604 // Possible null reference argument.

      return true;
    }

    public override bool TryGetValue(string key, [NotNullWhen(true)] out object? value)
    {
      switch (key)
      {
        case "type":
          if (_Type.InOverflow<Hl7.Fhir.Model.Coding>())
          {
            value = Overflow["type"];
            return true;
          }
          value = _Type;
          return (value as Hl7.Fhir.Model.Coding) is not null;
        case "subtype":
          if (_Subtype.InOverflow<List<Hl7.Fhir.Model.Coding>>())
          {
            value = Overflow["subtype"];
            return true;
          }
          value = _Subtype;
          return (value as List<Hl7.Fhir.Model.Coding>)?.Any() is true;
        case "action":
          if (_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>())
          {
            value = Overflow["action"];
            return true;
          }
          value = _ActionElement;
          return (value as Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>) is not null;
        case "period":
          if (_Period.InOverflow<Hl7.Fhir.Model.Period>())
          {
            value = Overflow["period"];
            return true;
          }
          value = _Period;
          return (value as Hl7.Fhir.Model.Period) is not null;
        case "recorded":
          if (_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>())
          {
            value = Overflow["recorded"];
            return true;
          }
          value = _RecordedElement;
          return (value as Hl7.Fhir.Model.Instant) is not null;
        case "outcome":
          if (_OutcomeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>>())
          {
            value = Overflow["outcome"];
            return true;
          }
          value = _OutcomeElement;
          return (value as Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>) is not null;
        case "outcomeDesc":
          if (_OutcomeDescElement.InOverflow<Hl7.Fhir.Model.FhirString>())
          {
            value = Overflow["outcomeDesc"];
            return true;
          }
          value = _OutcomeDescElement;
          return (value as Hl7.Fhir.Model.FhirString) is not null;
        case "purposeOfEvent":
          if (_PurposeOfEvent.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>())
          {
            value = Overflow["purposeOfEvent"];
            return true;
          }
          value = _PurposeOfEvent;
          return (value as List<Hl7.Fhir.Model.CodeableConcept>)?.Any() is true;
        case "agent":
          if (_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>())
          {
            value = Overflow["agent"];
            return true;
          }
          value = _Agent;
          return (value as List<Hl7.Fhir.Model.AuditEvent.AgentComponent>)?.Any() is true;
        case "source":
          if (_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>())
          {
            value = Overflow["source"];
            return true;
          }
          value = _Source;
          return (value as Hl7.Fhir.Model.AuditEvent.SourceComponent) is not null;
        case "entity":
          if (_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>())
          {
            value = Overflow["entity"];
            return true;
          }
          value = _Entity;
          return (value as List<Hl7.Fhir.Model.AuditEvent.EntityComponent>)?.Any() is true;
        default:
          return base.TryGetValue(key, out value);
      }

    }

    public override Base SetValue(string key, object? value)
    {
      if(value is not (null or Hl7.Fhir.Model.Base or IList)) throw new ArgumentException("Value must be a Base or a list of Base", nameof(value));
      switch (key)
      {
        case "type":
          if (value is not (Hl7.Fhir.Model.Coding or null))
          {
            Type = OverflowNull<Hl7.Fhir.Model.Coding>.INSTANCE;
            Overflow["type"] = value;
          }
          else Type = (Hl7.Fhir.Model.Coding?)value!;
          return this;
        case "subtype":
          if (value is not (List<Hl7.Fhir.Model.Coding> or null))
          {
            Subtype = OverflowNull<List<Hl7.Fhir.Model.Coding>>.INSTANCE;
            Overflow["subtype"] = value;
          }
          else Subtype = (List<Hl7.Fhir.Model.Coding>?)value!;
          return this;
        case "action":
          if (value is not (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction> or null))
          {
            ActionElement = OverflowNull<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>.INSTANCE;
            Overflow["action"] = value;
          }
          else ActionElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>?)value;
          return this;
        case "period":
          if (value is not (Hl7.Fhir.Model.Period or null))
          {
            Period = OverflowNull<Hl7.Fhir.Model.Period>.INSTANCE;
            Overflow["period"] = value;
          }
          else Period = (Hl7.Fhir.Model.Period?)value;
          return this;
        case "recorded":
          if (value is not (Hl7.Fhir.Model.Instant or null))
          {
            RecordedElement = OverflowNull<Hl7.Fhir.Model.Instant>.INSTANCE;
            Overflow["recorded"] = value;
          }
          else RecordedElement = (Hl7.Fhir.Model.Instant?)value!;
          return this;
        case "outcome":
          if (value is not (Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome> or null))
          {
            OutcomeElement = OverflowNull<Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>>.INSTANCE;
            Overflow["outcome"] = value;
          }
          else OutcomeElement = (Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>?)value;
          return this;
        case "outcomeDesc":
          if (value is not (Hl7.Fhir.Model.FhirString or null))
          {
            OutcomeDescElement = OverflowNull<Hl7.Fhir.Model.FhirString>.INSTANCE;
            Overflow["outcomeDesc"] = value;
          }
          else OutcomeDescElement = (Hl7.Fhir.Model.FhirString?)value;
          return this;
        case "purposeOfEvent":
          if (value is not (List<Hl7.Fhir.Model.CodeableConcept> or null))
          {
            PurposeOfEvent = OverflowNull<List<Hl7.Fhir.Model.CodeableConcept>>.INSTANCE;
            Overflow["purposeOfEvent"] = value;
          }
          else PurposeOfEvent = (List<Hl7.Fhir.Model.CodeableConcept>?)value!;
          return this;
        case "agent":
          if (value is not (List<Hl7.Fhir.Model.AuditEvent.AgentComponent> or null))
          {
            Agent = OverflowNull<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>.INSTANCE;
            Overflow["agent"] = value;
          }
          else Agent = (List<Hl7.Fhir.Model.AuditEvent.AgentComponent>?)value!;
          return this;
        case "source":
          if (value is not (Hl7.Fhir.Model.AuditEvent.SourceComponent or null))
          {
            Source = OverflowNull<Hl7.Fhir.Model.AuditEvent.SourceComponent>.INSTANCE;
            Overflow["source"] = value;
          }
          else Source = (Hl7.Fhir.Model.AuditEvent.SourceComponent?)value!;
          return this;
        case "entity":
          if (value is not (List<Hl7.Fhir.Model.AuditEvent.EntityComponent> or null))
          {
            Entity = OverflowNull<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>.INSTANCE;
            Overflow["entity"] = value;
          }
          else Entity = (List<Hl7.Fhir.Model.AuditEvent.EntityComponent>?)value!;
          return this;
        default:
          return base.SetValue(key, value);
      }

    }

    public override IEnumerable<KeyValuePair<string, object>> EnumerateElements()
    {
      foreach (var kvp in base.EnumerateElements()) yield return kvp;
      if (_Type is not null && !_Type.InOverflow<Hl7.Fhir.Model.Coding>()) yield return new KeyValuePair<string,object>("type",_Type);
      if (_Subtype?.Any() is true && !_Subtype.InOverflow<List<Hl7.Fhir.Model.Coding>>()) yield return new KeyValuePair<string,object>("subtype",_Subtype);
      if (_ActionElement is not null && !_ActionElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventAction>>()) yield return new KeyValuePair<string,object>("action",_ActionElement);
      if (_Period is not null && !_Period.InOverflow<Hl7.Fhir.Model.Period>()) yield return new KeyValuePair<string,object>("period",_Period);
      if (_RecordedElement is not null && !_RecordedElement.InOverflow<Hl7.Fhir.Model.Instant>()) yield return new KeyValuePair<string,object>("recorded",_RecordedElement);
      if (_OutcomeElement is not null && !_OutcomeElement.InOverflow<Code<Hl7.Fhir.Model.AuditEvent.AuditEventOutcome>>()) yield return new KeyValuePair<string,object>("outcome",_OutcomeElement);
      if (_OutcomeDescElement is not null && !_OutcomeDescElement.InOverflow<Hl7.Fhir.Model.FhirString>()) yield return new KeyValuePair<string,object>("outcomeDesc",_OutcomeDescElement);
      if (_PurposeOfEvent?.Any() is true && !_PurposeOfEvent.InOverflow<List<Hl7.Fhir.Model.CodeableConcept>>()) yield return new KeyValuePair<string,object>("purposeOfEvent",_PurposeOfEvent);
      if (_Agent?.Any() is true && !_Agent.InOverflow<List<Hl7.Fhir.Model.AuditEvent.AgentComponent>>()) yield return new KeyValuePair<string,object>("agent",_Agent);
      if (_Source is not null && !_Source.InOverflow<Hl7.Fhir.Model.AuditEvent.SourceComponent>()) yield return new KeyValuePair<string,object>("source",_Source);
      if (_Entity?.Any() is true && !_Entity.InOverflow<List<Hl7.Fhir.Model.AuditEvent.EntityComponent>>()) yield return new KeyValuePair<string,object>("entity",_Entity);
    }

  }

}

// end of file
